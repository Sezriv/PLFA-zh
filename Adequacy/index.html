<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../public/css/style.css">
  
  <title>编程语言基础：Agda 语言描述 – Adequacy</title>
  
  
  
</head>

    <body>
        <header class="site-header">
    <div class="wrapper">
        <a class="site-title" href="../">编程语言基础：Agda 语言描述</a>
        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="../">主页</a>
                <a class="page-link" href="../Announcements/">公告</a>
                <a class="page-link" href="../GettingStarted/">使用说明</a>
                <a class="page-link" href="../Citing/">引用</a>
                <a class="page-link" href="https://plfa.github.io/">English</a>
            </div>
        </nav>
    </div>
</header>

        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                <article class="post">
    <nav class="pager">
    <ul class="pagination">
        
        <li><a class="pagelink" href="../Soundness/">上一章</a></li>
        <li class="separator">&bullet;</li>
        
        
        <li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Adequacy.lagda.md">源文件</a></li>
        <li class="separator">&bullet;</li>
        
        
        <li><a class="pagelink" href="../ContextualEquivalence/">下一章</a></li>
        <li class="separator">&bullet;</li>
        
    </ul>
</nav>

    <header class="post-header">
        <h1 class="post-title" id="adequacy">Adequacy: Adequacy of denotational semantics with respect to operational semantics</h1>
    </header>
    <div class="post-content">
        <pre class="Agda"><a id="211" class="Keyword">module</a> <a id="218" href="../Adequacy/" class="Module">plfa.part3.Adequacy</a> <a id="238" class="Keyword">where</a>
</pre>
<h2 id="introduction">Introduction</h2>
<p>Having proved a preservation property in the last chapter, a natural next step would be to prove progress. That is, to prove a property of the form</p>
<pre><code>If γ ⊢ M ↓ v, then either M is a lambda abstraction or M —→ N for some N.</code></pre>
<p>Such a property would tell us that having a denotation implies either reduction to normal form or divergence. This is indeed true, but we can prove a much stronger property! In fact, having a denotation that is a function value (not <code>⊥</code>) implies reduction to a lambda abstraction.</p>
<p>This stronger property, reformulated a bit, is known as <em>adequacy</em>. That is, if a term <code>M</code> is denotationally equal to a lambda abstraction, then <code>M</code> reduces to a lambda abstraction.</p>
<pre><code>ℰ M ≃ ℰ (ƛ N)  implies M —↠ ƛ N' for some N'</code></pre>
<p>Recall that <code>ℰ M ≃ ℰ (ƛ N)</code> is equivalent to saying that <code>γ ⊢ M ↓ (v ↦ w)</code> for some <code>v</code> and <code>w</code>. We will show that <code>γ ⊢ M ↓ (v ↦ w)</code> implies multi-step reduction a lambda abstraction. The recursive structure of the derivations for <code>γ ⊢ M ↓ (v ↦ w)</code> are completely different from the structure of multi-step reductions, so a direct proof would be challenging. However, The structure of <code>γ ⊢ M ↓ (v ↦ w)</code> closer to that of <a href="../BigStep/">BigStep</a> call-by-name evaluation. Further, we already proved that big-step evaluation implies multi-step reduction to a lambda (<code>cbn→reduce</code>). So we shall prove that <code>γ ⊢ M ↓ (v ↦ w)</code> implies that <code>γ' ⊢ M ⇓ c</code>, where <code>c</code> is a closure (a term paired with an environment), <code>γ'</code> is an environment that maps variables to closures, and <code>γ</code> and <code>γ'</code> are appropriate related. The proof will be an induction on the derivation of <code>γ ⊢ M ↓ v</code>, and to strengthen the induction hypothesis, we will relate semantic values to closures using a <em>logical relation</em> <code>𝕍</code>.</p>
<p>The rest of this chapter is organized as follows.</p>
<ul>
<li><p>To make the <code>𝕍</code> relation down-closed with respect to <code>⊑</code>, we must loosen the requirement that <code>M</code> result in a function value and instead require that <code>M</code> result in a value that is greater than or equal to a function value. We establish several properties about being ``greater than a function’’.</p></li>
<li><p>We define the logical relation <code>𝕍</code> that relates values and closures, and extend it to a relation on terms <code>𝔼</code> and environments <code>𝔾</code>. We prove several lemmas that culminate in the property that if <code>𝕍 v c</code> and <code>v′ ⊑ v</code>, then <code>𝕍 v′ c</code>.</p></li>
<li><p>We prove the main lemma, that if <code>𝔾 γ γ'</code> and <code>γ ⊢ M ↓ v</code>, then <code>𝔼 v (clos M γ')</code>.</p></li>
<li><p>We prove adequacy as a corollary to the main lemma.</p></li>
</ul>
<h2 id="imports">Imports</h2>
<pre class="Agda"><a id="2757" class="Keyword">import</a> <a id="2764" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2802" class="Symbol">as</a> <a id="2805" class="Module">Eq</a>
<a id="2808" class="Keyword">open</a> <a id="2813" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="2816" class="Keyword">using</a> <a id="2822" class="Symbol">(</a><a id="2823" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="2826" class="Symbol">;</a> <a id="2828" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">_≢_</a><a id="2831" class="Symbol">;</a> <a id="2833" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2837" class="Symbol">;</a> <a id="2839" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a><a id="2844" class="Symbol">;</a> <a id="2846" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a><a id="2849" class="Symbol">;</a> <a id="2851" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a><a id="2855" class="Symbol">;</a> <a id="2857" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html#1524" class="Function">cong₂</a><a id="2862" class="Symbol">;</a> <a id="2864" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html#1396" class="Function">cong-app</a><a id="2872" class="Symbol">)</a>
<a id="2874" class="Keyword">open</a> <a id="2879" class="Keyword">import</a> <a id="2886" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html" class="Module">Data.Product</a> <a id="2899" class="Keyword">using</a> <a id="2905" class="Symbol">(</a><a id="2906" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">_×_</a><a id="2909" class="Symbol">;</a> <a id="2911" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="2912" class="Symbol">;</a> <a id="2914" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ-syntax</a><a id="2922" class="Symbol">;</a> <a id="2924" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1369" class="Function">∃</a><a id="2925" class="Symbol">;</a> <a id="2927" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1788" class="Function">∃-syntax</a><a id="2935" class="Symbol">;</a> <a id="2937" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="2942" class="Symbol">;</a> <a id="2944" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="2949" class="Symbol">)</a>
  <a id="2953" class="Keyword">renaming</a> <a id="2962" class="Symbol">(</a><a id="2963" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="2967" class="Symbol">to</a> <a id="_,_"></a><a id="2970" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="2975" class="Symbol">)</a>
<a id="2977" class="Keyword">open</a> <a id="2982" class="Keyword">import</a> <a id="2989" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.html" class="Module">Data.Sum</a>
<a id="2998" class="Keyword">open</a> <a id="3003" class="Keyword">import</a> <a id="3010" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="3027" class="Keyword">using</a> <a id="3033" class="Symbol">(</a><a id="3034" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬_</a><a id="3036" class="Symbol">)</a>
<a id="3038" class="Keyword">open</a> <a id="3043" class="Keyword">import</a> <a id="3050" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="3076" class="Keyword">using</a> <a id="3082" class="Symbol">(</a><a id="3083" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a><a id="3096" class="Symbol">)</a>
<a id="3098" class="Keyword">open</a> <a id="3103" class="Keyword">import</a> <a id="3110" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html" class="Module">Data.Empty</a> <a id="3121" class="Keyword">using</a> <a id="3127" class="Symbol">(</a><a id="3128" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a><a id="3134" class="Symbol">)</a> <a id="3136" class="Keyword">renaming</a> <a id="3145" class="Symbol">(</a><a id="3146" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#526" class="Datatype">⊥</a> <a id="3148" class="Symbol">to</a> <a id="⊥"></a><a id="3151" href="../Adequacy/#3151" class="Datatype">Bot</a><a id="3154" class="Symbol">)</a>
<a id="3156" class="Keyword">open</a> <a id="3161" class="Keyword">import</a> <a id="3168" href="https://agda.github.io/agda-stdlib/v1.3/Data.Unit.html" class="Module">Data.Unit</a>
<a id="3178" class="Keyword">open</a> <a id="3183" class="Keyword">import</a> <a id="3190" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="3207" class="Keyword">using</a> <a id="3213" class="Symbol">(</a><a id="3214" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a><a id="3217" class="Symbol">;</a> <a id="3219" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="3222" class="Symbol">;</a> <a id="3224" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="3226" class="Symbol">)</a>
<a id="3228" class="Keyword">open</a> <a id="3233" class="Keyword">import</a> <a id="3240" href="https://agda.github.io/agda-stdlib/v1.3/Function.html" class="Module">Function</a> <a id="3249" class="Keyword">using</a> <a id="3255" class="Symbol">(</a><a id="3256" href="https://agda.github.io/agda-stdlib/v1.3/Function.Base.html#992" class="Function Operator">_∘_</a><a id="3259" class="Symbol">)</a>
<a id="3261" class="Keyword">open</a> <a id="3266" class="Keyword">import</a> <a id="3273" href="../Untyped/" class="Module">plfa.part2.Untyped</a>
     <a id="3297" class="Keyword">using</a> <a id="3303" class="Symbol">(</a><a id="3304" href="../Untyped/#3135" class="Datatype">Context</a><a id="3311" class="Symbol">;</a> <a id="3313" href="../Untyped/#4276" class="Datatype Operator">_⊢_</a><a id="3316" class="Symbol">;</a> <a id="3318" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="3319" class="Symbol">;</a> <a id="3321" href="../Untyped/#3503" class="Datatype Operator">_∋_</a><a id="3324" class="Symbol">;</a> <a id="3326" href="../Untyped/#3157" class="InductiveConstructor">∅</a><a id="3327" class="Symbol">;</a> <a id="3329" href="../Untyped/#3173" class="InductiveConstructor Operator">_,_</a><a id="3332" class="Symbol">;</a> <a id="3334" href="../Untyped/#3539" class="InductiveConstructor">Z</a><a id="3335" class="Symbol">;</a> <a id="3337" href="../Untyped/#3584" class="InductiveConstructor Operator">S_</a><a id="3339" class="Symbol">;</a> <a id="3341" href="../Untyped/#4312" class="InductiveConstructor Operator">`_</a><a id="3343" class="Symbol">;</a> <a id="3345" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ_</a><a id="3347" class="Symbol">;</a> <a id="3349" href="../Untyped/#4424" class="InductiveConstructor Operator">_·_</a><a id="3352" class="Symbol">;</a>
            <a id="3366" href="../Untyped/#6217" class="Function">rename</a><a id="3372" class="Symbol">;</a> <a id="3374" href="../Untyped/#6945" class="Function">subst</a><a id="3379" class="Symbol">;</a> <a id="3381" href="../Untyped/#5907" class="Function">ext</a><a id="3384" class="Symbol">;</a> <a id="3386" href="../Untyped/#6653" class="Function">exts</a><a id="3390" class="Symbol">;</a> <a id="3392" href="../Untyped/#7473" class="Function Operator">_[_]</a><a id="3396" class="Symbol">;</a> <a id="3398" href="../Untyped/#7357" class="Function">subst-zero</a><a id="3408" class="Symbol">;</a>
            <a id="3422" href="../Untyped/#11050" class="Datatype Operator">_—↠_</a><a id="3426" class="Symbol">;</a> <a id="3428" href="../Untyped/#11156" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="3435" class="Symbol">;</a> <a id="3437" href="../Untyped/#11100" class="InductiveConstructor Operator">_∎</a><a id="3439" class="Symbol">;</a> <a id="3441" href="../Untyped/#9930" class="Datatype Operator">_—→_</a><a id="3445" class="Symbol">;</a> <a id="3447" href="../Untyped/#9980" class="InductiveConstructor">ξ₁</a><a id="3449" class="Symbol">;</a> <a id="3451" href="../Untyped/#10070" class="InductiveConstructor">ξ₂</a><a id="3453" class="Symbol">;</a> <a id="3455" href="../Untyped/#10160" class="InductiveConstructor">β</a><a id="3456" class="Symbol">;</a> <a id="3458" href="../Untyped/#10268" class="InductiveConstructor">ζ</a><a id="3459" class="Symbol">)</a>
<a id="3461" class="Keyword">open</a> <a id="3466" class="Keyword">import</a> <a id="3473" href="../Substitution/" class="Module">plfa.part2.Substitution</a> <a id="3497" class="Keyword">using</a> <a id="3503" class="Symbol">(</a><a id="3504" href="../Substitution/#3046" class="Function">ids</a><a id="3507" class="Symbol">;</a> <a id="3509" href="../Substitution/#16936" class="Function">sub-id</a><a id="3515" class="Symbol">)</a>
<a id="3517" class="Keyword">open</a> <a id="3522" class="Keyword">import</a> <a id="3529" href="../BigStep/" class="Module">plfa.part2.BigStep</a>
     <a id="3553" class="Keyword">using</a> <a id="3559" class="Symbol">(</a><a id="3560" href="../BigStep/#3125" class="Datatype">Clos</a><a id="3564" class="Symbol">;</a> <a id="3566" href="../BigStep/#3144" class="InductiveConstructor">clos</a><a id="3570" class="Symbol">;</a> <a id="3572" href="../BigStep/#3095" class="Function">ClosEnv</a><a id="3579" class="Symbol">;</a> <a id="3581" href="../BigStep/#3339" class="Function">∅'</a><a id="3583" class="Symbol">;</a> <a id="3585" href="../BigStep/#3361" class="Function Operator">_,'_</a><a id="3589" class="Symbol">;</a> <a id="3591" href="../BigStep/#3826" class="Datatype Operator">_⊢_⇓_</a><a id="3596" class="Symbol">;</a> <a id="3598" href="../BigStep/#3883" class="InductiveConstructor">⇓-var</a><a id="3603" class="Symbol">;</a> <a id="3605" href="../BigStep/#4030" class="InductiveConstructor">⇓-lam</a><a id="3610" class="Symbol">;</a> <a id="3612" href="../BigStep/#4105" class="InductiveConstructor">⇓-app</a><a id="3617" class="Symbol">;</a> <a id="3619" href="../BigStep/#5880" class="Function">⇓-determ</a><a id="3627" class="Symbol">;</a>
            <a id="3641" href="../BigStep/#16233" class="Function">cbn→reduce</a><a id="3651" class="Symbol">)</a>
<a id="3653" class="Keyword">open</a> <a id="3658" class="Keyword">import</a> <a id="3665" href="../Denotational/" class="Module">plfa.part3.Denotational</a>
     <a id="3694" class="Keyword">using</a> <a id="3700" class="Symbol">(</a><a id="3701" href="../Denotational/#4067" class="Datatype">Value</a><a id="3706" class="Symbol">;</a> <a id="3708" href="../Denotational/#7204" class="Function">Env</a><a id="3711" class="Symbol">;</a> <a id="3713" href="../Denotational/#7328" class="Function">`∅</a><a id="3715" class="Symbol">;</a> <a id="3717" href="../Denotational/#7361" class="Function Operator">_`,_</a><a id="3721" class="Symbol">;</a> <a id="3723" href="../Denotational/#4099" class="InductiveConstructor Operator">_↦_</a><a id="3726" class="Symbol">;</a> <a id="3728" href="../Denotational/#4424" class="Datatype Operator">_⊑_</a><a id="3731" class="Symbol">;</a> <a id="3733" href="../Denotational/#9262" class="Datatype Operator">_⊢_↓_</a><a id="3738" class="Symbol">;</a> <a id="3740" href="../Denotational/#4087" class="InductiveConstructor">⊥</a><a id="3741" class="Symbol">;</a> <a id="3743" href="../Denotational/#32192" class="Function">all-funs∈</a><a id="3752" class="Symbol">;</a> <a id="3754" href="../Denotational/#4129" class="InductiveConstructor Operator">_⊔_</a><a id="3757" class="Symbol">;</a> <a id="3759" href="../Denotational/#30485" class="Function">∈→⊑</a><a id="3762" class="Symbol">;</a>
            <a id="3776" href="../Denotational/#9316" class="InductiveConstructor">var</a><a id="3779" class="Symbol">;</a> <a id="3781" href="../Denotational/#9391" class="InductiveConstructor">↦-elim</a><a id="3787" class="Symbol">;</a> <a id="3789" href="../Denotational/#9513" class="InductiveConstructor">↦-intro</a><a id="3796" class="Symbol">;</a> <a id="3798" href="../Denotational/#9692" class="InductiveConstructor">⊔-intro</a><a id="3805" class="Symbol">;</a> <a id="3807" href="../Denotational/#9625" class="InductiveConstructor">⊥-intro</a><a id="3814" class="Symbol">;</a> <a id="3816" href="../Denotational/#9807" class="InductiveConstructor">sub</a><a id="3819" class="Symbol">;</a> <a id="3821" href="../Denotational/#17402" class="Function">ℰ</a><a id="3822" class="Symbol">;</a> <a id="3824" href="../Denotational/#17584" class="Function Operator">_≃_</a><a id="3827" class="Symbol">;</a> <a id="3829" href="../Denotational/#16923" class="Function Operator">_iff_</a><a id="3834" class="Symbol">;</a>
            <a id="3848" href="../Denotational/#4714" class="InductiveConstructor">⊑-trans</a><a id="3855" class="Symbol">;</a> <a id="3857" href="../Denotational/#4568" class="InductiveConstructor">⊑-conj-R1</a><a id="3866" class="Symbol">;</a> <a id="3868" href="../Denotational/#4641" class="InductiveConstructor">⊑-conj-R2</a><a id="3877" class="Symbol">;</a> <a id="3879" href="../Denotational/#4484" class="InductiveConstructor">⊑-conj-L</a><a id="3887" class="Symbol">;</a> <a id="3889" href="../Denotational/#5554" class="Function">⊑-refl</a><a id="3895" class="Symbol">;</a> <a id="3897" href="../Denotational/#4785" class="InductiveConstructor">⊑-fun</a><a id="3902" class="Symbol">;</a> <a id="3904" href="../Denotational/#4459" class="InductiveConstructor">⊑-bot</a><a id="3909" class="Symbol">;</a> <a id="3911" href="../Denotational/#4888" class="InductiveConstructor">⊑-dist</a><a id="3917" class="Symbol">;</a>
            <a id="3931" href="../Denotational/#43001" class="Function">sub-inv-fun</a><a id="3942" class="Symbol">)</a>
<a id="3944" class="Keyword">open</a> <a id="3949" class="Keyword">import</a> <a id="3956" href="../Soundness/" class="Module">plfa.part3.Soundness</a> <a id="3977" class="Keyword">using</a> <a id="3983" class="Symbol">(</a><a id="3984" href="../Soundness/#23359" class="Function">soundness</a><a id="3993" class="Symbol">)</a>

</pre>
<h2 id="the-property-of-being-greater-or-equal-to-a-function">The property of being greater or equal to a function</h2>
<p>We define the following short-hand for saying that a value is greater-than or equal to a function value.</p>
<pre class="Agda"><a id="above-fun"></a><a id="4169" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4179" class="Symbol">:</a> <a id="4181" href="../Denotational/#4067" class="Datatype">Value</a> <a id="4187" class="Symbol">→</a> <a id="4189" class="PrimitiveType">Set</a>
<a id="4193" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4203" href="../Adequacy/#4203" class="Bound">u</a> <a id="4205" class="Symbol">=</a> <a id="4207" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="4210" href="../Adequacy/#4210" class="Bound">v</a> <a id="4212" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="4214" href="../Denotational/#4067" class="Datatype">Value</a> <a id="4220" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="4222" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="4225" href="../Adequacy/#4225" class="Bound">w</a> <a id="4227" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="4229" href="../Denotational/#4067" class="Datatype">Value</a> <a id="4235" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="4237" href="../Adequacy/#4210" class="Bound">v</a> <a id="4239" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="4241" href="../Adequacy/#4225" class="Bound">w</a> <a id="4243" href="../Denotational/#4424" class="Datatype Operator">⊑</a> <a id="4245" href="../Adequacy/#4203" class="Bound">u</a>
</pre>
<p>If a value <code>u</code> is greater than a function, then an even greater value <code>u'</code> is too.</p>
<pre class="Agda"><a id="above-fun-⊑"></a><a id="4340" href="../Adequacy/#4340" class="Function">above-fun-⊑</a> <a id="4352" class="Symbol">:</a> <a id="4354" class="Symbol">∀{</a><a id="4356" href="../Adequacy/#4356" class="Bound">u</a> <a id="4358" href="../Adequacy/#4358" class="Bound">u'</a> <a id="4361" class="Symbol">:</a> <a id="4363" href="../Denotational/#4067" class="Datatype">Value</a><a id="4368" class="Symbol">}</a>
      <a id="4376" class="Symbol">→</a> <a id="4378" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4388" href="../Adequacy/#4356" class="Bound">u</a> <a id="4390" class="Symbol">→</a> <a id="4392" href="../Adequacy/#4356" class="Bound">u</a> <a id="4394" href="../Denotational/#4424" class="Datatype Operator">⊑</a> <a id="4396" href="../Adequacy/#4358" class="Bound">u'</a>
        <a id="4407" class="Comment">-------------------</a>
      <a id="4433" class="Symbol">→</a> <a id="4435" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4445" href="../Adequacy/#4358" class="Bound">u'</a>
<a id="4448" href="../Adequacy/#4340" class="Function">above-fun-⊑</a> <a id="4460" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4462" href="../Adequacy/#4462" class="Bound">v</a> <a id="4464" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4466" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4468" href="../Adequacy/#4468" class="Bound">w</a> <a id="4470" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4472" href="../Adequacy/#4472" class="Bound">lt'</a> <a id="4476" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4478" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4480" href="../Adequacy/#4480" class="Bound">lt</a> <a id="4483" class="Symbol">=</a> <a id="4485" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4487" href="../Adequacy/#4462" class="Bound">v</a> <a id="4489" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4491" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4493" href="../Adequacy/#4468" class="Bound">w</a> <a id="4495" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4497" href="../Denotational/#4714" class="InductiveConstructor">⊑-trans</a> <a id="4505" href="../Adequacy/#4472" class="Bound">lt'</a> <a id="4509" href="../Adequacy/#4480" class="Bound">lt</a> <a id="4512" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4514" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<p>The bottom value <code>⊥</code> is not greater than a function.</p>
<pre class="Agda"><a id="above-fun⊥"></a><a id="4579" href="../Adequacy/#4579" class="Function">above-fun⊥</a> <a id="4590" class="Symbol">:</a> <a id="4592" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="4594" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4604" href="../Denotational/#4087" class="InductiveConstructor">⊥</a>
<a id="4606" href="../Adequacy/#4579" class="Function">above-fun⊥</a> <a id="4617" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4619" href="../Adequacy/#4619" class="Bound">v</a> <a id="4621" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4623" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4625" href="../Adequacy/#4625" class="Bound">w</a> <a id="4627" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4629" href="../Adequacy/#4629" class="Bound">lt</a> <a id="4632" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4634" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="4640" class="Keyword">with</a> <a id="4645" href="../Denotational/#43001" class="Function">sub-inv-fun</a> <a id="4657" href="../Adequacy/#4629" class="Bound">lt</a>
<a id="4660" class="Symbol">...</a> <a id="4664" class="Symbol">|</a> <a id="4666" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4668" href="../Adequacy/#4668" class="Bound">Γ</a> <a id="4670" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4672" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4674" href="../Adequacy/#4674" class="Bound">f</a> <a id="4676" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4678" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4680" href="../Adequacy/#4680" class="Bound">Γ⊆⊥</a> <a id="4684" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4686" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4688" href="../Adequacy/#4688" class="Bound">lt1</a> <a id="4692" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4694" href="../Adequacy/#4694" class="Bound">lt2</a> <a id="4698" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4700" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4702" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4704" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="4710" class="Keyword">with</a> <a id="4715" href="../Denotational/#32192" class="Function">all-funs∈</a> <a id="4725" href="../Adequacy/#4674" class="Bound">f</a>
<a id="4727" class="Symbol">...</a> <a id="4731" class="Symbol">|</a> <a id="4733" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4735" href="../Adequacy/#4735" class="Bound">A</a> <a id="4737" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4739" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="4741" href="../Adequacy/#4741" class="Bound">B</a> <a id="4743" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="4745" href="../Adequacy/#4745" class="Bound">m</a> <a id="4747" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="4749" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="4755" class="Keyword">with</a> <a id="4760" class="Bound">Γ⊆⊥</a> <a id="4764" href="../Adequacy/#4745" class="Bound">m</a>
<a id="4766" class="Symbol">...</a> <a id="4770" class="Symbol">|</a> <a id="4772" class="Symbol">()</a>
</pre>
<p>If the join of two values <code>u</code> and <code>u'</code> is greater than a function, then at least one of them is too.</p>
<pre class="Agda"><a id="above-fun-⊔"></a><a id="4886" href="../Adequacy/#4886" class="Function">above-fun-⊔</a> <a id="4898" class="Symbol">:</a> <a id="4900" class="Symbol">∀{</a><a id="4902" href="../Adequacy/#4902" class="Bound">u</a> <a id="4904" href="../Adequacy/#4904" class="Bound">u'</a><a id="4906" class="Symbol">}</a>
           <a id="4919" class="Symbol">→</a> <a id="4921" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4931" class="Symbol">(</a><a id="4932" href="../Adequacy/#4902" class="Bound">u</a> <a id="4934" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="4936" href="../Adequacy/#4904" class="Bound">u'</a><a id="4938" class="Symbol">)</a>
           <a id="4951" class="Symbol">→</a> <a id="4953" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4963" href="../Adequacy/#4902" class="Bound">u</a> <a id="4965" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="4967" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="4977" href="../Adequacy/#4904" class="Bound">u'</a>
<a id="4980" href="../Adequacy/#4886" class="Function">above-fun-⊔</a><a id="4991" class="Symbol">{</a><a id="4992" href="../Adequacy/#4992" class="Bound">u</a><a id="4993" class="Symbol">}{</a><a id="4995" href="../Adequacy/#4995" class="Bound">u'</a><a id="4997" class="Symbol">}</a> <a id="4999" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5001" href="../Adequacy/#5001" class="Bound">v</a> <a id="5003" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5005" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5007" href="../Adequacy/#5007" class="Bound">w</a> <a id="5009" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5011" href="../Adequacy/#5011" class="Bound">v↦w⊑u⊔u'</a> <a id="5020" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5022" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="5028" class="Keyword">with</a> <a id="5033" href="../Denotational/#43001" class="Function">sub-inv-fun</a> <a id="5045" href="../Adequacy/#5011" class="Bound">v↦w⊑u⊔u'</a>
<a id="5054" class="Symbol">...</a> <a id="5058" class="Symbol">|</a> <a id="5060" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5062" href="../Adequacy/#5062" class="Bound">Γ</a> <a id="5064" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5066" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5068" href="../Adequacy/#5068" class="Bound">f</a> <a id="5070" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5072" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5074" href="../Adequacy/#5074" class="Bound">Γ⊆u⊔u'</a> <a id="5081" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5083" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5085" href="../Adequacy/#5085" class="Bound">lt1</a> <a id="5089" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5091" href="../Adequacy/#5091" class="Bound">lt2</a> <a id="5095" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5097" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5099" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5101" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="5107" class="Keyword">with</a> <a id="5112" href="../Denotational/#32192" class="Function">all-funs∈</a> <a id="5122" href="../Adequacy/#5068" class="Bound">f</a>
<a id="5124" class="Symbol">...</a> <a id="5128" class="Symbol">|</a> <a id="5130" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5132" href="../Adequacy/#5132" class="Bound">A</a> <a id="5134" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5136" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5138" href="../Adequacy/#5138" class="Bound">B</a> <a id="5140" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5142" href="../Adequacy/#5142" class="Bound">m</a> <a id="5144" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5146" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="5152" class="Keyword">with</a> <a id="5157" class="Bound">Γ⊆u⊔u'</a> <a id="5164" href="../Adequacy/#5142" class="Bound">m</a>
<a id="5166" class="Symbol">...</a> <a id="5170" class="Symbol">|</a> <a id="5172" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="5177" href="../Adequacy/#5177" class="Bound">x</a> <a id="5179" class="Symbol">=</a> <a id="5181" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="5186" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5188" class="Bound">A</a> <a id="5190" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5192" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5194" class="Bound">B</a> <a id="5196" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5198" class="Symbol">(</a><a id="5199" href="../Denotational/#30485" class="Function">∈→⊑</a> <a id="5203" href="../Adequacy/#5177" class="Bound">x</a><a id="5204" class="Symbol">)</a> <a id="5206" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5208" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="5210" class="Symbol">...</a> <a id="5214" class="Symbol">|</a> <a id="5216" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="5221" href="../Adequacy/#5221" class="Bound">x</a> <a id="5223" class="Symbol">=</a> <a id="5225" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="5230" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5232" class="Bound">A</a> <a id="5234" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5236" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5238" class="Bound">B</a> <a id="5240" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5242" class="Symbol">(</a><a id="5243" href="../Denotational/#30485" class="Function">∈→⊑</a> <a id="5247" href="../Adequacy/#5221" class="Bound">x</a><a id="5248" class="Symbol">)</a> <a id="5250" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="5252" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<p>On the other hand, if neither of <code>u</code> and <code>u'</code> is greater than a function, then their join is also not greater than a function.</p>
<pre class="Agda"><a id="not-above-fun-⊔"></a><a id="5391" href="../Adequacy/#5391" class="Function">not-above-fun-⊔</a> <a id="5407" class="Symbol">:</a> <a id="5409" class="Symbol">∀{</a><a id="5411" href="../Adequacy/#5411" class="Bound">u</a> <a id="5413" href="../Adequacy/#5413" class="Bound">u'</a> <a id="5416" class="Symbol">:</a> <a id="5418" href="../Denotational/#4067" class="Datatype">Value</a><a id="5423" class="Symbol">}</a>
               <a id="5440" class="Symbol">→</a> <a id="5442" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5444" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5454" href="../Adequacy/#5411" class="Bound">u</a> <a id="5456" class="Symbol">→</a> <a id="5458" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5460" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5470" href="../Adequacy/#5413" class="Bound">u'</a>
               <a id="5488" class="Symbol">→</a> <a id="5490" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5492" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5502" class="Symbol">(</a><a id="5503" href="../Adequacy/#5411" class="Bound">u</a> <a id="5505" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="5507" href="../Adequacy/#5413" class="Bound">u'</a><a id="5509" class="Symbol">)</a>
<a id="5511" href="../Adequacy/#5391" class="Function">not-above-fun-⊔</a> <a id="5527" href="../Adequacy/#5527" class="Bound">naf1</a> <a id="5532" href="../Adequacy/#5532" class="Bound">naf2</a> <a id="5537" href="../Adequacy/#5537" class="Bound">af12</a>
    <a id="5546" class="Keyword">with</a> <a id="5551" href="../Adequacy/#4886" class="Function">above-fun-⊔</a> <a id="5563" href="../Adequacy/#5537" class="Bound">af12</a>
<a id="5568" class="Symbol">...</a> <a id="5572" class="Symbol">|</a> <a id="5574" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="5579" href="../Adequacy/#5579" class="Bound">af1</a> <a id="5583" class="Symbol">=</a> <a id="5585" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="5599" href="../Adequacy/#5579" class="Bound">af1</a> <a id="5603" class="Bound">naf1</a>
<a id="5608" class="Symbol">...</a> <a id="5612" class="Symbol">|</a> <a id="5614" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="5619" href="../Adequacy/#5619" class="Bound">af2</a> <a id="5623" class="Symbol">=</a> <a id="5625" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="5639" href="../Adequacy/#5619" class="Bound">af2</a> <a id="5643" class="Bound">naf2</a>
</pre>
<p>The converse is also true. If the join of two values is not above a function, then neither of them is individually.</p>
<pre class="Agda"><a id="not-above-fun-⊔-inv"></a><a id="5774" href="../Adequacy/#5774" class="Function">not-above-fun-⊔-inv</a> <a id="5794" class="Symbol">:</a> <a id="5796" class="Symbol">∀{</a><a id="5798" href="../Adequacy/#5798" class="Bound">u</a> <a id="5800" href="../Adequacy/#5800" class="Bound">u'</a> <a id="5803" class="Symbol">:</a> <a id="5805" href="../Denotational/#4067" class="Datatype">Value</a><a id="5810" class="Symbol">}</a> <a id="5812" class="Symbol">→</a> <a id="5814" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5816" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5826" class="Symbol">(</a><a id="5827" href="../Adequacy/#5798" class="Bound">u</a> <a id="5829" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="5831" href="../Adequacy/#5800" class="Bound">u'</a><a id="5833" class="Symbol">)</a>
              <a id="5849" class="Symbol">→</a> <a id="5851" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5853" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5863" href="../Adequacy/#5798" class="Bound">u</a> <a id="5865" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="5867" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5869" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5879" href="../Adequacy/#5800" class="Bound">u'</a>
<a id="5882" href="../Adequacy/#5774" class="Function">not-above-fun-⊔-inv</a> <a id="5902" href="../Adequacy/#5902" class="Bound">af</a> <a id="5905" class="Symbol">=</a> <a id="5907" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="5909" href="../Adequacy/#5935" class="Function">f</a> <a id="5911" href="../Adequacy/#5902" class="Bound">af</a> <a id="5914" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="5916" href="../Adequacy/#6093" class="Function">g</a> <a id="5918" href="../Adequacy/#5902" class="Bound">af</a> <a id="5921" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
  <a id="5925" class="Keyword">where</a>
    <a id="5935" href="../Adequacy/#5935" class="Function">f</a> <a id="5937" class="Symbol">:</a> <a id="5939" class="Symbol">∀{</a><a id="5941" href="../Adequacy/#5941" class="Bound">u</a> <a id="5943" href="../Adequacy/#5943" class="Bound">u'</a> <a id="5946" class="Symbol">:</a> <a id="5948" href="../Denotational/#4067" class="Datatype">Value</a><a id="5953" class="Symbol">}</a> <a id="5955" class="Symbol">→</a> <a id="5957" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5959" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5969" class="Symbol">(</a><a id="5970" href="../Adequacy/#5941" class="Bound">u</a> <a id="5972" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="5974" href="../Adequacy/#5943" class="Bound">u'</a><a id="5976" class="Symbol">)</a> <a id="5978" class="Symbol">→</a> <a id="5980" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="5982" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="5992" href="../Adequacy/#5941" class="Bound">u</a>
    <a id="5998" href="../Adequacy/#5935" class="Function">f</a><a id="5999" class="Symbol">{</a><a id="6000" href="../Adequacy/#6000" class="Bound">u</a><a id="6001" class="Symbol">}{</a><a id="6003" href="../Adequacy/#6003" class="Bound">u'</a><a id="6005" class="Symbol">}</a> <a id="6007" href="../Adequacy/#6007" class="Bound">af12</a> <a id="6012" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6014" href="../Adequacy/#6014" class="Bound">v</a> <a id="6016" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6018" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6020" href="../Adequacy/#6020" class="Bound">w</a> <a id="6022" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6024" href="../Adequacy/#6024" class="Bound">lt</a> <a id="6027" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6029" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6031" class="Symbol">=</a>
        <a id="6041" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="6055" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6057" href="../Adequacy/#6014" class="Bound">v</a> <a id="6059" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6061" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6063" href="../Adequacy/#6020" class="Bound">w</a> <a id="6065" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6067" href="../Denotational/#4568" class="InductiveConstructor">⊑-conj-R1</a> <a id="6077" href="../Adequacy/#6024" class="Bound">lt</a> <a id="6080" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6082" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6084" href="../Adequacy/#6007" class="Bound">af12</a>
    <a id="6093" href="../Adequacy/#6093" class="Function">g</a> <a id="6095" class="Symbol">:</a> <a id="6097" class="Symbol">∀{</a><a id="6099" href="../Adequacy/#6099" class="Bound">u</a> <a id="6101" href="../Adequacy/#6101" class="Bound">u'</a> <a id="6104" class="Symbol">:</a> <a id="6106" href="../Denotational/#4067" class="Datatype">Value</a><a id="6111" class="Symbol">}</a> <a id="6113" class="Symbol">→</a> <a id="6115" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="6117" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="6127" class="Symbol">(</a><a id="6128" href="../Adequacy/#6099" class="Bound">u</a> <a id="6130" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="6132" href="../Adequacy/#6101" class="Bound">u'</a><a id="6134" class="Symbol">)</a> <a id="6136" class="Symbol">→</a> <a id="6138" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="6140" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="6150" href="../Adequacy/#6101" class="Bound">u'</a>
    <a id="6157" href="../Adequacy/#6093" class="Function">g</a><a id="6158" class="Symbol">{</a><a id="6159" href="../Adequacy/#6159" class="Bound">u</a><a id="6160" class="Symbol">}{</a><a id="6162" href="../Adequacy/#6162" class="Bound">u'</a><a id="6164" class="Symbol">}</a> <a id="6166" href="../Adequacy/#6166" class="Bound">af12</a> <a id="6171" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6173" href="../Adequacy/#6173" class="Bound">v</a> <a id="6175" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6177" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6179" href="../Adequacy/#6179" class="Bound">w</a> <a id="6181" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6183" href="../Adequacy/#6183" class="Bound">lt</a> <a id="6186" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6188" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6190" class="Symbol">=</a>
        <a id="6200" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="6214" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6216" href="../Adequacy/#6173" class="Bound">v</a> <a id="6218" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6220" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6222" href="../Adequacy/#6179" class="Bound">w</a> <a id="6224" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6226" href="../Denotational/#4641" class="InductiveConstructor">⊑-conj-R2</a> <a id="6236" href="../Adequacy/#6183" class="Bound">lt</a> <a id="6239" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6241" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6243" href="../Adequacy/#6166" class="Bound">af12</a>
</pre>
<p>The property of being greater than a function value is decidable, as exhibited by the following function.</p>
<pre class="Agda"><a id="above-fun?"></a><a id="6364" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="6375" class="Symbol">:</a> <a id="6377" class="Symbol">(</a><a id="6378" href="../Adequacy/#6378" class="Bound">v</a> <a id="6380" class="Symbol">:</a> <a id="6382" href="../Denotational/#4067" class="Datatype">Value</a><a id="6387" class="Symbol">)</a> <a id="6389" class="Symbol">→</a> <a id="6391" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a> <a id="6395" class="Symbol">(</a><a id="6396" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="6406" href="../Adequacy/#6378" class="Bound">v</a><a id="6407" class="Symbol">)</a>
<a id="6409" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="6420" href="../Denotational/#4087" class="InductiveConstructor">⊥</a> <a id="6422" class="Symbol">=</a> <a id="6424" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="6427" href="../Adequacy/#4579" class="Function">above-fun⊥</a>
<a id="6438" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="6449" class="Symbol">(</a><a id="6450" href="../Adequacy/#6450" class="Bound">v</a> <a id="6452" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="6454" href="../Adequacy/#6454" class="Bound">w</a><a id="6455" class="Symbol">)</a> <a id="6457" class="Symbol">=</a> <a id="6459" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="6463" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6465" href="../Adequacy/#6450" class="Bound">v</a> <a id="6467" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6469" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6471" href="../Adequacy/#6454" class="Bound">w</a> <a id="6473" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6475" href="../Denotational/#5554" class="Function">⊑-refl</a> <a id="6482" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6484" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="6486" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="6497" class="Symbol">(</a><a id="6498" href="../Adequacy/#6498" class="Bound">u</a> <a id="6500" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="6502" href="../Adequacy/#6502" class="Bound">u'</a><a id="6504" class="Symbol">)</a>
    <a id="6510" class="Keyword">with</a> <a id="6515" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="6526" href="../Adequacy/#6498" class="Bound">u</a> <a id="6528" class="Symbol">|</a> <a id="6530" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="6541" href="../Adequacy/#6502" class="Bound">u'</a>
<a id="6544" class="Symbol">...</a> <a id="6548" class="Symbol">|</a> <a id="6550" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="6554" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6556" href="../Adequacy/#6556" class="Bound">v</a> <a id="6558" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6560" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6562" href="../Adequacy/#6562" class="Bound">w</a> <a id="6564" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6566" href="../Adequacy/#6566" class="Bound">lt</a> <a id="6569" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6571" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6573" class="Symbol">|</a> <a id="6575" class="Symbol">_</a> <a id="6577" class="Symbol">=</a> <a id="6579" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="6583" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6585" href="../Adequacy/#6556" class="Bound">v</a> <a id="6587" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6589" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6591" href="../Adequacy/#6562" class="Bound">w</a> <a id="6593" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6595" class="Symbol">(</a><a id="6596" href="../Denotational/#4568" class="InductiveConstructor">⊑-conj-R1</a> <a id="6606" href="../Adequacy/#6566" class="Bound">lt</a><a id="6608" class="Symbol">)</a> <a id="6610" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6612" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="6614" class="Symbol">...</a> <a id="6618" class="Symbol">|</a> <a id="6620" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="6623" class="Symbol">_</a> <a id="6625" class="Symbol">|</a> <a id="6627" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="6631" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6633" href="../Adequacy/#6633" class="Bound">v</a> <a id="6635" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6637" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6639" href="../Adequacy/#6639" class="Bound">w</a> <a id="6641" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6643" href="../Adequacy/#6643" class="Bound">lt</a> <a id="6646" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6648" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6650" class="Symbol">=</a> <a id="6652" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="6656" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6658" href="../Adequacy/#6633" class="Bound">v</a> <a id="6660" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6662" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="6664" href="../Adequacy/#6639" class="Bound">w</a> <a id="6666" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="6668" class="Symbol">(</a><a id="6669" href="../Denotational/#4641" class="InductiveConstructor">⊑-conj-R2</a> <a id="6679" href="../Adequacy/#6643" class="Bound">lt</a><a id="6681" class="Symbol">)</a> <a id="6683" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="6685" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="6687" class="Symbol">...</a> <a id="6691" class="Symbol">|</a> <a id="6693" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="6696" href="../Adequacy/#6696" class="Bound">x</a> <a id="6698" class="Symbol">|</a> <a id="6700" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="6703" href="../Adequacy/#6703" class="Bound">y</a> <a id="6705" class="Symbol">=</a> <a id="6707" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="6710" class="Symbol">(</a><a id="6711" href="../Adequacy/#5391" class="Function">not-above-fun-⊔</a> <a id="6727" href="../Adequacy/#6696" class="Bound">x</a> <a id="6729" href="../Adequacy/#6703" class="Bound">y</a><a id="6730" class="Symbol">)</a>
</pre>
<h2 id="relating-values-to-closures">Relating values to closures</h2>
<p>Next we relate semantic values to closures. The relation <code>𝕍</code> is for closures whose term is a lambda abstraction, i.e., in weak-head normal form (WHNF). The relation 𝔼 is for any closure. Roughly speaking, <code>𝔼 v c</code> will hold if, when <code>v</code> is greater than a function value, <code>c</code> evaluates to a closure <code>c'</code> in WHNF and <code>𝕍 v c'</code>. Regarding <code>𝕍 v c</code>, it will hold when <code>c</code> is in WHNF, and if <code>v</code> is a function, the body of <code>c</code> evaluates according to <code>v</code>.</p>
<pre class="Agda"><a id="𝕍"></a><a id="7223" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7225" class="Symbol">:</a> <a id="7227" href="../Denotational/#4067" class="Datatype">Value</a> <a id="7233" class="Symbol">→</a> <a id="7235" href="../BigStep/#3125" class="Datatype">Clos</a> <a id="7240" class="Symbol">→</a> <a id="7242" class="PrimitiveType">Set</a>
<a id="𝔼"></a><a id="7246" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="7248" class="Symbol">:</a> <a id="7250" href="../Denotational/#4067" class="Datatype">Value</a> <a id="7256" class="Symbol">→</a> <a id="7258" href="../BigStep/#3125" class="Datatype">Clos</a> <a id="7263" class="Symbol">→</a> <a id="7265" class="PrimitiveType">Set</a>
</pre>
<p>We define <code>𝕍</code> as a function from values and closures to <code>Set</code> and not as a data type because it is mutually recursive with <code>𝔼</code> in a negative position (to the left of an implication). We first perform case analysis on the term in the closure. If the term is a variable or application, then <code>𝕍</code> is false (<code>Bot</code>). If the term is a lambda abstraction, we define <code>𝕍</code> by recursion on the value, which we describe below.</p>
<pre class="Agda"><a id="7694" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7696" href="../Adequacy/#7696" class="Bound">v</a> <a id="7698" class="Symbol">(</a><a id="7699" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7704" class="Symbol">(</a><a id="7705" href="../Untyped/#4312" class="InductiveConstructor Operator">`</a> <a id="7707" href="../Adequacy/#7707" class="Bound">x₁</a><a id="7709" class="Symbol">)</a> <a id="7711" href="../Adequacy/#7711" class="Bound">γ</a><a id="7712" class="Symbol">)</a> <a id="7714" class="Symbol">=</a> <a id="7716" href="../Adequacy/#3151" class="Datatype">Bot</a>
<a id="7720" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7722" href="../Adequacy/#7722" class="Bound">v</a> <a id="7724" class="Symbol">(</a><a id="7725" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7730" class="Symbol">(</a><a id="7731" href="../Adequacy/#7731" class="Bound">M</a> <a id="7733" href="../Untyped/#4424" class="InductiveConstructor Operator">·</a> <a id="7735" href="../Adequacy/#7735" class="Bound">M₁</a><a id="7737" class="Symbol">)</a> <a id="7739" href="../Adequacy/#7739" class="Bound">γ</a><a id="7740" class="Symbol">)</a> <a id="7742" class="Symbol">=</a> <a id="7744" href="../Adequacy/#3151" class="Datatype">Bot</a>
<a id="7748" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7750" href="../Denotational/#4087" class="InductiveConstructor">⊥</a> <a id="7752" class="Symbol">(</a><a id="7753" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7758" class="Symbol">(</a><a id="7759" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="7761" href="../Adequacy/#7761" class="Bound">M</a><a id="7762" class="Symbol">)</a> <a id="7764" href="../Adequacy/#7764" class="Bound">γ</a><a id="7765" class="Symbol">)</a> <a id="7767" class="Symbol">=</a> <a id="7769" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a id="7771" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7773" class="Symbol">(</a><a id="7774" href="../Adequacy/#7774" class="Bound">v</a> <a id="7776" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="7778" href="../Adequacy/#7778" class="Bound">w</a><a id="7779" class="Symbol">)</a> <a id="7781" class="Symbol">(</a><a id="7782" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7787" class="Symbol">(</a><a id="7788" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="7790" href="../Adequacy/#7790" class="Bound">N</a><a id="7791" class="Symbol">)</a> <a id="7793" href="../Adequacy/#7793" class="Bound">γ</a><a id="7794" class="Symbol">)</a> <a id="7796" class="Symbol">=</a>
    <a id="7802" class="Symbol">(∀{</a><a id="7805" href="../Adequacy/#7805" class="Bound">c</a> <a id="7807" class="Symbol">:</a> <a id="7809" href="../BigStep/#3125" class="Datatype">Clos</a><a id="7813" class="Symbol">}</a> <a id="7815" class="Symbol">→</a> <a id="7817" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="7819" href="../Adequacy/#7774" class="Bound">v</a> <a id="7821" href="../Adequacy/#7805" class="Bound">c</a> <a id="7823" class="Symbol">→</a> <a id="7825" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="7835" href="../Adequacy/#7778" class="Bound">w</a> <a id="7837" class="Symbol">→</a> <a id="7839" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="7842" href="../Adequacy/#7842" class="Bound">c'</a> <a id="7845" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="7847" href="../BigStep/#3125" class="Datatype">Clos</a> <a id="7852" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a>
        <a id="7862" class="Symbol">(</a><a id="7863" href="../Adequacy/#7793" class="Bound">γ</a> <a id="7865" href="../BigStep/#3361" class="Function Operator">,'</a> <a id="7868" href="../Adequacy/#7805" class="Bound">c</a><a id="7869" class="Symbol">)</a> <a id="7871" href="../BigStep/#3826" class="Datatype Operator">⊢</a> <a id="7873" href="../Adequacy/#7790" class="Bound">N</a> <a id="7875" href="../BigStep/#3826" class="Datatype Operator">⇓</a> <a id="7877" href="../Adequacy/#7842" class="Bound">c'</a>  <a id="7881" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a>  <a id="7884" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7886" href="../Adequacy/#7778" class="Bound">w</a> <a id="7888" href="../Adequacy/#7842" class="Bound">c'</a><a id="7890" class="Symbol">)</a>
<a id="7892" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7894" class="Symbol">(</a><a id="7895" href="../Adequacy/#7895" class="Bound">u</a> <a id="7897" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="7899" href="../Adequacy/#7899" class="Bound">v</a><a id="7900" class="Symbol">)</a> <a id="7902" class="Symbol">(</a><a id="7903" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7908" class="Symbol">(</a><a id="7909" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="7911" href="../Adequacy/#7911" class="Bound">N</a><a id="7912" class="Symbol">)</a> <a id="7914" href="../Adequacy/#7914" class="Bound">γ</a><a id="7915" class="Symbol">)</a> <a id="7917" class="Symbol">=</a> <a id="7919" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7921" href="../Adequacy/#7895" class="Bound">u</a> <a id="7923" class="Symbol">(</a><a id="7924" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7929" class="Symbol">(</a><a id="7930" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="7932" href="../Adequacy/#7911" class="Bound">N</a><a id="7933" class="Symbol">)</a> <a id="7935" href="../Adequacy/#7914" class="Bound">γ</a><a id="7936" class="Symbol">)</a> <a id="7938" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="7940" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="7942" href="../Adequacy/#7899" class="Bound">v</a> <a id="7944" class="Symbol">(</a><a id="7945" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="7950" class="Symbol">(</a><a id="7951" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="7953" href="../Adequacy/#7911" class="Bound">N</a><a id="7954" class="Symbol">)</a> <a id="7956" href="../Adequacy/#7914" class="Bound">γ</a><a id="7957" class="Symbol">)</a>
</pre>
<ul>
<li><p>If the value is <code>⊥</code>, then the result is true (<code>⊤</code>).</p></li>
<li><p>If the value is a join (u ⊔ v), then the result is the pair (conjunction) of 𝕍 is true for both u and v.</p></li>
<li><p>The important case is for a function value <code>v ↦ w</code> and closure <code>clos (ƛ N) γ</code>. Given any closure <code>c</code> such that <code>𝔼 v c</code>, if <code>w</code> is greater than a function, then <code>N</code> evaluates (with <code>γ</code> extended with <code>c</code>) to some closure <code>c'</code> and we have <code>𝕍 w c'</code>.</p></li>
</ul>
<p>The definition of <code>𝔼</code> is straightforward. If <code>v</code> is a greater than a function, then <code>M</code> evaluates to a closure related to <code>v</code>.</p>
<pre class="Agda"><a id="8517" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="8519" href="../Adequacy/#8519" class="Bound">v</a> <a id="8521" class="Symbol">(</a><a id="8522" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="8527" href="../Adequacy/#8527" class="Bound">M</a> <a id="8529" href="../Adequacy/#8529" class="Bound">γ'</a><a id="8531" class="Symbol">)</a> <a id="8533" class="Symbol">=</a> <a id="8535" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="8545" href="../Adequacy/#8519" class="Bound">v</a> <a id="8547" class="Symbol">→</a> <a id="8549" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="8552" href="../Adequacy/#8552" class="Bound">c</a> <a id="8554" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="8556" href="../BigStep/#3125" class="Datatype">Clos</a> <a id="8561" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="8563" href="../Adequacy/#8529" class="Bound">γ'</a> <a id="8566" href="../BigStep/#3826" class="Datatype Operator">⊢</a> <a id="8568" href="../Adequacy/#8527" class="Bound">M</a> <a id="8570" href="../BigStep/#3826" class="Datatype Operator">⇓</a> <a id="8572" href="../Adequacy/#8552" class="Bound">c</a> <a id="8574" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="8576" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="8578" href="../Adequacy/#8519" class="Bound">v</a> <a id="8580" href="../Adequacy/#8552" class="Bound">c</a>
</pre>
<p>The proof of the main lemma is by induction on <code>γ ⊢ M ↓ v</code>, so it goes underneath lambda abstractions and must therefore reason about open terms (terms with variables). So we must relate environments of semantic values to environments of closures. In the following, <code>𝔾</code> relates <code>γ</code> to <code>γ'</code> if the corresponding values and closures are related by <code>𝔼</code>.</p>
<pre class="Agda"><a id="𝔾"></a><a id="8944" href="../Adequacy/#8944" class="Function">𝔾</a> <a id="8946" class="Symbol">:</a> <a id="8948" class="Symbol">∀{</a><a id="8950" href="../Adequacy/#8950" class="Bound">Γ</a><a id="8951" class="Symbol">}</a> <a id="8953" class="Symbol">→</a> <a id="8955" href="../Denotational/#7204" class="Function">Env</a> <a id="8959" href="../Adequacy/#8950" class="Bound">Γ</a> <a id="8961" class="Symbol">→</a> <a id="8963" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="8971" href="../Adequacy/#8950" class="Bound">Γ</a> <a id="8973" class="Symbol">→</a> <a id="8975" class="PrimitiveType">Set</a>
<a id="8979" href="../Adequacy/#8944" class="Function">𝔾</a> <a id="8981" class="Symbol">{</a><a id="8982" href="../Adequacy/#8982" class="Bound">Γ</a><a id="8983" class="Symbol">}</a> <a id="8985" href="../Adequacy/#8985" class="Bound">γ</a> <a id="8987" href="../Adequacy/#8987" class="Bound">γ'</a> <a id="8990" class="Symbol">=</a> <a id="8992" class="Symbol">∀{</a><a id="8994" href="../Adequacy/#8994" class="Bound">x</a> <a id="8996" class="Symbol">:</a> <a id="8998" href="../Adequacy/#8982" class="Bound">Γ</a> <a id="9000" href="../Untyped/#3503" class="Datatype Operator">∋</a> <a id="9002" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="9003" class="Symbol">}</a> <a id="9005" class="Symbol">→</a> <a id="9007" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="9009" class="Symbol">(</a><a id="9010" href="../Adequacy/#8985" class="Bound">γ</a> <a id="9012" href="../Adequacy/#8994" class="Bound">x</a><a id="9013" class="Symbol">)</a> <a id="9015" class="Symbol">(</a><a id="9016" href="../Adequacy/#8987" class="Bound">γ'</a> <a id="9019" href="../Adequacy/#8994" class="Bound">x</a><a id="9020" class="Symbol">)</a>

<a id="𝔾-∅"></a><a id="9023" href="../Adequacy/#9023" class="Function">𝔾-∅</a> <a id="9027" class="Symbol">:</a> <a id="9029" href="../Adequacy/#8944" class="Function">𝔾</a> <a id="9031" href="../Denotational/#7328" class="Function">`∅</a> <a id="9034" href="../BigStep/#3339" class="Function">∅'</a>
<a id="9037" href="../Adequacy/#9023" class="Function">𝔾-∅</a> <a id="9041" class="Symbol">{()}</a>

<a id="𝔾-ext"></a><a id="9047" href="../Adequacy/#9047" class="Function">𝔾-ext</a> <a id="9053" class="Symbol">:</a> <a id="9055" class="Symbol">∀{</a><a id="9057" href="../Adequacy/#9057" class="Bound">Γ</a><a id="9058" class="Symbol">}{</a><a id="9060" href="../Adequacy/#9060" class="Bound">γ</a> <a id="9062" class="Symbol">:</a> <a id="9064" href="../Denotational/#7204" class="Function">Env</a> <a id="9068" href="../Adequacy/#9057" class="Bound">Γ</a><a id="9069" class="Symbol">}{</a><a id="9071" href="../Adequacy/#9071" class="Bound">γ'</a> <a id="9074" class="Symbol">:</a> <a id="9076" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="9084" href="../Adequacy/#9057" class="Bound">Γ</a><a id="9085" class="Symbol">}{</a><a id="9087" href="../Adequacy/#9087" class="Bound">v</a> <a id="9089" href="../Adequacy/#9089" class="Bound">c</a><a id="9090" class="Symbol">}</a>
      <a id="9098" class="Symbol">→</a> <a id="9100" href="../Adequacy/#8944" class="Function">𝔾</a> <a id="9102" href="../Adequacy/#9060" class="Bound">γ</a> <a id="9104" href="../Adequacy/#9071" class="Bound">γ'</a> <a id="9107" class="Symbol">→</a> <a id="9109" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="9111" href="../Adequacy/#9087" class="Bound">v</a> <a id="9113" href="../Adequacy/#9089" class="Bound">c</a> <a id="9115" class="Symbol">→</a> <a id="9117" href="../Adequacy/#8944" class="Function">𝔾</a> <a id="9119" class="Symbol">(</a><a id="9120" href="../Adequacy/#9060" class="Bound">γ</a> <a id="9122" href="../Denotational/#7361" class="Function Operator">`,</a> <a id="9125" href="../Adequacy/#9087" class="Bound">v</a><a id="9126" class="Symbol">)</a> <a id="9128" class="Symbol">(</a><a id="9129" href="../Adequacy/#9071" class="Bound">γ'</a> <a id="9132" href="../BigStep/#3361" class="Function Operator">,'</a> <a id="9135" href="../Adequacy/#9089" class="Bound">c</a><a id="9136" class="Symbol">)</a>
<a id="9138" href="../Adequacy/#9047" class="Function">𝔾-ext</a> <a id="9144" class="Symbol">{</a><a id="9145" href="../Adequacy/#9145" class="Bound">Γ</a><a id="9146" class="Symbol">}</a> <a id="9148" class="Symbol">{</a><a id="9149" href="../Adequacy/#9149" class="Bound">γ</a><a id="9150" class="Symbol">}</a> <a id="9152" class="Symbol">{</a><a id="9153" href="../Adequacy/#9153" class="Bound">γ'</a><a id="9155" class="Symbol">}</a> <a id="9157" href="../Adequacy/#9157" class="Bound">g</a> <a id="9159" href="../Adequacy/#9159" class="Bound">e</a> <a id="9161" class="Symbol">{</a><a id="9162" href="../Untyped/#3539" class="InductiveConstructor">Z</a><a id="9163" class="Symbol">}</a> <a id="9165" class="Symbol">=</a> <a id="9167" href="../Adequacy/#9159" class="Bound">e</a>
<a id="9169" href="../Adequacy/#9047" class="Function">𝔾-ext</a> <a id="9175" class="Symbol">{</a><a id="9176" href="../Adequacy/#9176" class="Bound">Γ</a><a id="9177" class="Symbol">}</a> <a id="9179" class="Symbol">{</a><a id="9180" href="../Adequacy/#9180" class="Bound">γ</a><a id="9181" class="Symbol">}</a> <a id="9183" class="Symbol">{</a><a id="9184" href="../Adequacy/#9184" class="Bound">γ'</a><a id="9186" class="Symbol">}</a> <a id="9188" href="../Adequacy/#9188" class="Bound">g</a> <a id="9190" href="../Adequacy/#9190" class="Bound">e</a> <a id="9192" class="Symbol">{</a><a id="9193" href="../Untyped/#3584" class="InductiveConstructor Operator">S</a> <a id="9195" href="../Adequacy/#9195" class="Bound">x</a><a id="9196" class="Symbol">}</a> <a id="9198" class="Symbol">=</a> <a id="9200" href="../Adequacy/#9188" class="Bound">g</a>
</pre>
<p>We need a few properties of the <code>𝕍</code> and <code>𝔼</code> relations. The first is that a closure in the <code>𝕍</code> relation must be in weak-head normal form. We define WHNF has follows.</p>
<pre class="Agda"><a id="9379" class="Keyword">data</a> <a id="WHNF"></a><a id="9384" href="../Adequacy/#9384" class="Datatype">WHNF</a> <a id="9389" class="Symbol">:</a> <a id="9391" class="Symbol">∀</a> <a id="9393" class="Symbol">{</a><a id="9394" href="../Adequacy/#9394" class="Bound">Γ</a> <a id="9396" href="../Adequacy/#9396" class="Bound">A</a><a id="9397" class="Symbol">}</a> <a id="9399" class="Symbol">→</a> <a id="9401" href="../Adequacy/#9394" class="Bound">Γ</a> <a id="9403" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="9405" href="../Adequacy/#9396" class="Bound">A</a> <a id="9407" class="Symbol">→</a> <a id="9409" class="PrimitiveType">Set</a> <a id="9413" class="Keyword">where</a>
  <a id="WHNF.ƛ_"></a><a id="9421" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="9424" class="Symbol">:</a> <a id="9426" class="Symbol">∀</a> <a id="9428" class="Symbol">{</a><a id="9429" href="../Adequacy/#9429" class="Bound">Γ</a><a id="9430" class="Symbol">}</a> <a id="9432" class="Symbol">{</a><a id="9433" href="../Adequacy/#9433" class="Bound">N</a> <a id="9435" class="Symbol">:</a> <a id="9437" href="../Adequacy/#9429" class="Bound">Γ</a> <a id="9439" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="9441" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="9443" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="9445" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="9446" class="Symbol">}</a>
     <a id="9453" class="Symbol">→</a> <a id="9455" href="../Adequacy/#9384" class="Datatype">WHNF</a> <a id="9460" class="Symbol">(</a><a id="9461" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="9463" href="../Adequacy/#9433" class="Bound">N</a><a id="9464" class="Symbol">)</a>
</pre>
<p>The proof goes by cases on the term in the closure.</p>
<pre class="Agda"><a id="𝕍→WHNF"></a><a id="9528" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="9535" class="Symbol">:</a> <a id="9537" class="Symbol">∀{</a><a id="9539" href="../Adequacy/#9539" class="Bound">Γ</a><a id="9540" class="Symbol">}{</a><a id="9542" href="../Adequacy/#9542" class="Bound">γ</a> <a id="9544" class="Symbol">:</a> <a id="9546" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="9554" href="../Adequacy/#9539" class="Bound">Γ</a><a id="9555" class="Symbol">}{</a><a id="9557" href="../Adequacy/#9557" class="Bound">M</a> <a id="9559" class="Symbol">:</a> <a id="9561" href="../Adequacy/#9539" class="Bound">Γ</a> <a id="9563" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="9565" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="9566" class="Symbol">}{</a><a id="9568" href="../Adequacy/#9568" class="Bound">v</a><a id="9569" class="Symbol">}</a>
       <a id="9578" class="Symbol">→</a> <a id="9580" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="9582" href="../Adequacy/#9568" class="Bound">v</a> <a id="9584" class="Symbol">(</a><a id="9585" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="9590" href="../Adequacy/#9557" class="Bound">M</a> <a id="9592" href="../Adequacy/#9542" class="Bound">γ</a><a id="9593" class="Symbol">)</a> <a id="9595" class="Symbol">→</a> <a id="9597" href="../Adequacy/#9384" class="Datatype">WHNF</a> <a id="9602" href="../Adequacy/#9557" class="Bound">M</a>
<a id="9604" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="9611" class="Symbol">{</a><a id="9612" class="Argument">M</a> <a id="9614" class="Symbol">=</a> <a id="9616" href="../Untyped/#4312" class="InductiveConstructor Operator">`</a> <a id="9618" href="../Adequacy/#9618" class="Bound">x</a><a id="9619" class="Symbol">}</a> <a id="9621" class="Symbol">{</a><a id="9622" href="../Adequacy/#9622" class="Bound">v</a><a id="9623" class="Symbol">}</a> <a id="9625" class="Symbol">()</a>
<a id="9628" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="9635" class="Symbol">{</a><a id="9636" class="Argument">M</a> <a id="9638" class="Symbol">=</a> <a id="9640" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="9642" href="../Adequacy/#9642" class="Bound">N</a><a id="9643" class="Symbol">}</a> <a id="9645" class="Symbol">{</a><a id="9646" href="../Adequacy/#9646" class="Bound">v</a><a id="9647" class="Symbol">}</a> <a id="9649" href="../Adequacy/#9649" class="Bound">vc</a> <a id="9652" class="Symbol">=</a> <a id="9654" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a>
<a id="9657" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="9664" class="Symbol">{</a><a id="9665" class="Argument">M</a> <a id="9667" class="Symbol">=</a> <a id="9669" href="../Adequacy/#9669" class="Bound">L</a> <a id="9671" href="../Untyped/#4424" class="InductiveConstructor Operator">·</a> <a id="9673" href="../Adequacy/#9673" class="Bound">M</a><a id="9674" class="Symbol">}</a> <a id="9676" class="Symbol">{</a><a id="9677" href="../Adequacy/#9677" class="Bound">v</a><a id="9678" class="Symbol">}</a> <a id="9680" class="Symbol">()</a>
</pre>
<p>Next we have an introduction rule for <code>𝕍</code> that mimics the <code>⊔-intro</code> rule. If both <code>u</code> and <code>v</code> are related to a closure <code>c</code>, then their join is too.</p>
<pre class="Agda"><a id="𝕍⊔-intro"></a><a id="9841" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="9850" class="Symbol">:</a> <a id="9852" class="Symbol">∀{</a><a id="9854" href="../Adequacy/#9854" class="Bound">c</a> <a id="9856" href="../Adequacy/#9856" class="Bound">u</a> <a id="9858" href="../Adequacy/#9858" class="Bound">v</a><a id="9859" class="Symbol">}</a>
         <a id="9870" class="Symbol">→</a> <a id="9872" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="9874" href="../Adequacy/#9856" class="Bound">u</a> <a id="9876" href="../Adequacy/#9854" class="Bound">c</a> <a id="9878" class="Symbol">→</a> <a id="9880" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="9882" href="../Adequacy/#9858" class="Bound">v</a> <a id="9884" href="../Adequacy/#9854" class="Bound">c</a>
           <a id="9897" class="Comment">---------------</a>
         <a id="9922" class="Symbol">→</a> <a id="9924" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="9926" class="Symbol">(</a><a id="9927" href="../Adequacy/#9856" class="Bound">u</a> <a id="9929" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="9931" href="../Adequacy/#9858" class="Bound">v</a><a id="9932" class="Symbol">)</a> <a id="9934" href="../Adequacy/#9854" class="Bound">c</a>
<a id="9936" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="9945" class="Symbol">{</a><a id="9946" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="9951" class="Symbol">(</a><a id="9952" href="../Untyped/#4312" class="InductiveConstructor Operator">`</a> <a id="9954" href="../Adequacy/#9954" class="Bound">x</a><a id="9955" class="Symbol">)</a> <a id="9957" href="../Adequacy/#9957" class="Bound">γ</a><a id="9958" class="Symbol">}</a> <a id="9960" class="Symbol">()</a> <a id="9963" href="../Adequacy/#9963" class="Bound">vc</a>
<a id="9966" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="9975" class="Symbol">{</a><a id="9976" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="9981" class="Symbol">(</a><a id="9982" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="9984" href="../Adequacy/#9984" class="Bound">N</a><a id="9985" class="Symbol">)</a> <a id="9987" href="../Adequacy/#9987" class="Bound">γ</a><a id="9988" class="Symbol">}</a> <a id="9990" href="../Adequacy/#9990" class="Bound">uc</a> <a id="9993" href="../Adequacy/#9993" class="Bound">vc</a> <a id="9996" class="Symbol">=</a> <a id="9998" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="10000" href="../Adequacy/#9990" class="Bound">uc</a> <a id="10003" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="10005" href="../Adequacy/#9993" class="Bound">vc</a> <a id="10008" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="10010" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="10019" class="Symbol">{</a><a id="10020" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="10025" class="Symbol">(</a><a id="10026" href="../Adequacy/#10026" class="Bound">L</a> <a id="10028" href="../Untyped/#4424" class="InductiveConstructor Operator">·</a> <a id="10030" href="../Adequacy/#10030" class="Bound">M</a><a id="10031" class="Symbol">)</a> <a id="10033" href="../Adequacy/#10033" class="Bound">γ</a><a id="10034" class="Symbol">}</a> <a id="10036" class="Symbol">()</a> <a id="10039" href="../Adequacy/#10039" class="Bound">vc</a>
</pre>
<p>In a moment we prove that <code>𝕍</code> is preserved when going from a greater value to a lesser value: if <code>𝕍 v c</code> and <code>v' ⊑ v</code>, then <code>𝕍 v' c</code>. This property, named <code>𝕍-sub</code>, is needed by the main lemma in the case for the <code>sub</code> rule.</p>
<p>To prove <code>𝕍-sub</code>, we in turn need the following property concerning values that are not greater than a function, that is, values that are equivalent to <code>⊥</code>. In such cases, <code>𝕍 v (clos (ƛ N) γ')</code> is trivially true.</p>
<pre class="Agda"><a id="not-above-fun-𝕍"></a><a id="10490" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a> <a id="10506" class="Symbol">:</a> <a id="10508" class="Symbol">∀{</a><a id="10510" href="../Adequacy/#10510" class="Bound">v</a> <a id="10512" class="Symbol">:</a> <a id="10514" href="../Denotational/#4067" class="Datatype">Value</a><a id="10519" class="Symbol">}{</a><a id="10521" href="../Adequacy/#10521" class="Bound">Γ</a><a id="10522" class="Symbol">}{</a><a id="10524" href="../Adequacy/#10524" class="Bound">γ'</a> <a id="10527" class="Symbol">:</a> <a id="10529" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="10537" href="../Adequacy/#10521" class="Bound">Γ</a><a id="10538" class="Symbol">}{</a><a id="10540" href="../Adequacy/#10540" class="Bound">N</a> <a id="10542" class="Symbol">:</a> <a id="10544" href="../Adequacy/#10521" class="Bound">Γ</a> <a id="10546" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="10548" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="10550" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="10552" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="10554" class="Symbol">}</a>
    <a id="10560" class="Symbol">→</a> <a id="10562" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="10564" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="10574" href="../Adequacy/#10510" class="Bound">v</a>
      <a id="10582" class="Comment">-------------------</a>
    <a id="10606" class="Symbol">→</a> <a id="10608" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="10610" href="../Adequacy/#10510" class="Bound">v</a> <a id="10612" class="Symbol">(</a><a id="10613" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="10618" class="Symbol">(</a><a id="10619" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="10621" href="../Adequacy/#10540" class="Bound">N</a><a id="10622" class="Symbol">)</a> <a id="10624" href="../Adequacy/#10524" class="Bound">γ'</a><a id="10626" class="Symbol">)</a>
<a id="10628" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a> <a id="10644" class="Symbol">{</a><a id="10645" href="../Denotational/#4087" class="InductiveConstructor">⊥</a><a id="10646" class="Symbol">}</a> <a id="10648" href="../Adequacy/#10648" class="Bound">af</a> <a id="10651" class="Symbol">=</a> <a id="10653" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
<a id="10656" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a> <a id="10672" class="Symbol">{</a><a id="10673" href="../Adequacy/#10673" class="Bound">v</a> <a id="10675" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="10677" href="../Adequacy/#10677" class="Bound">v'</a><a id="10679" class="Symbol">}</a> <a id="10681" href="../Adequacy/#10681" class="Bound">af</a> <a id="10684" class="Symbol">=</a> <a id="10686" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="10693" class="Symbol">(</a><a id="10694" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="10708" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="10710" href="../Adequacy/#10673" class="Bound">v</a> <a id="10712" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="10714" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="10716" href="../Adequacy/#10677" class="Bound">v'</a> <a id="10719" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="10721" href="../Denotational/#5554" class="Function">⊑-refl</a> <a id="10728" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="10730" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="10732" href="../Adequacy/#10681" class="Bound">af</a><a id="10734" class="Symbol">)</a>
<a id="10736" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a> <a id="10752" class="Symbol">{</a><a id="10753" href="../Adequacy/#10753" class="Bound">v₁</a> <a id="10756" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="10758" href="../Adequacy/#10758" class="Bound">v₂</a><a id="10760" class="Symbol">}</a> <a id="10762" href="../Adequacy/#10762" class="Bound">af</a>
    <a id="10769" class="Keyword">with</a> <a id="10774" href="../Adequacy/#5774" class="Function">not-above-fun-⊔-inv</a> <a id="10794" href="../Adequacy/#10762" class="Bound">af</a>
<a id="10797" class="Symbol">...</a> <a id="10801" class="Symbol">|</a> <a id="10803" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="10805" href="../Adequacy/#10805" class="Bound">af1</a> <a id="10809" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="10811" href="../Adequacy/#10811" class="Bound">af2</a> <a id="10815" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="10817" class="Symbol">=</a> <a id="10819" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="10821" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a> <a id="10837" href="../Adequacy/#10805" class="Bound">af1</a> <a id="10841" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="10843" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a> <a id="10859" href="../Adequacy/#10811" class="Bound">af2</a> <a id="10863" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<p>The proofs of <code>𝕍-sub</code> and <code>𝔼-sub</code> are intertwined.</p>
<pre class="Agda"><a id="sub-𝕍"></a><a id="10926" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="10932" class="Symbol">:</a> <a id="10934" class="Symbol">∀{</a><a id="10936" href="../Adequacy/#10936" class="Bound">c</a> <a id="10938" class="Symbol">:</a> <a id="10940" href="../BigStep/#3125" class="Datatype">Clos</a><a id="10944" class="Symbol">}{</a><a id="10946" href="../Adequacy/#10946" class="Bound">v</a> <a id="10948" href="../Adequacy/#10948" class="Bound">v'</a><a id="10950" class="Symbol">}</a> <a id="10952" class="Symbol">→</a> <a id="10954" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="10956" href="../Adequacy/#10946" class="Bound">v</a> <a id="10958" href="../Adequacy/#10936" class="Bound">c</a> <a id="10960" class="Symbol">→</a> <a id="10962" href="../Adequacy/#10948" class="Bound">v'</a> <a id="10965" href="../Denotational/#4424" class="Datatype Operator">⊑</a> <a id="10967" href="../Adequacy/#10946" class="Bound">v</a> <a id="10969" class="Symbol">→</a> <a id="10971" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="10973" href="../Adequacy/#10948" class="Bound">v'</a> <a id="10976" href="../Adequacy/#10936" class="Bound">c</a>
<a id="sub-𝔼"></a><a id="10978" href="../Adequacy/#10978" class="Function">sub-𝔼</a> <a id="10984" class="Symbol">:</a> <a id="10986" class="Symbol">∀{</a><a id="10988" href="../Adequacy/#10988" class="Bound">c</a> <a id="10990" class="Symbol">:</a> <a id="10992" href="../BigStep/#3125" class="Datatype">Clos</a><a id="10996" class="Symbol">}{</a><a id="10998" href="../Adequacy/#10998" class="Bound">v</a> <a id="11000" href="../Adequacy/#11000" class="Bound">v'</a><a id="11002" class="Symbol">}</a> <a id="11004" class="Symbol">→</a> <a id="11006" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="11008" href="../Adequacy/#10998" class="Bound">v</a> <a id="11010" href="../Adequacy/#10988" class="Bound">c</a> <a id="11012" class="Symbol">→</a> <a id="11014" href="../Adequacy/#11000" class="Bound">v'</a> <a id="11017" href="../Denotational/#4424" class="Datatype Operator">⊑</a> <a id="11019" href="../Adequacy/#10998" class="Bound">v</a> <a id="11021" class="Symbol">→</a> <a id="11023" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="11025" href="../Adequacy/#11000" class="Bound">v'</a> <a id="11028" href="../Adequacy/#10988" class="Bound">c</a>
</pre>
<p>We prove <code>𝕍-sub</code> by case analysis on the closure’s term, to dispatch the cases for variables and application. We then proceed by induction on <code>v' ⊑ v</code>. We describe each case below.</p>
<pre class="Agda"><a id="11221" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11227" class="Symbol">{</a><a id="11228" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11233" class="Symbol">(</a><a id="11234" href="../Untyped/#4312" class="InductiveConstructor Operator">`</a> <a id="11236" href="../Adequacy/#11236" class="Bound">x</a><a id="11237" class="Symbol">)</a> <a id="11239" href="../Adequacy/#11239" class="Bound">γ</a><a id="11240" class="Symbol">}</a> <a id="11242" class="Symbol">{</a><a id="11243" href="../Adequacy/#11243" class="Bound">v</a><a id="11244" class="Symbol">}</a> <a id="11246" class="Symbol">()</a> <a id="11249" href="../Adequacy/#11249" class="Bound">lt</a>
<a id="11252" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11258" class="Symbol">{</a><a id="11259" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11264" class="Symbol">(</a><a id="11265" href="../Adequacy/#11265" class="Bound">L</a> <a id="11267" href="../Untyped/#4424" class="InductiveConstructor Operator">·</a> <a id="11269" href="../Adequacy/#11269" class="Bound">M</a><a id="11270" class="Symbol">)</a> <a id="11272" href="../Adequacy/#11272" class="Bound">γ</a><a id="11273" class="Symbol">}</a> <a id="11275" class="Symbol">()</a> <a id="11278" href="../Adequacy/#11278" class="Bound">lt</a>
<a id="11281" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11287" class="Symbol">{</a><a id="11288" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11293" class="Symbol">(</a><a id="11294" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11296" href="../Adequacy/#11296" class="Bound">N</a><a id="11297" class="Symbol">)</a> <a id="11299" href="../Adequacy/#11299" class="Bound">γ</a><a id="11300" class="Symbol">}</a> <a id="11302" href="../Adequacy/#11302" class="Bound">vc</a> <a id="11305" href="../Denotational/#4459" class="InductiveConstructor">⊑-bot</a> <a id="11311" class="Symbol">=</a> <a id="11313" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
<a id="11316" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11322" class="Symbol">{</a><a id="11323" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11328" class="Symbol">(</a><a id="11329" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11331" href="../Adequacy/#11331" class="Bound">N</a><a id="11332" class="Symbol">)</a> <a id="11334" href="../Adequacy/#11334" class="Bound">γ</a><a id="11335" class="Symbol">}</a> <a id="11337" href="../Adequacy/#11337" class="Bound">vc</a> <a id="11340" class="Symbol">(</a><a id="11341" href="../Denotational/#4484" class="InductiveConstructor">⊑-conj-L</a> <a id="11350" href="../Adequacy/#11350" class="Bound">lt1</a> <a id="11354" href="../Adequacy/#11354" class="Bound">lt2</a><a id="11357" class="Symbol">)</a> <a id="11359" class="Symbol">=</a> <a id="11361" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11363" class="Symbol">(</a><a id="11364" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11370" href="../Adequacy/#11337" class="Bound">vc</a> <a id="11373" href="../Adequacy/#11350" class="Bound">lt1</a><a id="11376" class="Symbol">)</a> <a id="11378" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11380" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11386" href="../Adequacy/#11337" class="Bound">vc</a> <a id="11389" href="../Adequacy/#11354" class="Bound">lt2</a> <a id="11393" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="11395" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11401" class="Symbol">{</a><a id="11402" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11407" class="Symbol">(</a><a id="11408" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11410" href="../Adequacy/#11410" class="Bound">N</a><a id="11411" class="Symbol">)</a> <a id="11413" href="../Adequacy/#11413" class="Bound">γ</a><a id="11414" class="Symbol">}</a> <a id="11416" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11418" href="../Adequacy/#11418" class="Bound">vv1</a> <a id="11422" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11424" href="../Adequacy/#11424" class="Bound">vv2</a> <a id="11428" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11430" class="Symbol">(</a><a id="11431" href="../Denotational/#4568" class="InductiveConstructor">⊑-conj-R1</a> <a id="11441" href="../Adequacy/#11441" class="Bound">lt</a><a id="11443" class="Symbol">)</a> <a id="11445" class="Symbol">=</a> <a id="11447" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11453" href="../Adequacy/#11418" class="Bound">vv1</a> <a id="11457" href="../Adequacy/#11441" class="Bound">lt</a>
<a id="11460" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11466" class="Symbol">{</a><a id="11467" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11472" class="Symbol">(</a><a id="11473" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11475" href="../Adequacy/#11475" class="Bound">N</a><a id="11476" class="Symbol">)</a> <a id="11478" href="../Adequacy/#11478" class="Bound">γ</a><a id="11479" class="Symbol">}</a> <a id="11481" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11483" href="../Adequacy/#11483" class="Bound">vv1</a> <a id="11487" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11489" href="../Adequacy/#11489" class="Bound">vv2</a> <a id="11493" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11495" class="Symbol">(</a><a id="11496" href="../Denotational/#4641" class="InductiveConstructor">⊑-conj-R2</a> <a id="11506" href="../Adequacy/#11506" class="Bound">lt</a><a id="11508" class="Symbol">)</a> <a id="11510" class="Symbol">=</a> <a id="11512" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11518" href="../Adequacy/#11489" class="Bound">vv2</a> <a id="11522" href="../Adequacy/#11506" class="Bound">lt</a>
<a id="11525" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11531" class="Symbol">{</a><a id="11532" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11537" class="Symbol">(</a><a id="11538" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11540" href="../Adequacy/#11540" class="Bound">N</a><a id="11541" class="Symbol">)</a> <a id="11543" href="../Adequacy/#11543" class="Bound">γ</a><a id="11544" class="Symbol">}</a> <a id="11546" href="../Adequacy/#11546" class="Bound">vc</a> <a id="11549" class="Symbol">(</a><a id="11550" href="../Denotational/#4714" class="InductiveConstructor">⊑-trans</a><a id="11557" class="Symbol">{</a><a id="11558" class="Argument">v</a> <a id="11560" class="Symbol">=</a> <a id="11562" href="../Adequacy/#11562" class="Bound">v₂</a><a id="11564" class="Symbol">}</a> <a id="11566" href="../Adequacy/#11566" class="Bound">lt1</a> <a id="11570" href="../Adequacy/#11570" class="Bound">lt2</a><a id="11573" class="Symbol">)</a> <a id="11575" class="Symbol">=</a> <a id="11577" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11583" class="Symbol">(</a><a id="11584" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11590" href="../Adequacy/#11546" class="Bound">vc</a> <a id="11593" href="../Adequacy/#11570" class="Bound">lt2</a><a id="11596" class="Symbol">)</a> <a id="11598" href="../Adequacy/#11566" class="Bound">lt1</a>
<a id="11602" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11608" class="Symbol">{</a><a id="11609" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11614" class="Symbol">(</a><a id="11615" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11617" href="../Adequacy/#11617" class="Bound">N</a><a id="11618" class="Symbol">)</a> <a id="11620" href="../Adequacy/#11620" class="Bound">γ</a><a id="11621" class="Symbol">}</a> <a id="11623" href="../Adequacy/#11623" class="Bound">vc</a> <a id="11626" class="Symbol">(</a><a id="11627" href="../Denotational/#4785" class="InductiveConstructor">⊑-fun</a> <a id="11633" href="../Adequacy/#11633" class="Bound">lt1</a> <a id="11637" href="../Adequacy/#11637" class="Bound">lt2</a><a id="11640" class="Symbol">)</a> <a id="11642" href="../Adequacy/#11642" class="Bound">ev1</a> <a id="11646" href="../Adequacy/#11646" class="Bound">sf</a>
    <a id="11653" class="Keyword">with</a> <a id="11658" href="../Adequacy/#11623" class="Bound">vc</a> <a id="11661" class="Symbol">(</a><a id="11662" href="../Adequacy/#10978" class="Function">sub-𝔼</a> <a id="11668" href="../Adequacy/#11642" class="Bound">ev1</a> <a id="11672" href="../Adequacy/#11633" class="Bound">lt1</a><a id="11675" class="Symbol">)</a> <a id="11677" class="Symbol">(</a><a id="11678" href="../Adequacy/#4340" class="Function">above-fun-⊑</a> <a id="11690" href="../Adequacy/#11646" class="Bound">sf</a> <a id="11693" href="../Adequacy/#11637" class="Bound">lt2</a><a id="11696" class="Symbol">)</a>
<a id="11698" class="Symbol">...</a> <a id="11702" class="Symbol">|</a> <a id="11704" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11706" href="../Adequacy/#11706" class="Bound">c</a> <a id="11708" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11710" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11712" href="../Adequacy/#11712" class="Bound">Nc</a> <a id="11715" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11717" href="../Adequacy/#11717" class="Bound">v4</a> <a id="11720" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11722" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11724" class="Symbol">=</a> <a id="11726" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11728" href="../Adequacy/#11706" class="Bound">c</a> <a id="11730" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11732" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11734" href="../Adequacy/#11712" class="Bound">Nc</a> <a id="11737" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11739" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11745" href="../Adequacy/#11717" class="Bound">v4</a> <a id="11748" class="Bound">lt2</a> <a id="11752" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11754" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="11756" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="11762" class="Symbol">{</a><a id="11763" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11768" class="Symbol">(</a><a id="11769" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="11771" href="../Adequacy/#11771" class="Bound">N</a><a id="11772" class="Symbol">)</a> <a id="11774" href="../Adequacy/#11774" class="Bound">γ</a><a id="11775" class="Symbol">}</a> <a id="11777" class="Symbol">{</a><a id="11778" href="../Adequacy/#11778" class="Bound">v</a> <a id="11780" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="11782" href="../Adequacy/#11782" class="Bound">w</a> <a id="11784" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="11786" href="../Adequacy/#11778" class="Bound">v</a> <a id="11788" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="11790" href="../Adequacy/#11790" class="Bound">w'</a><a id="11792" class="Symbol">}</a> <a id="11794" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11796" href="../Adequacy/#11796" class="Bound">vcw</a> <a id="11800" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11802" href="../Adequacy/#11802" class="Bound">vcw'</a> <a id="11807" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11809" href="../Denotational/#4888" class="InductiveConstructor">⊑-dist</a> <a id="11816" href="../Adequacy/#11816" class="Bound">ev1c</a> <a id="11821" href="../Adequacy/#11821" class="Bound">sf</a>
    <a id="11828" class="Keyword">with</a> <a id="11833" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="11844" href="../Adequacy/#11782" class="Bound">w</a> <a id="11846" class="Symbol">|</a> <a id="11848" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="11859" href="../Adequacy/#11790" class="Bound">w'</a>
<a id="11862" class="Symbol">...</a> <a id="11866" class="Symbol">|</a> <a id="11868" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="11872" href="../Adequacy/#11872" class="Bound">af2</a> <a id="11876" class="Symbol">|</a> <a id="11878" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="11882" href="../Adequacy/#11882" class="Bound">af3</a>
    <a id="11890" class="Keyword">with</a> <a id="11895" class="Bound">vcw</a> <a id="11899" class="Bound">ev1c</a> <a id="11904" href="../Adequacy/#11872" class="Bound">af2</a> <a id="11908" class="Symbol">|</a> <a id="11910" class="Bound">vcw'</a> <a id="11915" class="Bound">ev1c</a> <a id="11920" href="../Adequacy/#11882" class="Bound">af3</a>
<a id="11924" class="Symbol">...</a> <a id="11928" class="Symbol">|</a> <a id="11930" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11932" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="11937" href="../Adequacy/#11937" class="Bound">L</a> <a id="11939" href="../Adequacy/#11939" class="Bound">δ</a> <a id="11941" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11943" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11945" href="../Adequacy/#11945" class="Bound">L⇓c₂</a> <a id="11950" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11952" href="../Adequacy/#11952" class="Bound">𝕍w</a> <a id="11955" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11957" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="11963" class="Symbol">|</a> <a id="11965" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11967" href="../Adequacy/#11967" class="Bound">c₃</a> <a id="11970" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11972" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="11974" href="../Adequacy/#11974" class="Bound">L⇓c₃</a> <a id="11979" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="11981" href="../Adequacy/#11981" class="Bound">𝕍w'</a> <a id="11985" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11987" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="11989" class="Keyword">rewrite</a> <a id="11997" href="../BigStep/#5880" class="Function">⇓-determ</a> <a id="12006" href="../Adequacy/#11974" class="Bound">L⇓c₃</a> <a id="12011" href="../Adequacy/#11945" class="Bound">L⇓c₂</a> <a id="12016" class="Keyword">with</a> <a id="12021" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="12028" href="../Adequacy/#11952" class="Bound">𝕍w</a>
<a id="12031" class="Symbol">...</a> <a id="12035" class="Symbol">|</a> <a id="12037" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="12040" class="Symbol">=</a>
      <a id="12048" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12050" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="12055" class="Bound">L</a> <a id="12057" class="Bound">δ</a> <a id="12059" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12061" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12063" class="Bound">L⇓c₂</a> <a id="12068" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12070" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12072" class="Bound">𝕍w</a> <a id="12075" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12077" class="Bound">𝕍w'</a> <a id="12081" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12083" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12085" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="12087" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="12093" class="Symbol">{</a><a id="12094" href="../Adequacy/#12094" class="Bound">c</a><a id="12095" class="Symbol">}</a> <a id="12097" class="Symbol">{</a><a id="12098" href="../Adequacy/#12098" class="Bound">v</a> <a id="12100" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="12102" href="../Adequacy/#12102" class="Bound">w</a> <a id="12104" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="12106" href="../Adequacy/#12098" class="Bound">v</a> <a id="12108" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="12110" href="../Adequacy/#12110" class="Bound">w'</a><a id="12112" class="Symbol">}</a> <a id="12114" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12116" href="../Adequacy/#12116" class="Bound">vcw</a> <a id="12120" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12122" href="../Adequacy/#12122" class="Bound">vcw'</a> <a id="12127" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>  <a id="12130" href="../Denotational/#4888" class="InductiveConstructor">⊑-dist</a> <a id="12137" href="../Adequacy/#12137" class="Bound">ev1c</a> <a id="12142" href="../Adequacy/#12142" class="Bound">sf</a>
    <a id="12149" class="Symbol">|</a> <a id="12151" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="12155" href="../Adequacy/#12155" class="Bound">af2</a> <a id="12159" class="Symbol">|</a> <a id="12161" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="12164" href="../Adequacy/#12164" class="Bound">naf3</a>
    <a id="12173" class="Keyword">with</a> <a id="12178" href="../Adequacy/#12116" class="Bound">vcw</a> <a id="12182" href="../Adequacy/#12137" class="Bound">ev1c</a> <a id="12187" href="../Adequacy/#12155" class="Bound">af2</a>
<a id="12191" class="Symbol">...</a> <a id="12195" class="Symbol">|</a> <a id="12197" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12199" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="12204" class="Symbol">{</a><a id="12205" href="../Adequacy/#12205" class="Bound">Γ'</a><a id="12207" class="Symbol">}</a> <a id="12209" href="../Adequacy/#12209" class="Bound">L</a> <a id="12211" href="../Adequacy/#12211" class="Bound">γ₁</a> <a id="12214" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12216" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12218" href="../Adequacy/#12218" class="Bound">L⇓c2</a> <a id="12223" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12225" href="../Adequacy/#12225" class="Bound">𝕍w</a> <a id="12228" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12230" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="12236" class="Keyword">with</a> <a id="12241" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="12248" href="../Adequacy/#12225" class="Bound">𝕍w</a>
<a id="12251" class="Symbol">...</a> <a id="12255" class="Symbol">|</a> <a id="12257" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="12260" class="Symbol">{</a><a id="12261" class="Argument">N</a> <a id="12263" class="Symbol">=</a> <a id="12265" href="../Adequacy/#12265" class="Bound">N'</a><a id="12267" class="Symbol">}</a> <a id="12269" class="Symbol">=</a>
      <a id="12277" class="Keyword">let</a> <a id="12281" href="../Adequacy/#12281" class="Bound">𝕍w'</a> <a id="12285" class="Symbol">=</a> <a id="12287" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a><a id="12302" class="Symbol">{</a><a id="12303" class="Bound">w'</a><a id="12305" class="Symbol">}{</a><a id="12307" class="Bound">Γ'</a><a id="12309" class="Symbol">}{</a><a id="12311" class="Bound">γ₁</a><a id="12313" class="Symbol">}{</a><a id="12315" href="../Adequacy/#12265" class="Bound">N'</a><a id="12317" class="Symbol">}</a> <a id="12319" class="Bound">naf3</a> <a id="12324" class="Keyword">in</a>
      <a id="12333" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12335" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="12340" class="Symbol">(</a><a id="12341" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="12343" href="../Adequacy/#12265" class="Bound">N'</a><a id="12345" class="Symbol">)</a> <a id="12347" class="Bound">γ₁</a> <a id="12350" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12352" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12354" class="Bound">L⇓c2</a> <a id="12359" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12361" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="12370" class="Bound">𝕍w</a> <a id="12373" href="../Adequacy/#12281" class="Bound">𝕍w'</a> <a id="12377" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12379" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="12381" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="12387" class="Symbol">{</a><a id="12388" href="../Adequacy/#12388" class="Bound">c</a><a id="12389" class="Symbol">}</a> <a id="12391" class="Symbol">{</a><a id="12392" href="../Adequacy/#12392" class="Bound">v</a> <a id="12394" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="12396" href="../Adequacy/#12396" class="Bound">w</a> <a id="12398" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="12400" href="../Adequacy/#12392" class="Bound">v</a> <a id="12402" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="12404" href="../Adequacy/#12404" class="Bound">w'</a><a id="12406" class="Symbol">}</a> <a id="12408" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12410" href="../Adequacy/#12410" class="Bound">vcw</a> <a id="12414" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12416" href="../Adequacy/#12416" class="Bound">vcw'</a> <a id="12421" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12423" href="../Denotational/#4888" class="InductiveConstructor">⊑-dist</a> <a id="12430" href="../Adequacy/#12430" class="Bound">ev1c</a> <a id="12435" href="../Adequacy/#12435" class="Bound">sf</a>
    <a id="12442" class="Symbol">|</a> <a id="12444" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="12447" href="../Adequacy/#12447" class="Bound">naf2</a> <a id="12452" class="Symbol">|</a> <a id="12454" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="12458" href="../Adequacy/#12458" class="Bound">af3</a>
    <a id="12466" class="Keyword">with</a> <a id="12471" href="../Adequacy/#12416" class="Bound">vcw'</a> <a id="12476" href="../Adequacy/#12430" class="Bound">ev1c</a> <a id="12481" href="../Adequacy/#12458" class="Bound">af3</a>
<a id="12485" class="Symbol">...</a> <a id="12489" class="Symbol">|</a> <a id="12491" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12493" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="12498" class="Symbol">{</a><a id="12499" href="../Adequacy/#12499" class="Bound">Γ'</a><a id="12501" class="Symbol">}</a> <a id="12503" href="../Adequacy/#12503" class="Bound">L</a> <a id="12505" href="../Adequacy/#12505" class="Bound">γ₁</a> <a id="12508" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12510" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12512" href="../Adequacy/#12512" class="Bound">L⇓c3</a> <a id="12517" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12519" href="../Adequacy/#12519" class="Bound">𝕍w'c</a> <a id="12524" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12526" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="12532" class="Keyword">with</a> <a id="12537" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="12544" href="../Adequacy/#12519" class="Bound">𝕍w'c</a>
<a id="12549" class="Symbol">...</a> <a id="12553" class="Symbol">|</a> <a id="12555" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="12558" class="Symbol">{</a><a id="12559" class="Argument">N</a> <a id="12561" class="Symbol">=</a> <a id="12563" href="../Adequacy/#12563" class="Bound">N'</a><a id="12565" class="Symbol">}</a> <a id="12567" class="Symbol">=</a>
      <a id="12575" class="Keyword">let</a> <a id="12579" href="../Adequacy/#12579" class="Bound">𝕍wc</a> <a id="12583" class="Symbol">=</a> <a id="12585" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a><a id="12600" class="Symbol">{</a><a id="12601" class="Bound">w</a><a id="12602" class="Symbol">}{</a><a id="12604" class="Bound">Γ'</a><a id="12606" class="Symbol">}{</a><a id="12608" class="Bound">γ₁</a><a id="12610" class="Symbol">}{</a><a id="12612" href="../Adequacy/#12563" class="Bound">N'</a><a id="12614" class="Symbol">}</a> <a id="12616" class="Bound">naf2</a> <a id="12621" class="Keyword">in</a>
      <a id="12630" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12632" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="12637" class="Symbol">(</a><a id="12638" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="12640" href="../Adequacy/#12563" class="Bound">N'</a><a id="12642" class="Symbol">)</a> <a id="12644" class="Bound">γ₁</a> <a id="12647" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12649" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12651" class="Bound">L⇓c3</a> <a id="12656" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12658" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="12667" href="../Adequacy/#12579" class="Bound">𝕍wc</a> <a id="12671" class="Bound">𝕍w'c</a> <a id="12676" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12678" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="12680" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="12686" class="Symbol">{</a><a id="12687" href="../Adequacy/#12687" class="Bound">c</a><a id="12688" class="Symbol">}</a> <a id="12690" class="Symbol">{</a><a id="12691" href="../Adequacy/#12691" class="Bound">v</a> <a id="12693" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="12695" href="../Adequacy/#12695" class="Bound">w</a> <a id="12697" href="../Denotational/#4129" class="InductiveConstructor Operator">⊔</a> <a id="12699" href="../Adequacy/#12691" class="Bound">v</a> <a id="12701" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="12703" href="../Adequacy/#12703" class="Bound">w'</a><a id="12705" class="Symbol">}</a> <a id="12707" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12709" href="../Adequacy/#12709" class="Bound">vcw</a> <a id="12713" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12715" href="../Adequacy/#12715" class="Bound">vcw'</a> <a id="12720" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12722" href="../Denotational/#4888" class="InductiveConstructor">⊑-dist</a> <a id="12729" href="../Adequacy/#12729" class="Bound">ev1c</a> <a id="12734" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12736" href="../Adequacy/#12736" class="Bound">v'</a> <a id="12739" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12741" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12743" href="../Adequacy/#12743" class="Bound">w''</a> <a id="12747" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12749" href="../Adequacy/#12749" class="Bound">lt</a> <a id="12752" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12754" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="12760" class="Symbol">|</a> <a id="12762" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="12765" href="../Adequacy/#12765" class="Bound">naf2</a> <a id="12770" class="Symbol">|</a> <a id="12772" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="12775" href="../Adequacy/#12775" class="Bound">naf3</a>
    <a id="12784" class="Keyword">with</a> <a id="12789" href="../Adequacy/#4886" class="Function">above-fun-⊔</a> <a id="12801" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12803" href="../Adequacy/#12736" class="Bound">v'</a> <a id="12806" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12808" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="12810" href="../Adequacy/#12743" class="Bound">w''</a> <a id="12814" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="12816" href="../Adequacy/#12749" class="Bound">lt</a> <a id="12819" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="12821" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="12823" class="Symbol">...</a> <a id="12827" class="Symbol">|</a> <a id="12829" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="12834" href="../Adequacy/#12834" class="Bound">af2</a> <a id="12838" class="Symbol">=</a> <a id="12840" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="12847" class="Symbol">(</a><a id="12848" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="12862" href="../Adequacy/#12834" class="Bound">af2</a> <a id="12866" class="Bound">naf2</a><a id="12870" class="Symbol">)</a>
<a id="12872" class="Symbol">...</a> <a id="12876" class="Symbol">|</a> <a id="12878" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="12883" href="../Adequacy/#12883" class="Bound">af3</a> <a id="12887" class="Symbol">=</a> <a id="12889" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="12896" class="Symbol">(</a><a id="12897" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="12911" href="../Adequacy/#12883" class="Bound">af3</a> <a id="12915" class="Bound">naf3</a><a id="12919" class="Symbol">)</a>
</pre>
<ul>
<li><p>Case <code>⊑-bot</code>. We immediately have <code>𝕍 ⊥ (clos (ƛ N) γ)</code>.</p></li>
<li><p>Case <code>⊑-conj-L</code>.</p>
<pre><code>  v₁' ⊑ v     v₂' ⊑ v
  -------------------
  (v₁' ⊔ v₂') ⊑ v</code></pre>
<p>The induction hypotheses gives us <code>𝕍 v₁' (clos (ƛ N) γ)</code> and <code>𝕍 v₂' (clos (ƛ N) γ)</code>, which is all we need for this case.</p></li>
<li><p>Case <code>⊑-conj-R1</code>.</p>
<pre><code>  v' ⊑ v₁
  -------------
  v' ⊑ (v₁ ⊔ v₂)</code></pre>
<p>The induction hypothesis gives us <code>𝕍 v' (clos (ƛ N) γ)</code>.</p></li>
<li><p>Case <code>⊑-conj-R2</code>.</p>
<pre><code>  v' ⊑ v₂
  -------------
  v' ⊑ (v₁ ⊔ v₂)</code></pre>
<p>Again, the induction hypothesis gives us <code>𝕍 v' (clos (ƛ N) γ)</code>.</p></li>
<li><p>Case <code>⊑-trans</code>.</p>
<pre><code>  v' ⊑ v₂   v₂ ⊑ v
  -----------------
       v' ⊑ v</code></pre>
<p>The induction hypothesis for <code>v₂ ⊑ v</code> gives us <code>𝕍 v₂ (clos (ƛ N) γ)</code>. We apply the induction hypothesis for <code>v' ⊑ v₂</code> to conclude that <code>𝕍 v' (clos (ƛ N) γ)</code>.</p></li>
<li><p>Case <code>⊑-dist</code>. This case is the most difficult. We have</p>
<pre><code>  𝕍 (v ↦ w) (clos (ƛ N) γ)
  𝕍 (v ↦ w') (clos (ƛ N) γ)</code></pre>
<p>and need to show that</p>
<pre><code>  𝕍 (v ↦ (w ⊔ w')) (clos (ƛ N) γ)</code></pre>
<p>Let <code>c</code> be an arbitrary closure such that <code>𝔼 v c</code>. Assume <code>w ⊔ w'</code> is greater than a function. Unfortunately, this does not mean that both <code>w</code> and <code>w'</code> are above functions. But thanks to the lemma <code>above-fun-⊔</code>, we know that at least one of them is greater than a function.</p>
<ul>
<li><p>Suppose both of them are greater than a function. Then we have <code>γ ⊢ N ⇓ clos L δ</code> and <code>𝕍 w (clos L δ)</code>. We also have <code>γ ⊢ N ⇓ c₃</code> and <code>𝕍 w' c₃</code>. Because the big-step semantics is deterministic, we have <code>c₃ ≡ clos L δ</code>. Also, from <code>𝕍 w (clos L δ)</code> we know that <code>L ≡ ƛ N'</code> for some <code>N'</code>. We conclude that <code>𝕍 (w ⊔ w') (clos (ƛ N') δ)</code>.</p></li>
<li><p>Suppose one of them is greater than a function and the other is not: say <code>above-fun w</code> and <code>¬ above-fun w'</code>. Then from <code>𝕍 (v ↦ w) (clos (ƛ N) γ)</code> we have <code>γ ⊢ N ⇓ clos L γ₁</code> and <code>𝕍 w (clos L γ₁)</code>. From this we have <code>L ≡ ƛ N'</code> for some <code>N'</code>. Meanwhile, from <code>¬ above-fun w'</code> we have <code>𝕍 w' (clos L γ₁)</code>. We conclude that <code>𝕍 (w ⊔ w') (clos (ƛ N') γ₁)</code>.</p></li>
</ul></li>
</ul>
<p>The proof of <code>sub-𝔼</code> is direct and explained below.</p>
<pre class="Agda"><a id="15034" href="../Adequacy/#10978" class="Function">sub-𝔼</a> <a id="15040" class="Symbol">{</a><a id="15041" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="15046" href="../Adequacy/#15046" class="Bound">M</a> <a id="15048" href="../Adequacy/#15048" class="Bound">γ</a><a id="15049" class="Symbol">}</a> <a id="15051" class="Symbol">{</a><a id="15052" href="../Adequacy/#15052" class="Bound">v</a><a id="15053" class="Symbol">}</a> <a id="15055" class="Symbol">{</a><a id="15056" href="../Adequacy/#15056" class="Bound">v'</a><a id="15058" class="Symbol">}</a> <a id="15060" href="../Adequacy/#15060" class="Bound">𝔼v</a> <a id="15063" href="../Adequacy/#15063" class="Bound">v'⊑v</a> <a id="15068" href="../Adequacy/#15068" class="Bound">fv'</a>
    <a id="15076" class="Keyword">with</a> <a id="15081" href="../Adequacy/#15060" class="Bound">𝔼v</a> <a id="15084" class="Symbol">(</a><a id="15085" href="../Adequacy/#4340" class="Function">above-fun-⊑</a> <a id="15097" href="../Adequacy/#15068" class="Bound">fv'</a> <a id="15101" href="../Adequacy/#15063" class="Bound">v'⊑v</a><a id="15105" class="Symbol">)</a>
<a id="15107" class="Symbol">...</a> <a id="15111" class="Symbol">|</a> <a id="15113" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="15115" href="../Adequacy/#15115" class="Bound">c</a> <a id="15117" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="15119" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="15121" href="../Adequacy/#15121" class="Bound">M⇓c</a> <a id="15125" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="15127" href="../Adequacy/#15127" class="Bound">𝕍v</a> <a id="15130" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="15132" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="15134" class="Symbol">=</a>
      <a id="15142" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="15144" href="../Adequacy/#15115" class="Bound">c</a> <a id="15146" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="15148" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="15150" href="../Adequacy/#15121" class="Bound">M⇓c</a> <a id="15154" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="15156" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="15162" href="../Adequacy/#15127" class="Bound">𝕍v</a> <a id="15165" class="Bound">v'⊑v</a> <a id="15170" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="15172" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<p>From <code>above-fun v'</code> and <code>v' ⊑ v</code> we have <code>above-fun v</code>. Then with <code>𝔼 v c</code> we obtain a closure <code>c</code> such that <code>γ ⊢ M ⇓ c</code> and <code>𝕍 v c</code>. We conclude with an application of <code>sub-𝕍</code> with <code>v' ⊑ v</code> to show <code>𝕍 v' c</code>.</p>
<h2 id="programs-with-function-denotation-terminate-via-call-by-name">Programs with function denotation terminate via call-by-name</h2>
<p>The main lemma proves that if a term has a denotation that is above a function, then it terminates via call-by-name. More formally, if <code>γ ⊢ M ↓ v</code> and <code>𝔾 γ γ'</code>, then <code>𝔼 v (clos M γ')</code>. The proof is by induction on the derivation of <code>γ ⊢ M ↓ v</code> we discuss each case below.</p>
<p>The following lemma, kth-x, is used in the case for the <code>var</code> rule.</p>
<pre class="Agda"><a id="kth-x"></a><a id="15801" href="../Adequacy/#15801" class="Function">kth-x</a> <a id="15807" class="Symbol">:</a> <a id="15809" class="Symbol">∀{</a><a id="15811" href="../Adequacy/#15811" class="Bound">Γ</a><a id="15812" class="Symbol">}{</a><a id="15814" href="../Adequacy/#15814" class="Bound">γ'</a> <a id="15817" class="Symbol">:</a> <a id="15819" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="15827" href="../Adequacy/#15811" class="Bound">Γ</a><a id="15828" class="Symbol">}{</a><a id="15830" href="../Adequacy/#15830" class="Bound">x</a> <a id="15832" class="Symbol">:</a> <a id="15834" href="../Adequacy/#15811" class="Bound">Γ</a> <a id="15836" href="../Untyped/#3503" class="Datatype Operator">∋</a> <a id="15838" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="15839" class="Symbol">}</a>
     <a id="15846" class="Symbol">→</a> <a id="15848" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="15851" href="../Adequacy/#15851" class="Bound">Δ</a> <a id="15853" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="15855" href="../Untyped/#3135" class="Datatype">Context</a> <a id="15863" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="15865" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="15868" href="../Adequacy/#15868" class="Bound">δ</a> <a id="15870" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="15872" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="15880" href="../Adequacy/#15851" class="Bound">Δ</a> <a id="15882" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="15884" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="15887" href="../Adequacy/#15887" class="Bound">M</a> <a id="15889" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="15891" href="../Adequacy/#15851" class="Bound">Δ</a> <a id="15893" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="15895" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="15897" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a>
                 <a id="15916" href="../Adequacy/#15814" class="Bound">γ'</a> <a id="15919" href="../Adequacy/#15830" class="Bound">x</a> <a id="15921" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="15923" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="15928" href="../Adequacy/#15887" class="Bound">M</a> <a id="15930" href="../Adequacy/#15868" class="Bound">δ</a>
<a id="15932" href="../Adequacy/#15801" class="Function">kth-x</a><a id="15937" class="Symbol">{</a><a id="15938" class="Argument">γ'</a> <a id="15941" class="Symbol">=</a> <a id="15943" href="../Adequacy/#15943" class="Bound">γ'</a><a id="15945" class="Symbol">}{</a><a id="15947" class="Argument">x</a> <a id="15949" class="Symbol">=</a> <a id="15951" href="../Adequacy/#15951" class="Bound">x</a><a id="15952" class="Symbol">}</a> <a id="15954" class="Keyword">with</a> <a id="15959" href="../Adequacy/#15943" class="Bound">γ'</a> <a id="15962" href="../Adequacy/#15951" class="Bound">x</a>
<a id="15964" class="Symbol">...</a> <a id="15968" class="Symbol">|</a> <a id="15970" href="../BigStep/#3144" class="InductiveConstructor">clos</a><a id="15974" class="Symbol">{</a><a id="15975" class="Argument">Γ</a> <a id="15977" class="Symbol">=</a> <a id="15979" href="../Adequacy/#15979" class="Bound">Δ</a><a id="15980" class="Symbol">}</a> <a id="15982" href="../Adequacy/#15982" class="Bound">M</a> <a id="15984" href="../Adequacy/#15984" class="Bound">δ</a> <a id="15986" class="Symbol">=</a> <a id="15988" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="15990" href="../Adequacy/#15979" class="Bound">Δ</a> <a id="15992" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="15994" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="15996" href="../Adequacy/#15984" class="Bound">δ</a> <a id="15998" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16000" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16002" href="../Adequacy/#15982" class="Bound">M</a> <a id="16004" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16006" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="16011" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16013" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16015" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<pre class="Agda"><a id="↓→𝔼"></a><a id="16026" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16030" class="Symbol">:</a> <a id="16032" class="Symbol">∀{</a><a id="16034" href="../Adequacy/#16034" class="Bound">Γ</a><a id="16035" class="Symbol">}{</a><a id="16037" href="../Adequacy/#16037" class="Bound">γ</a> <a id="16039" class="Symbol">:</a> <a id="16041" href="../Denotational/#7204" class="Function">Env</a> <a id="16045" href="../Adequacy/#16034" class="Bound">Γ</a><a id="16046" class="Symbol">}{</a><a id="16048" href="../Adequacy/#16048" class="Bound">γ'</a> <a id="16051" class="Symbol">:</a> <a id="16053" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="16061" href="../Adequacy/#16034" class="Bound">Γ</a><a id="16062" class="Symbol">}{</a><a id="16064" href="../Adequacy/#16064" class="Bound">M</a> <a id="16066" class="Symbol">:</a> <a id="16068" href="../Adequacy/#16034" class="Bound">Γ</a> <a id="16070" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="16072" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="16074" class="Symbol">}{</a><a id="16076" href="../Adequacy/#16076" class="Bound">v</a><a id="16077" class="Symbol">}</a>
            <a id="16091" class="Symbol">→</a> <a id="16093" href="../Adequacy/#8944" class="Function">𝔾</a> <a id="16095" href="../Adequacy/#16037" class="Bound">γ</a> <a id="16097" href="../Adequacy/#16048" class="Bound">γ'</a> <a id="16100" class="Symbol">→</a> <a id="16102" href="../Adequacy/#16037" class="Bound">γ</a> <a id="16104" href="../Denotational/#9262" class="Datatype Operator">⊢</a> <a id="16106" href="../Adequacy/#16064" class="Bound">M</a> <a id="16108" href="../Denotational/#9262" class="Datatype Operator">↓</a> <a id="16110" href="../Adequacy/#16076" class="Bound">v</a> <a id="16112" class="Symbol">→</a> <a id="16114" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="16116" href="../Adequacy/#16076" class="Bound">v</a> <a id="16118" class="Symbol">(</a><a id="16119" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="16124" href="../Adequacy/#16064" class="Bound">M</a> <a id="16126" href="../Adequacy/#16048" class="Bound">γ'</a><a id="16128" class="Symbol">)</a>
<a id="16130" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16134" class="Symbol">{</a><a id="16135" href="../Adequacy/#16135" class="Bound">Γ</a><a id="16136" class="Symbol">}</a> <a id="16138" class="Symbol">{</a><a id="16139" href="../Adequacy/#16139" class="Bound">γ</a><a id="16140" class="Symbol">}</a> <a id="16142" class="Symbol">{</a><a id="16143" href="../Adequacy/#16143" class="Bound">γ'</a><a id="16145" class="Symbol">}</a> <a id="16147" href="../Adequacy/#16147" class="Bound">𝔾γγ'</a> <a id="16152" class="Symbol">(</a><a id="16153" href="../Denotational/#9316" class="InductiveConstructor">var</a><a id="16156" class="Symbol">{</a><a id="16157" class="Argument">x</a> <a id="16159" class="Symbol">=</a> <a id="16161" href="../Adequacy/#16161" class="Bound">x</a><a id="16162" class="Symbol">})</a> <a id="16165" href="../Adequacy/#16165" class="Bound">fγx</a>
    <a id="16173" class="Keyword">with</a> <a id="16178" href="../Adequacy/#15801" class="Function">kth-x</a><a id="16183" class="Symbol">{</a><a id="16184" href="../Adequacy/#16135" class="Bound">Γ</a><a id="16185" class="Symbol">}{</a><a id="16187" href="../Adequacy/#16143" class="Bound">γ'</a><a id="16189" class="Symbol">}{</a><a id="16191" href="../Adequacy/#16161" class="Bound">x</a><a id="16192" class="Symbol">}</a> <a id="16194" class="Symbol">|</a> <a id="16196" href="../Adequacy/#16147" class="Bound">𝔾γγ'</a><a id="16200" class="Symbol">{</a><a id="16201" class="Argument">x</a> <a id="16203" class="Symbol">=</a> <a id="16205" href="../Adequacy/#16161" class="Bound">x</a><a id="16206" class="Symbol">}</a>
<a id="16208" class="Symbol">...</a> <a id="16212" class="Symbol">|</a> <a id="16214" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16216" href="../Adequacy/#16216" class="Bound">Δ</a> <a id="16218" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16220" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16222" href="../Adequacy/#16222" class="Bound">δ</a> <a id="16224" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16226" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16228" href="../Adequacy/#16228" class="Bound">M'</a> <a id="16231" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16233" href="../Adequacy/#16233" class="Bound">eq</a> <a id="16236" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16238" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16240" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16242" class="Symbol">|</a> <a id="16244" href="../Adequacy/#16244" class="Bound">𝔾γγ'x</a> <a id="16250" class="Keyword">rewrite</a> <a id="16258" href="../Adequacy/#16233" class="Bound">eq</a>
    <a id="16265" class="Keyword">with</a> <a id="16270" href="../Adequacy/#16244" class="Bound">𝔾γγ'x</a> <a id="16276" class="Bound">fγx</a>
<a id="16280" class="Symbol">...</a> <a id="16284" class="Symbol">|</a> <a id="16286" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16288" href="../Adequacy/#16288" class="Bound">c</a> <a id="16290" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16292" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16294" href="../Adequacy/#16294" class="Bound">M'⇓c</a> <a id="16299" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16301" href="../Adequacy/#16301" class="Bound">𝕍γx</a> <a id="16305" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16307" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16309" class="Symbol">=</a>
      <a id="16317" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16319" href="../Adequacy/#16288" class="Bound">c</a> <a id="16321" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16323" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16325" class="Symbol">(</a><a id="16326" href="../BigStep/#3883" class="InductiveConstructor">⇓-var</a> <a id="16332" class="Bound">eq</a> <a id="16335" href="../Adequacy/#16294" class="Bound">M'⇓c</a><a id="16339" class="Symbol">)</a> <a id="16341" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16343" href="../Adequacy/#16301" class="Bound">𝕍γx</a> <a id="16347" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16349" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="16351" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16355" class="Symbol">{</a><a id="16356" href="../Adequacy/#16356" class="Bound">Γ</a><a id="16357" class="Symbol">}</a> <a id="16359" class="Symbol">{</a><a id="16360" href="../Adequacy/#16360" class="Bound">γ</a><a id="16361" class="Symbol">}</a> <a id="16363" class="Symbol">{</a><a id="16364" href="../Adequacy/#16364" class="Bound">γ'</a><a id="16366" class="Symbol">}</a> <a id="16368" href="../Adequacy/#16368" class="Bound">𝔾γγ'</a> <a id="16373" class="Symbol">(</a><a id="16374" href="../Denotational/#9391" class="InductiveConstructor">↦-elim</a><a id="16380" class="Symbol">{</a><a id="16381" class="Argument">L</a> <a id="16383" class="Symbol">=</a> <a id="16385" href="../Adequacy/#16385" class="Bound">L</a><a id="16386" class="Symbol">}{</a><a id="16388" class="Argument">M</a> <a id="16390" class="Symbol">=</a> <a id="16392" href="../Adequacy/#16392" class="Bound">M</a><a id="16393" class="Symbol">}{</a><a id="16395" class="Argument">v</a> <a id="16397" class="Symbol">=</a> <a id="16399" href="../Adequacy/#16399" class="Bound">v₁</a><a id="16401" class="Symbol">}{</a><a id="16403" class="Argument">w</a> <a id="16405" class="Symbol">=</a> <a id="16407" href="../Adequacy/#16407" class="Bound">v</a><a id="16408" class="Symbol">}</a> <a id="16410" href="../Adequacy/#16410" class="Bound">d₁</a> <a id="16413" href="../Adequacy/#16413" class="Bound">d₂</a><a id="16415" class="Symbol">)</a> <a id="16417" href="../Adequacy/#16417" class="Bound">fv</a>
    <a id="16424" class="Keyword">with</a> <a id="16429" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16433" href="../Adequacy/#16368" class="Bound">𝔾γγ'</a> <a id="16438" href="../Adequacy/#16410" class="Bound">d₁</a> <a id="16441" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16443" href="../Adequacy/#16399" class="Bound">v₁</a> <a id="16446" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16448" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16450" href="../Adequacy/#16407" class="Bound">v</a> <a id="16452" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16454" href="../Denotational/#5554" class="Function">⊑-refl</a> <a id="16461" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16463" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="16465" class="Symbol">...</a> <a id="16469" class="Symbol">|</a> <a id="16471" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16473" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="16478" href="../Adequacy/#16478" class="Bound">L'</a> <a id="16481" href="../Adequacy/#16481" class="Bound">δ</a> <a id="16483" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16485" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16487" href="../Adequacy/#16487" class="Bound">L⇓L'</a> <a id="16492" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16494" href="../Adequacy/#16494" class="Bound">𝕍v₁↦v</a> <a id="16500" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16502" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="16508" class="Keyword">with</a> <a id="16513" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="16520" href="../Adequacy/#16494" class="Bound">𝕍v₁↦v</a>
<a id="16526" class="Symbol">...</a> <a id="16530" class="Symbol">|</a> <a id="16532" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="16535" class="Symbol">{</a><a id="16536" class="Argument">N</a> <a id="16538" class="Symbol">=</a> <a id="16540" href="../Adequacy/#16540" class="Bound">N</a><a id="16541" class="Symbol">}</a>
    <a id="16547" class="Keyword">with</a> <a id="16552" class="Bound">𝕍v₁↦v</a> <a id="16558" class="Symbol">{</a><a id="16559" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="16564" class="Bound">M</a> <a id="16566" class="Bound">γ'</a><a id="16568" class="Symbol">}</a> <a id="16570" class="Symbol">(</a><a id="16571" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16575" class="Bound">𝔾γγ'</a> <a id="16580" class="Bound">d₂</a><a id="16582" class="Symbol">)</a> <a id="16584" class="Bound">fv</a>
<a id="16587" class="Symbol">...</a> <a id="16591" class="Symbol">|</a> <a id="16593" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16595" href="../Adequacy/#16595" class="Bound">c'</a> <a id="16598" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16600" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16602" href="../Adequacy/#16602" class="Bound">N⇓c'</a> <a id="16607" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16609" href="../Adequacy/#16609" class="Bound">𝕍v</a> <a id="16612" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16614" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16616" class="Symbol">=</a>
    <a id="16622" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16624" href="../Adequacy/#16595" class="Bound">c'</a> <a id="16627" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16629" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16631" href="../BigStep/#4105" class="InductiveConstructor">⇓-app</a> <a id="16637" class="Bound">L⇓L'</a> <a id="16642" href="../Adequacy/#16602" class="Bound">N⇓c'</a> <a id="16647" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16649" href="../Adequacy/#16609" class="Bound">𝕍v</a> <a id="16652" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16654" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="16656" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16660" class="Symbol">{</a><a id="16661" href="../Adequacy/#16661" class="Bound">Γ</a><a id="16662" class="Symbol">}</a> <a id="16664" class="Symbol">{</a><a id="16665" href="../Adequacy/#16665" class="Bound">γ</a><a id="16666" class="Symbol">}</a> <a id="16668" class="Symbol">{</a><a id="16669" href="../Adequacy/#16669" class="Bound">γ'</a><a id="16671" class="Symbol">}</a> <a id="16673" href="../Adequacy/#16673" class="Bound">𝔾γγ'</a> <a id="16678" class="Symbol">(</a><a id="16679" href="../Denotational/#9513" class="InductiveConstructor">↦-intro</a><a id="16686" class="Symbol">{</a><a id="16687" class="Argument">N</a> <a id="16689" class="Symbol">=</a> <a id="16691" href="../Adequacy/#16691" class="Bound">N</a><a id="16692" class="Symbol">}{</a><a id="16694" class="Argument">v</a> <a id="16696" class="Symbol">=</a> <a id="16698" href="../Adequacy/#16698" class="Bound">v</a><a id="16699" class="Symbol">}{</a><a id="16701" class="Argument">w</a> <a id="16703" class="Symbol">=</a> <a id="16705" href="../Adequacy/#16705" class="Bound">w</a><a id="16706" class="Symbol">}</a> <a id="16708" href="../Adequacy/#16708" class="Bound">d</a><a id="16709" class="Symbol">)</a> <a id="16711" href="../Adequacy/#16711" class="Bound">fv↦w</a> <a id="16716" class="Symbol">=</a>
    <a id="16722" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16724" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="16729" class="Symbol">(</a><a id="16730" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="16732" href="../Adequacy/#16691" class="Bound">N</a><a id="16733" class="Symbol">)</a> <a id="16735" href="../Adequacy/#16669" class="Bound">γ'</a> <a id="16738" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16740" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="16742" href="../BigStep/#4030" class="InductiveConstructor">⇓-lam</a> <a id="16748" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="16750" href="../Adequacy/#16766" class="Function">E</a> <a id="16752" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="16754" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="16760" class="Keyword">where</a> <a id="16766" href="../Adequacy/#16766" class="Function">E</a> <a id="16768" class="Symbol">:</a> <a id="16770" class="Symbol">{</a><a id="16771" href="../Adequacy/#16771" class="Bound">c</a> <a id="16773" class="Symbol">:</a> <a id="16775" href="../BigStep/#3125" class="Datatype">Clos</a><a id="16779" class="Symbol">}</a> <a id="16781" class="Symbol">→</a> <a id="16783" href="../Adequacy/#7246" class="Function">𝔼</a> <a id="16785" href="../Adequacy/#16698" class="Bound">v</a> <a id="16787" href="../Adequacy/#16771" class="Bound">c</a> <a id="16789" class="Symbol">→</a> <a id="16791" href="../Adequacy/#4169" class="Function">above-fun</a> <a id="16801" href="../Adequacy/#16705" class="Bound">w</a>
            <a id="16815" class="Symbol">→</a> <a id="16817" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="16820" href="../Adequacy/#16820" class="Bound">c'</a> <a id="16823" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="16825" href="../BigStep/#3125" class="Datatype">Clos</a> <a id="16830" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="16832" class="Symbol">(</a><a id="16833" href="../Adequacy/#16669" class="Bound">γ'</a> <a id="16836" href="../BigStep/#3361" class="Function Operator">,'</a> <a id="16839" href="../Adequacy/#16771" class="Bound">c</a><a id="16840" class="Symbol">)</a> <a id="16842" href="../BigStep/#3826" class="Datatype Operator">⊢</a> <a id="16844" href="../Adequacy/#16691" class="Bound">N</a> <a id="16846" href="../BigStep/#3826" class="Datatype Operator">⇓</a> <a id="16848" href="../Adequacy/#16820" class="Bound">c'</a>  <a id="16852" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a>  <a id="16855" href="../Adequacy/#7223" class="Function">𝕍</a> <a id="16857" href="../Adequacy/#16705" class="Bound">w</a> <a id="16859" href="../Adequacy/#16820" class="Bound">c'</a>
          <a id="16872" href="../Adequacy/#16766" class="Function">E</a> <a id="16874" class="Symbol">{</a><a id="16875" href="../Adequacy/#16875" class="Bound">c</a><a id="16876" class="Symbol">}</a> <a id="16878" href="../Adequacy/#16878" class="Bound">𝔼vc</a> <a id="16882" href="../Adequacy/#16882" class="Bound">fw</a> <a id="16885" class="Symbol">=</a> <a id="16887" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16891" class="Symbol">(λ</a> <a id="16894" class="Symbol">{</a><a id="16895" href="../Adequacy/#16895" class="Bound">x</a><a id="16896" class="Symbol">}</a> <a id="16898" class="Symbol">→</a> <a id="16900" href="../Adequacy/#9047" class="Function">𝔾-ext</a><a id="16905" class="Symbol">{</a><a id="16906" href="../Adequacy/#16661" class="Bound">Γ</a><a id="16907" class="Symbol">}{</a><a id="16909" href="../Adequacy/#16665" class="Bound">γ</a><a id="16910" class="Symbol">}{</a><a id="16912" href="../Adequacy/#16669" class="Bound">γ'</a><a id="16914" class="Symbol">}</a> <a id="16916" href="../Adequacy/#16673" class="Bound">𝔾γγ'</a> <a id="16921" href="../Adequacy/#16878" class="Bound">𝔼vc</a> <a id="16925" class="Symbol">{</a><a id="16926" href="../Adequacy/#16895" class="Bound">x</a><a id="16927" class="Symbol">})</a> <a id="16930" href="../Adequacy/#16708" class="Bound">d</a> <a id="16932" href="../Adequacy/#16882" class="Bound">fw</a>
<a id="16935" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16939" href="../Adequacy/#16939" class="Bound">𝔾γγ'</a> <a id="16944" href="../Denotational/#9625" class="InductiveConstructor">⊥-intro</a> <a id="16952" href="../Adequacy/#16952" class="Bound">f⊥</a> <a id="16955" class="Symbol">=</a> <a id="16957" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="16964" class="Symbol">(</a><a id="16965" href="../Adequacy/#4579" class="Function">above-fun⊥</a> <a id="16976" href="../Adequacy/#16952" class="Bound">f⊥</a><a id="16978" class="Symbol">)</a>
<a id="16980" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="16984" href="../Adequacy/#16984" class="Bound">𝔾γγ'</a> <a id="16989" class="Symbol">(</a><a id="16990" href="../Denotational/#9692" class="InductiveConstructor">⊔-intro</a><a id="16997" class="Symbol">{</a><a id="16998" class="Argument">v</a> <a id="17000" class="Symbol">=</a> <a id="17002" href="../Adequacy/#17002" class="Bound">v₁</a><a id="17004" class="Symbol">}{</a><a id="17006" class="Argument">w</a> <a id="17008" class="Symbol">=</a> <a id="17010" href="../Adequacy/#17010" class="Bound">v₂</a><a id="17012" class="Symbol">}</a> <a id="17014" href="../Adequacy/#17014" class="Bound">d₁</a> <a id="17017" href="../Adequacy/#17017" class="Bound">d₂</a><a id="17019" class="Symbol">)</a> <a id="17021" href="../Adequacy/#17021" class="Bound">fv12</a>
    <a id="17030" class="Keyword">with</a> <a id="17035" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="17046" href="../Adequacy/#17002" class="Bound">v₁</a> <a id="17049" class="Symbol">|</a> <a id="17051" href="../Adequacy/#6364" class="Function">above-fun?</a> <a id="17062" href="../Adequacy/#17010" class="Bound">v₂</a>
<a id="17065" class="Symbol">...</a> <a id="17069" class="Symbol">|</a> <a id="17071" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="17075" href="../Adequacy/#17075" class="Bound">fv1</a> <a id="17079" class="Symbol">|</a> <a id="17081" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="17085" href="../Adequacy/#17085" class="Bound">fv2</a>
    <a id="17093" class="Keyword">with</a> <a id="17098" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17102" class="Bound">𝔾γγ'</a> <a id="17107" class="Bound">d₁</a> <a id="17110" href="../Adequacy/#17075" class="Bound">fv1</a> <a id="17114" class="Symbol">|</a> <a id="17116" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17120" class="Bound">𝔾γγ'</a> <a id="17125" class="Bound">d₂</a> <a id="17128" href="../Adequacy/#17085" class="Bound">fv2</a>
<a id="17132" class="Symbol">...</a> <a id="17136" class="Symbol">|</a> <a id="17138" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17140" href="../Adequacy/#17140" class="Bound">c₁</a> <a id="17143" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17145" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17147" href="../Adequacy/#17147" class="Bound">M⇓c₁</a> <a id="17152" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17154" href="../Adequacy/#17154" class="Bound">𝕍v₁</a> <a id="17158" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17160" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17162" class="Symbol">|</a> <a id="17164" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17166" href="../Adequacy/#17166" class="Bound">c₂</a> <a id="17169" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17171" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17173" href="../Adequacy/#17173" class="Bound">M⇓c₂</a> <a id="17178" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17180" href="../Adequacy/#17180" class="Bound">𝕍v₂</a> <a id="17184" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17186" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="17192" class="Keyword">rewrite</a> <a id="17200" href="../BigStep/#5880" class="Function">⇓-determ</a> <a id="17209" href="../Adequacy/#17173" class="Bound">M⇓c₂</a> <a id="17214" href="../Adequacy/#17147" class="Bound">M⇓c₁</a> <a id="17219" class="Symbol">=</a>
    <a id="17225" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17227" href="../Adequacy/#17140" class="Bound">c₁</a> <a id="17230" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17232" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17234" href="../Adequacy/#17147" class="Bound">M⇓c₁</a> <a id="17239" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17241" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="17250" href="../Adequacy/#17154" class="Bound">𝕍v₁</a> <a id="17254" href="../Adequacy/#17180" class="Bound">𝕍v₂</a> <a id="17258" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17260" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="17262" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17266" href="../Adequacy/#17266" class="Bound">𝔾γγ'</a> <a id="17271" class="Symbol">(</a><a id="17272" href="../Denotational/#9692" class="InductiveConstructor">⊔-intro</a><a id="17279" class="Symbol">{</a><a id="17280" class="Argument">v</a> <a id="17282" class="Symbol">=</a> <a id="17284" href="../Adequacy/#17284" class="Bound">v₁</a><a id="17286" class="Symbol">}{</a><a id="17288" class="Argument">w</a> <a id="17290" class="Symbol">=</a> <a id="17292" href="../Adequacy/#17292" class="Bound">v₂</a><a id="17294" class="Symbol">}</a> <a id="17296" href="../Adequacy/#17296" class="Bound">d₁</a> <a id="17299" href="../Adequacy/#17299" class="Bound">d₂</a><a id="17301" class="Symbol">)</a> <a id="17303" href="../Adequacy/#17303" class="Bound">fv12</a> <a id="17308" class="Symbol">|</a> <a id="17310" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="17314" href="../Adequacy/#17314" class="Bound">fv1</a> <a id="17318" class="Symbol">|</a> <a id="17320" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="17323" href="../Adequacy/#17323" class="Bound">nfv2</a>
    <a id="17332" class="Keyword">with</a> <a id="17337" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17341" href="../Adequacy/#17266" class="Bound">𝔾γγ'</a> <a id="17346" href="../Adequacy/#17296" class="Bound">d₁</a> <a id="17349" href="../Adequacy/#17314" class="Bound">fv1</a>
<a id="17353" class="Symbol">...</a> <a id="17357" class="Symbol">|</a> <a id="17359" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17361" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="17366" class="Symbol">{</a><a id="17367" href="../Adequacy/#17367" class="Bound">Γ'</a><a id="17369" class="Symbol">}</a> <a id="17371" href="../Adequacy/#17371" class="Bound">M'</a> <a id="17374" href="../Adequacy/#17374" class="Bound">γ₁</a> <a id="17377" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17379" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17381" href="../Adequacy/#17381" class="Bound">M⇓c₁</a> <a id="17386" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17388" href="../Adequacy/#17388" class="Bound">𝕍v₁</a> <a id="17392" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17394" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="17400" class="Keyword">with</a> <a id="17405" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="17412" href="../Adequacy/#17388" class="Bound">𝕍v₁</a>
<a id="17416" class="Symbol">...</a> <a id="17420" class="Symbol">|</a> <a id="17422" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="17425" class="Symbol">{</a><a id="17426" class="Argument">N</a> <a id="17428" class="Symbol">=</a> <a id="17430" href="../Adequacy/#17430" class="Bound">N</a><a id="17431" class="Symbol">}</a> <a id="17433" class="Symbol">=</a>
    <a id="17439" class="Keyword">let</a> <a id="17443" href="../Adequacy/#17443" class="Bound">𝕍v₂</a> <a id="17447" class="Symbol">=</a> <a id="17449" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a><a id="17464" class="Symbol">{</a><a id="17465" class="Bound">v₂</a><a id="17467" class="Symbol">}{</a><a id="17469" class="Bound">Γ'</a><a id="17471" class="Symbol">}{</a><a id="17473" class="Bound">γ₁</a><a id="17475" class="Symbol">}{</a><a id="17477" href="../Adequacy/#17430" class="Bound">N</a><a id="17478" class="Symbol">}</a> <a id="17480" class="Bound">nfv2</a> <a id="17485" class="Keyword">in</a>
    <a id="17492" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17494" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="17499" class="Symbol">(</a><a id="17500" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="17502" href="../Adequacy/#17430" class="Bound">N</a><a id="17503" class="Symbol">)</a> <a id="17505" class="Bound">γ₁</a> <a id="17508" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17510" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17512" class="Bound">M⇓c₁</a> <a id="17517" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17519" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="17528" class="Bound">𝕍v₁</a> <a id="17532" href="../Adequacy/#17443" class="Bound">𝕍v₂</a> <a id="17536" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17538" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="17540" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17544" href="../Adequacy/#17544" class="Bound">𝔾γγ'</a> <a id="17549" class="Symbol">(</a><a id="17550" href="../Denotational/#9692" class="InductiveConstructor">⊔-intro</a><a id="17557" class="Symbol">{</a><a id="17558" class="Argument">v</a> <a id="17560" class="Symbol">=</a> <a id="17562" href="../Adequacy/#17562" class="Bound">v₁</a><a id="17564" class="Symbol">}{</a><a id="17566" class="Argument">w</a> <a id="17568" class="Symbol">=</a> <a id="17570" href="../Adequacy/#17570" class="Bound">v₂</a><a id="17572" class="Symbol">}</a> <a id="17574" href="../Adequacy/#17574" class="Bound">d₁</a> <a id="17577" href="../Adequacy/#17577" class="Bound">d₂</a><a id="17579" class="Symbol">)</a> <a id="17581" href="../Adequacy/#17581" class="Bound">fv12</a> <a id="17586" class="Symbol">|</a> <a id="17588" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="17591" href="../Adequacy/#17591" class="Bound">nfv1</a>  <a id="17597" class="Symbol">|</a> <a id="17599" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="17603" href="../Adequacy/#17603" class="Bound">fv2</a>
    <a id="17611" class="Keyword">with</a> <a id="17616" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17620" href="../Adequacy/#17544" class="Bound">𝔾γγ'</a> <a id="17625" href="../Adequacy/#17577" class="Bound">d₂</a> <a id="17628" href="../Adequacy/#17603" class="Bound">fv2</a>
<a id="17632" class="Symbol">...</a> <a id="17636" class="Symbol">|</a> <a id="17638" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17640" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="17645" class="Symbol">{</a><a id="17646" href="../Adequacy/#17646" class="Bound">Γ'</a><a id="17648" class="Symbol">}</a> <a id="17650" href="../Adequacy/#17650" class="Bound">M'</a> <a id="17653" href="../Adequacy/#17653" class="Bound">γ₁</a> <a id="17656" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17658" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17660" href="../Adequacy/#17660" class="Bound">M'⇓c₂</a> <a id="17666" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17668" href="../Adequacy/#17668" class="Bound">𝕍2c</a> <a id="17672" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17674" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="17680" class="Keyword">with</a> <a id="17685" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="17692" href="../Adequacy/#17668" class="Bound">𝕍2c</a>
<a id="17696" class="Symbol">...</a> <a id="17700" class="Symbol">|</a> <a id="17702" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="17705" class="Symbol">{</a><a id="17706" class="Argument">N</a> <a id="17708" class="Symbol">=</a> <a id="17710" href="../Adequacy/#17710" class="Bound">N</a><a id="17711" class="Symbol">}</a> <a id="17713" class="Symbol">=</a>
    <a id="17719" class="Keyword">let</a> <a id="17723" href="../Adequacy/#17723" class="Bound">𝕍1c</a> <a id="17727" class="Symbol">=</a> <a id="17729" href="../Adequacy/#10490" class="Function">not-above-fun-𝕍</a><a id="17744" class="Symbol">{</a><a id="17745" class="Bound">v₁</a><a id="17747" class="Symbol">}{</a><a id="17749" class="Bound">Γ'</a><a id="17751" class="Symbol">}{</a><a id="17753" class="Bound">γ₁</a><a id="17755" class="Symbol">}{</a><a id="17757" href="../Adequacy/#17710" class="Bound">N</a><a id="17758" class="Symbol">}</a> <a id="17760" class="Bound">nfv1</a> <a id="17765" class="Keyword">in</a>
    <a id="17772" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17774" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="17779" class="Symbol">(</a><a id="17780" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="17782" href="../Adequacy/#17710" class="Bound">N</a><a id="17783" class="Symbol">)</a> <a id="17785" class="Bound">γ₁</a> <a id="17788" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17790" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="17792" class="Bound">M'⇓c₂</a> <a id="17798" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="17800" href="../Adequacy/#9841" class="Function">𝕍⊔-intro</a> <a id="17809" href="../Adequacy/#17723" class="Bound">𝕍1c</a> <a id="17813" class="Bound">𝕍2c</a> <a id="17817" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="17819" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="17821" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="17825" href="../Adequacy/#17825" class="Bound">𝔾γγ'</a> <a id="17830" class="Symbol">(</a><a id="17831" href="../Denotational/#9692" class="InductiveConstructor">⊔-intro</a> <a id="17839" href="../Adequacy/#17839" class="Bound">d₁</a> <a id="17842" href="../Adequacy/#17842" class="Bound">d₂</a><a id="17844" class="Symbol">)</a> <a id="17846" href="../Adequacy/#17846" class="Bound">fv12</a> <a id="17851" class="Symbol">|</a> <a id="17853" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="17856" href="../Adequacy/#17856" class="Bound">nfv1</a>  <a id="17862" class="Symbol">|</a> <a id="17864" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="17867" href="../Adequacy/#17867" class="Bound">nfv2</a>
    <a id="17876" class="Keyword">with</a> <a id="17881" href="../Adequacy/#4886" class="Function">above-fun-⊔</a> <a id="17893" href="../Adequacy/#17846" class="Bound">fv12</a>
<a id="17898" class="Symbol">...</a> <a id="17902" class="Symbol">|</a> <a id="17904" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="17909" href="../Adequacy/#17909" class="Bound">fv1</a> <a id="17913" class="Symbol">=</a> <a id="17915" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="17922" class="Symbol">(</a><a id="17923" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="17937" href="../Adequacy/#17909" class="Bound">fv1</a> <a id="17941" class="Bound">nfv1</a><a id="17945" class="Symbol">)</a>
<a id="17947" class="Symbol">...</a> <a id="17951" class="Symbol">|</a> <a id="17953" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="17958" href="../Adequacy/#17958" class="Bound">fv2</a> <a id="17962" class="Symbol">=</a> <a id="17964" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="17971" class="Symbol">(</a><a id="17972" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a> <a id="17986" href="../Adequacy/#17958" class="Bound">fv2</a> <a id="17990" class="Bound">nfv2</a><a id="17994" class="Symbol">)</a>
<a id="17996" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="18000" class="Symbol">{</a><a id="18001" href="../Adequacy/#18001" class="Bound">Γ</a><a id="18002" class="Symbol">}</a> <a id="18004" class="Symbol">{</a><a id="18005" href="../Adequacy/#18005" class="Bound">γ</a><a id="18006" class="Symbol">}</a> <a id="18008" class="Symbol">{</a><a id="18009" href="../Adequacy/#18009" class="Bound">γ'</a><a id="18011" class="Symbol">}</a> <a id="18013" class="Symbol">{</a><a id="18014" href="../Adequacy/#18014" class="Bound">M</a><a id="18015" class="Symbol">}</a> <a id="18017" class="Symbol">{</a><a id="18018" href="../Adequacy/#18018" class="Bound">v'</a><a id="18020" class="Symbol">}</a> <a id="18022" href="../Adequacy/#18022" class="Bound">𝔾γγ'</a> <a id="18027" class="Symbol">(</a><a id="18028" href="../Denotational/#9807" class="InductiveConstructor">sub</a><a id="18031" class="Symbol">{</a><a id="18032" class="Argument">v</a> <a id="18034" class="Symbol">=</a> <a id="18036" href="../Adequacy/#18036" class="Bound">v</a><a id="18037" class="Symbol">}</a> <a id="18039" href="../Adequacy/#18039" class="Bound">d</a> <a id="18041" href="../Adequacy/#18041" class="Bound">v'⊑v</a><a id="18045" class="Symbol">)</a> <a id="18047" href="../Adequacy/#18047" class="Bound">fv'</a>
    <a id="18055" class="Keyword">with</a> <a id="18060" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="18064" class="Symbol">{</a><a id="18065" href="../Adequacy/#18001" class="Bound">Γ</a><a id="18066" class="Symbol">}</a> <a id="18068" class="Symbol">{</a><a id="18069" href="../Adequacy/#18005" class="Bound">γ</a><a id="18070" class="Symbol">}</a> <a id="18072" class="Symbol">{</a><a id="18073" href="../Adequacy/#18009" class="Bound">γ'</a><a id="18075" class="Symbol">}</a> <a id="18077" class="Symbol">{</a><a id="18078" href="../Adequacy/#18014" class="Bound">M</a><a id="18079" class="Symbol">}</a> <a id="18081" href="../Adequacy/#18022" class="Bound">𝔾γγ'</a> <a id="18086" href="../Adequacy/#18039" class="Bound">d</a> <a id="18088" class="Symbol">(</a><a id="18089" href="../Adequacy/#4340" class="Function">above-fun-⊑</a> <a id="18101" href="../Adequacy/#18047" class="Bound">fv'</a> <a id="18105" href="../Adequacy/#18041" class="Bound">v'⊑v</a><a id="18109" class="Symbol">)</a>
<a id="18111" class="Symbol">...</a> <a id="18115" class="Symbol">|</a> <a id="18117" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="18119" href="../Adequacy/#18119" class="Bound">c</a> <a id="18121" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="18123" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="18125" href="../Adequacy/#18125" class="Bound">M⇓c</a> <a id="18129" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="18131" href="../Adequacy/#18131" class="Bound">𝕍v</a> <a id="18134" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="18136" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="18138" class="Symbol">=</a>
      <a id="18146" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="18148" href="../Adequacy/#18119" class="Bound">c</a> <a id="18150" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="18152" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="18154" href="../Adequacy/#18125" class="Bound">M⇓c</a> <a id="18158" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="18160" href="../Adequacy/#10926" class="Function">sub-𝕍</a> <a id="18166" href="../Adequacy/#18131" class="Bound">𝕍v</a> <a id="18169" class="Bound">v'⊑v</a> <a id="18174" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="18176" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<ul>
<li><p>Case <code>var</code>. Looking up <code>x</code> in <code>γ'</code> yields some closure, <code>clos M' δ</code>, and from <code>𝔾 γ γ'</code> we have <code>𝔼 (γ x) (clos M' δ)</code>. With the premise <code>above-fun (γ x)</code>, we obtain a closure <code>c</code> such that <code>δ ⊢ M' ⇓ c</code> and <code>𝕍 (γ x) c</code>. To conclude <code>γ' ⊢ x ⇓ c</code> via <code>⇓-var</code>, we need <code>γ' x ≡ clos M' δ</code>, which is obvious, but it requires some Agda shananigans via the <code>kth-x</code> lemma to get our hands on it.</p></li>
<li><p>Case <code>↦-elim</code>. We have <code>γ ⊢ L · M ↓ v</code>. The induction hypothesis for <code>γ ⊢ L ↓ v₁ ↦ v</code> gives us <code>γ' ⊢ L ⇓ clos L' δ</code> and <code>𝕍 v (clos L' δ)</code>. Of course, <code>L' ≡ ƛ N</code> for some <code>N</code>. By the induction hypothesis for <code>γ ⊢ M ↓ v₁</code>, we have <code>𝔼 v₁ (clos M γ')</code>. Together with the premise <code>above-fun v</code> and <code>𝕍 v (clos L' δ)</code>, we obtain a closure <code>c'</code> such that <code>δ ⊢ N ⇓ c'</code> and <code>𝕍 v c'</code>. We conclude that <code>γ' ⊢ L · M ⇓ c'</code> by rule <code>⇓-app</code>.</p></li>
<li><p>Case <code>↦-intro</code>. We have <code>γ ⊢ ƛ N ↓ v ↦ w</code>. We immediately have <code>γ' ⊢ ƛ M ⇓ clos (ƛ M) γ'</code> by rule <code>⇓-lam</code>. But we also need to prove <code>𝕍 (v ↦ w) (clos (ƛ N) γ')</code>. Let <code>c</code> by an arbitrary closure such that <code>𝔼 v c</code>. Suppose <code>v'</code> is greater than a function value. We need to show that <code>γ' , c ⊢ N ⇓ c'</code> and <code>𝕍 v' c'</code> for some <code>c'</code>. We prove this by the induction hypothesis for <code>γ , v ⊢ N ↓ v'</code> but we must first show that <code>𝔾 (γ , v) (γ' , c)</code>. We prove that by the lemma <code>𝔾-ext</code>, using facts <code>𝔾 γ γ'</code> and <code>𝔼 v c</code>.</p></li>
<li><p>Case <code>⊥-intro</code>. We have the premise <code>above-fun ⊥</code>, but that’s impossible.</p></li>
<li><p>Case <code>⊔-intro</code>. We have <code>γ ⊢ M ↓ (v₁ ⊔ v₂)</code> and <code>above-fun (v₁ ⊔ v₂)</code> and need to show <code>γ' ⊢ M ↓ c</code> and <code>𝕍 (v₁ ⊔ v₂) c</code> for some <code>c</code>. Again, by <code>above-fun-⊔</code>, at least one of <code>v₁</code> or <code>v₂</code> is greater than a function.</p>
<ul>
<li><p>Suppose both <code>v₁</code> and <code>v₂</code> are greater than a function value. By the induction hypotheses for <code>γ ⊢ M ↓ v₁</code> and <code>γ ⊢ M ↓ v₂</code> we have <code>γ' ⊢ M ⇓ c₁</code>, <code>𝕍 v₁ c₁</code>, <code>γ' ⊢ M ⇓ c₂</code>, and <code>𝕍 v₂ c₂</code> for some <code>c₁</code> and <code>c₂</code>. Because <code>⇓</code> is deterministic, we have <code>c₂ ≡ c₁</code>. Then by <code>𝕍⊔-intro</code> we conclude that <code>𝕍 (v₁ ⊔ v₂) c₁</code>.</p></li>
<li><p>Without loss of generality, suppose <code>v₁</code> is greater than a function value but <code>v₂</code> is not. By the induction hypotheses for <code>γ ⊢ M ↓ v₁</code>, and using <code>𝕍→WHNF</code>, we have <code>γ' ⊢ M ⇓ clos (ƛ N) γ₁</code> and <code>𝕍 v₁ (clos (ƛ N) γ₁)</code>. Then because <code>v₂</code> is not greater than a function, we also have <code>𝕍 v₂ (clos (ƛ N) γ₁)</code>. We conclude that <code>𝕍 (v₁ ⊔ v₂) (clos (ƛ N) γ₁)</code>.</p></li>
</ul></li>
<li><p>Case <code>sub</code>. We have <code>γ ⊢ M ↓ v</code>, <code>v' ⊑ v</code>, and <code>above-fun v'</code>. We need to show that <code>γ' ⊢ M ⇓ c</code> and <code>𝕍 v' c</code> for some <code>c</code>. We have <code>above-fun v</code> by <code>above-fun-⊑</code>, so the induction hypothesis for <code>γ ⊢ M ↓ v</code> gives us a closure <code>c</code> such that <code>γ' ⊢ M ⇓ c</code> and <code>𝕍 v c</code>. We conclude that <code>𝕍 v' c</code> by <code>sub-𝕍</code>.</p></li>
</ul>
<h2 id="proof-of-denotational-adequacy">Proof of denotational adequacy</h2>
<p>From the main lemma we can directly show that <code>ℰ M ≃ ℰ (ƛ N)</code> implies that <code>M</code> big-steps to a lambda, i.e., <code>∅ ⊢ M ⇓ clos (ƛ N′) γ</code>.</p>
<pre class="Agda"><a id="↓→⇓"></a><a id="21063" href="../Adequacy/#21063" class="Function">↓→⇓</a> <a id="21067" class="Symbol">:</a> <a id="21069" class="Symbol">∀{</a><a id="21071" href="../Adequacy/#21071" class="Bound">M</a> <a id="21073" class="Symbol">:</a> <a id="21075" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="21077" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="21079" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="21080" class="Symbol">}{</a><a id="21082" href="../Adequacy/#21082" class="Bound">N</a> <a id="21084" class="Symbol">:</a> <a id="21086" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="21088" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="21090" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="21092" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="21094" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="21095" class="Symbol">}</a>  <a id="21098" class="Symbol">→</a>  <a id="21101" href="../Denotational/#17402" class="Function">ℰ</a> <a id="21103" href="../Adequacy/#21071" class="Bound">M</a> <a id="21105" href="../Denotational/#17584" class="Function Operator">≃</a> <a id="21107" href="../Denotational/#17402" class="Function">ℰ</a> <a id="21109" class="Symbol">(</a><a id="21110" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="21112" href="../Adequacy/#21082" class="Bound">N</a><a id="21113" class="Symbol">)</a>
         <a id="21124" class="Symbol">→</a>  <a id="21127" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="21130" href="../Adequacy/#21130" class="Bound">Γ</a> <a id="21132" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="21134" href="../Untyped/#3135" class="Datatype">Context</a> <a id="21142" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="21144" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="21147" href="../Adequacy/#21147" class="Bound">N′</a> <a id="21150" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="21152" class="Symbol">(</a><a id="21153" href="../Adequacy/#21130" class="Bound">Γ</a> <a id="21155" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="21157" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="21159" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="21161" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="21162" class="Symbol">)</a> <a id="21164" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="21166" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="21169" href="../Adequacy/#21169" class="Bound">γ</a> <a id="21171" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="21173" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="21181" href="../Adequacy/#21130" class="Bound">Γ</a> <a id="21183" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a>
            <a id="21197" href="../BigStep/#3339" class="Function">∅'</a> <a id="21200" href="../BigStep/#3826" class="Datatype Operator">⊢</a> <a id="21202" href="../Adequacy/#21071" class="Bound">M</a> <a id="21204" href="../BigStep/#3826" class="Datatype Operator">⇓</a> <a id="21206" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="21211" class="Symbol">(</a><a id="21212" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="21214" href="../Adequacy/#21147" class="Bound">N′</a><a id="21216" class="Symbol">)</a> <a id="21218" href="../Adequacy/#21169" class="Bound">γ</a>
<a id="21220" href="../Adequacy/#21063" class="Function">↓→⇓</a><a id="21223" class="Symbol">{</a><a id="21224" href="../Adequacy/#21224" class="Bound">M</a><a id="21225" class="Symbol">}{</a><a id="21227" href="../Adequacy/#21227" class="Bound">N</a><a id="21228" class="Symbol">}</a> <a id="21230" href="../Adequacy/#21230" class="Bound">eq</a>
    <a id="21237" class="Keyword">with</a> <a id="21242" href="../Adequacy/#16026" class="Function">↓→𝔼</a> <a id="21246" href="../Adequacy/#9023" class="Function">𝔾-∅</a> <a id="21250" class="Symbol">((</a><a id="21252" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="21258" class="Symbol">(</a><a id="21259" href="../Adequacy/#21230" class="Bound">eq</a> <a id="21262" href="../Denotational/#7328" class="Function">`∅</a> <a id="21265" class="Symbol">(</a><a id="21266" href="../Denotational/#4087" class="InductiveConstructor">⊥</a> <a id="21268" href="../Denotational/#4099" class="InductiveConstructor Operator">↦</a> <a id="21270" href="../Denotational/#4087" class="InductiveConstructor">⊥</a><a id="21271" class="Symbol">)))</a> <a id="21275" class="Symbol">(</a><a id="21276" href="../Denotational/#9513" class="InductiveConstructor">↦-intro</a> <a id="21284" href="../Denotational/#9625" class="InductiveConstructor">⊥-intro</a><a id="21291" class="Symbol">))</a>
                 <a id="21311" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21313" href="../Denotational/#4087" class="InductiveConstructor">⊥</a> <a id="21315" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21317" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21319" href="../Denotational/#4087" class="InductiveConstructor">⊥</a> <a id="21321" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21323" href="../Denotational/#5554" class="Function">⊑-refl</a> <a id="21330" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="21332" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
<a id="21334" class="Symbol">...</a> <a id="21338" class="Symbol">|</a> <a id="21340" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21342" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="21347" class="Symbol">{</a><a id="21348" href="../Adequacy/#21348" class="Bound">Γ</a><a id="21349" class="Symbol">}</a> <a id="21351" href="../Adequacy/#21351" class="Bound">M′</a> <a id="21354" href="../Adequacy/#21354" class="Bound">γ</a> <a id="21356" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21358" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21360" href="../Adequacy/#21360" class="Bound">M⇓c</a> <a id="21364" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21366" href="../Adequacy/#21366" class="Bound">Vc</a> <a id="21369" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="21371" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
    <a id="21377" class="Keyword">with</a> <a id="21382" href="../Adequacy/#9528" class="Function">𝕍→WHNF</a> <a id="21389" href="../Adequacy/#21366" class="Bound">Vc</a>
<a id="21392" class="Symbol">...</a> <a id="21396" class="Symbol">|</a> <a id="21398" href="../Adequacy/#9421" class="InductiveConstructor Operator">ƛ_</a> <a id="21401" class="Symbol">{</a><a id="21402" class="Argument">N</a> <a id="21404" class="Symbol">=</a> <a id="21406" href="../Adequacy/#21406" class="Bound">N′</a><a id="21408" class="Symbol">}</a> <a id="21410" class="Symbol">=</a>
    <a id="21416" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21418" class="Bound">Γ</a> <a id="21420" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21422" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21424" href="../Adequacy/#21406" class="Bound">N′</a> <a id="21427" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21429" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21431" class="Bound">γ</a> <a id="21433" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21435" class="Bound">M⇓c</a> <a id="21439" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>  <a id="21442" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="21444" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<p>The proof goes as follows. We derive <code>∅ ⊢ ƛ N ↓ ⊥ ↦ ⊥</code> and then <code>ℰ M ≃ ℰ (ƛ N)</code> gives us <code>∅ ⊢ M ↓ ⊥ ↦ ⊥</code>. We conclude by applying the main lemma to obtain <code>∅ ⊢ M ⇓ clos (ƛ N′) γ</code> for some <code>N′</code> and <code>γ</code>.</p>
<p>Now to prove the adequacy property. We apply the above lemma to obtain <code>∅ ⊢ M ⇓ clos (ƛ N′) γ</code> and then apply <code>cbn→reduce</code> to conclude.</p>
<pre class="Agda"><a id="adequacy"></a><a id="21795" href="../Adequacy/#21795" class="Function">adequacy</a> <a id="21804" class="Symbol">:</a> <a id="21806" class="Symbol">∀{</a><a id="21808" href="../Adequacy/#21808" class="Bound">M</a> <a id="21810" class="Symbol">:</a> <a id="21812" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="21814" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="21816" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="21817" class="Symbol">}{</a><a id="21819" href="../Adequacy/#21819" class="Bound">N</a> <a id="21821" class="Symbol">:</a> <a id="21823" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="21825" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="21827" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="21829" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="21831" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="21832" class="Symbol">}</a>
   <a id="21837" class="Symbol">→</a>  <a id="21840" href="../Denotational/#17402" class="Function">ℰ</a> <a id="21842" href="../Adequacy/#21808" class="Bound">M</a> <a id="21844" href="../Denotational/#17584" class="Function Operator">≃</a> <a id="21846" href="../Denotational/#17402" class="Function">ℰ</a> <a id="21848" class="Symbol">(</a><a id="21849" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="21851" href="../Adequacy/#21819" class="Bound">N</a><a id="21852" class="Symbol">)</a>
   <a id="21857" class="Symbol">→</a> <a id="21859" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="21862" href="../Adequacy/#21862" class="Bound">N′</a> <a id="21865" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="21867" class="Symbol">(</a><a id="21868" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="21870" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="21872" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="21874" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="21876" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="21877" class="Symbol">)</a> <a id="21879" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a>
     <a id="21886" class="Symbol">(</a><a id="21887" href="../Adequacy/#21808" class="Bound">M</a> <a id="21889" href="../Untyped/#11050" class="Datatype Operator">—↠</a> <a id="21892" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="21894" href="../Adequacy/#21862" class="Bound">N′</a><a id="21896" class="Symbol">)</a>
<a id="21898" href="../Adequacy/#21795" class="Function">adequacy</a><a id="21906" class="Symbol">{</a><a id="21907" href="../Adequacy/#21907" class="Bound">M</a><a id="21908" class="Symbol">}{</a><a id="21910" href="../Adequacy/#21910" class="Bound">N</a><a id="21911" class="Symbol">}</a> <a id="21913" href="../Adequacy/#21913" class="Bound">eq</a>
    <a id="21920" class="Keyword">with</a> <a id="21925" href="../Adequacy/#21063" class="Function">↓→⇓</a> <a id="21929" href="../Adequacy/#21913" class="Bound">eq</a>
<a id="21932" class="Symbol">...</a> <a id="21936" class="Symbol">|</a> <a id="21938" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21940" href="../Adequacy/#21940" class="Bound">Γ</a> <a id="21942" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21944" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21946" href="../Adequacy/#21946" class="Bound">N′</a> <a id="21949" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21951" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="21953" href="../Adequacy/#21953" class="Bound">γ</a> <a id="21955" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a> <a id="21957" href="../Adequacy/#21957" class="Bound">M⇓</a> <a id="21960" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="21962" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="21964" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a> <a id="21966" class="Symbol">=</a>
    <a id="21972" href="../BigStep/#16233" class="Function">cbn→reduce</a> <a id="21983" href="../Adequacy/#21957" class="Bound">M⇓</a>
</pre>
<h2 id="call-by-name-is-equivalent-to-beta-reduction">Call-by-name is equivalent to beta reduction</h2>
<p>As promised, we return to the question of whether call-by-name evaluation is equivalent to beta reduction. In chapter <a href="../BigStep/">BigStep</a> we established the forward direction: that if call-by-name produces a result, then the program beta reduces to a lambda abstraction (<code>cbn→reduce</code>). We now prove the backward direction of the if-and-only-if, leveraging our results about the denotational semantics.</p>
<pre class="Agda"><a id="reduce→cbn"></a><a id="22449" href="../Adequacy/#22449" class="Function">reduce→cbn</a> <a id="22460" class="Symbol">:</a> <a id="22462" class="Symbol">∀</a> <a id="22464" class="Symbol">{</a><a id="22465" href="../Adequacy/#22465" class="Bound">M</a> <a id="22467" class="Symbol">:</a> <a id="22469" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="22471" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="22473" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="22474" class="Symbol">}</a> <a id="22476" class="Symbol">{</a><a id="22477" href="../Adequacy/#22477" class="Bound">N</a> <a id="22479" class="Symbol">:</a> <a id="22481" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="22483" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="22485" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="22487" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="22489" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="22490" class="Symbol">}</a>
           <a id="22503" class="Symbol">→</a> <a id="22505" href="../Adequacy/#22465" class="Bound">M</a> <a id="22507" href="../Untyped/#11050" class="Datatype Operator">—↠</a> <a id="22510" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="22512" href="../Adequacy/#22477" class="Bound">N</a>
           <a id="22525" class="Symbol">→</a> <a id="22527" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="22530" href="../Adequacy/#22530" class="Bound">Δ</a> <a id="22532" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="22534" href="../Untyped/#3135" class="Datatype">Context</a> <a id="22542" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="22544" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="22547" href="../Adequacy/#22547" class="Bound">N′</a> <a id="22550" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="22552" href="../Adequacy/#22530" class="Bound">Δ</a> <a id="22554" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="22556" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="22558" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="22560" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="22562" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="22564" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="22567" href="../Adequacy/#22567" class="Bound">δ</a> <a id="22569" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="22571" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="22579" href="../Adequacy/#22530" class="Bound">Δ</a> <a id="22581" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a>
             <a id="22596" href="../BigStep/#3339" class="Function">∅'</a> <a id="22599" href="../BigStep/#3826" class="Datatype Operator">⊢</a> <a id="22601" href="../Adequacy/#22465" class="Bound">M</a> <a id="22603" href="../BigStep/#3826" class="Datatype Operator">⇓</a> <a id="22605" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="22610" class="Symbol">(</a><a id="22611" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="22613" href="../Adequacy/#22547" class="Bound">N′</a><a id="22615" class="Symbol">)</a> <a id="22617" href="../Adequacy/#22567" class="Bound">δ</a>
<a id="22619" href="../Adequacy/#22449" class="Function">reduce→cbn</a> <a id="22630" href="../Adequacy/#22630" class="Bound">M—↠ƛN</a> <a id="22636" class="Symbol">=</a> <a id="22638" href="../Adequacy/#21063" class="Function">↓→⇓</a> <a id="22642" class="Symbol">(</a><a id="22643" href="../Soundness/#23359" class="Function">soundness</a> <a id="22653" href="../Adequacy/#22630" class="Bound">M—↠ƛN</a><a id="22658" class="Symbol">)</a>
</pre>
<p>Suppose <code>M —↠ ƛ N</code>. Soundness of the denotational semantics gives us <code>ℰ M ≃ ℰ (ƛ N)</code>. Then by <code>↓→⇓</code> we conclude that <code>∅' ⊢ M ⇓ clos (ƛ N′) δ</code> for some <code>N′</code> and <code>δ</code>.</p>
<p>Putting the two directions of the if-and-only-if together, we establish that call-by-name evaluation is equivalent to beta reduction in the following sense.</p>
<pre class="Agda"><a id="cbn↔reduce"></a><a id="22993" href="../Adequacy/#22993" class="Function">cbn↔reduce</a> <a id="23004" class="Symbol">:</a> <a id="23006" class="Symbol">∀</a> <a id="23008" class="Symbol">{</a><a id="23009" href="../Adequacy/#23009" class="Bound">M</a> <a id="23011" class="Symbol">:</a> <a id="23013" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="23015" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="23017" href="../Untyped/#2870" class="InductiveConstructor">★</a><a id="23018" class="Symbol">}</a>
           <a id="23031" class="Symbol">→</a> <a id="23033" class="Symbol">(</a><a id="23034" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="23037" href="../Adequacy/#23037" class="Bound">N</a> <a id="23039" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="23041" href="../Untyped/#3157" class="InductiveConstructor">∅</a> <a id="23043" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="23045" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="23047" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="23049" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="23051" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="23053" class="Symbol">(</a><a id="23054" href="../Adequacy/#23009" class="Bound">M</a> <a id="23056" href="../Untyped/#11050" class="Datatype Operator">—↠</a> <a id="23059" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="23061" href="../Adequacy/#23037" class="Bound">N</a><a id="23062" class="Symbol">))</a>
             <a id="23078" href="../Denotational/#16923" class="Function Operator">iff</a>
             <a id="23095" class="Symbol">(</a><a id="23096" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="23099" href="../Adequacy/#23099" class="Bound">Δ</a> <a id="23101" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="23103" href="../Untyped/#3135" class="Datatype">Context</a> <a id="23111" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="23113" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="23116" href="../Adequacy/#23116" class="Bound">N′</a> <a id="23119" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="23121" href="../Adequacy/#23099" class="Bound">Δ</a> <a id="23123" href="../Untyped/#3173" class="InductiveConstructor Operator">,</a> <a id="23125" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="23127" href="../Untyped/#4276" class="Datatype Operator">⊢</a> <a id="23129" href="../Untyped/#2870" class="InductiveConstructor">★</a> <a id="23131" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="23133" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="23136" href="../Adequacy/#23136" class="Bound">δ</a> <a id="23138" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="23140" href="../BigStep/#3095" class="Function">ClosEnv</a> <a id="23148" href="../Adequacy/#23099" class="Bound">Δ</a> <a id="23150" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a>
               <a id="23167" href="../BigStep/#3339" class="Function">∅'</a> <a id="23170" href="../BigStep/#3826" class="Datatype Operator">⊢</a> <a id="23172" href="../Adequacy/#23009" class="Bound">M</a> <a id="23174" href="../BigStep/#3826" class="Datatype Operator">⇓</a> <a id="23176" href="../BigStep/#3144" class="InductiveConstructor">clos</a> <a id="23181" class="Symbol">(</a><a id="23182" href="../Untyped/#4364" class="InductiveConstructor Operator">ƛ</a> <a id="23184" href="../Adequacy/#23116" class="Bound">N′</a><a id="23186" class="Symbol">)</a> <a id="23188" href="../Adequacy/#23136" class="Bound">δ</a><a id="23189" class="Symbol">)</a>
<a id="23191" href="../Adequacy/#22993" class="Function">cbn↔reduce</a> <a id="23202" class="Symbol">{</a><a id="23203" href="../Adequacy/#23203" class="Bound">M</a><a id="23204" class="Symbol">}</a> <a id="23206" class="Symbol">=</a> <a id="23208" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟨</a> <a id="23210" class="Symbol">(λ</a> <a id="23213" href="../Adequacy/#23213" class="Bound">x</a> <a id="23215" class="Symbol">→</a> <a id="23217" href="../Adequacy/#22449" class="Function">reduce→cbn</a> <a id="23228" class="Symbol">(</a><a id="23229" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="23235" href="../Adequacy/#23213" class="Bound">x</a><a id="23236" class="Symbol">))</a> <a id="23239" href="../Adequacy/#2970" class="InductiveConstructor Operator">,</a>
                   <a id="23260" class="Symbol">(λ</a> <a id="23263" href="../Adequacy/#23263" class="Bound">x</a> <a id="23265" class="Symbol">→</a> <a id="23267" href="../BigStep/#16233" class="Function">cbn→reduce</a> <a id="23278" class="Symbol">(</a><a id="23279" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="23285" class="Symbol">(</a><a id="23286" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="23292" class="Symbol">(</a><a id="23293" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="23299" href="../Adequacy/#23263" class="Bound">x</a><a id="23300" class="Symbol">))))</a> <a id="23305" href="../Adequacy/#2970" class="InductiveConstructor Operator">⟩</a>
</pre>
<h2 id="unicode">Unicode</h2>
<p>This chapter uses the following unicode:</p>
<pre><code>𝔼  U+1D53C  MATHEMATICAL DOUBLE-STRUCK CAPITAL E (\bE)
𝔾  U+1D53E  MATHEMATICAL DOUBLE-STRUCK CAPITAL G (\bG)
𝕍  U+1D53E  MATHEMATICAL DOUBLE-STRUCK CAPITAL V (\bV)</code></pre>
    </div>
    <nav class="pager">
    <ul class="pagination">
        
        <li><a class="pagelink" href="../Soundness/">上一章</a></li>
        <li class="separator">&bullet;</li>
        
        
        <li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/src/plfa/part3/Adequacy.lagda.md">源文件</a></li>
        <li class="separator">&bullet;</li>
        
        
        <li><a class="pagelink" href="../ContextualEquivalence/">下一章</a></li>
        <li class="separator">&bullet;</li>
        
    </ul>
</nav>

</article>

            </div>
        </main>
        <footer class="site-footer h-card">
    <data class="u-url" href="../"></data>
    <div class="wrapper">
        <h2 class="footer-heading">编程语言基础：Agda 语言描述</h2>
        
        
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Philip Wadler</li>
                    <li>
                        
                        <a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a>
                        
                    </li>
                </ul>
            </div>
            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
    
    <li><a rel="me" href="https://github.com/wadler" title="wadler"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#github"></use></svg>&nbsp;wadler</a></li>
    
    
</ul>

            </div>
            <div class="footer-col footer-col-3">
                
            </div>
        </div>
        
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Wen Kokke</li>
                    <li>
                        
                        <a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a>
                        
                    </li>
                </ul>
            </div>
            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
    
    <li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#github"></use></svg>&nbsp;wenkokke</a></li>
    
    
    <li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#twitter"></use></svg>&nbsp;wenkokke</a></li>
    
</ul>

            </div>
            <div class="footer-col footer-col-3">
                
            </div>
        </div>
        
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Jeremy G. Siek</li>
                    <li>
                        
                        <a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a>
                        
                    </li>
                </ul>
            </div>
            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
    
    <li><a rel="me" href="https://github.com/jsiek" title="jsiek"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#github"></use></svg>&nbsp;jsiek</a></li>
    
    
    <li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#twitter"></use></svg>&nbsp;jeremysiek</a></li>
    
</ul>

            </div>
            <div class="footer-col footer-col-3">
                
            </div>
        </div>
        
        
        This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
    </div>
</footer>

    </body>
</html>
