<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../../../public/css/style.css">
  
  <title>编程语言基础：Agda 语言描述 – Assignment3</title>
  
  
  
</head>

    <body>
        <header class="site-header">
    <div class="wrapper">
        <a class="site-title" href="../../../">编程语言基础：Agda 语言描述</a>
        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="../../../">主页</a>
                <a class="page-link" href="../../../Announcements/">公告</a>
                <a class="page-link" href="../../../GettingStarted/">使用说明</a>
                <a class="page-link" href="../../../Citing/">引用</a>
                <a class="page-link" href="https://plfa.github.io/">English</a>
            </div>
        </nav>
    </div>
</header>

        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                <article class="post">
    <nav class="pager">
    <ul class="pagination">
        
        
        <li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/courses/tspl/2019/Assignment3.lagda.md">源文件</a></li>
        <li class="separator">&bullet;</li>
        
        
    </ul>
</nav>

    <header class="post-header">
        <h1 class="post-title" id="tspl/2019/assignment3">Assignment3: TSPL Assignment 3</h1>
    </header>
    <div class="post-content">
        <pre class="Agda"><a id="112" class="Keyword">module</a> <a id="119" href="Assignment3.html" class="Module">Assignment3</a> <a id="131" class="Keyword">where</a>
</pre>
<h2 id="your-name-and-email-goes-here">YOUR NAME AND EMAIL GOES HERE</h2>
<h2 id="introduction">Introduction</h2>
<p>You must do <em>all</em> the exercises labelled “(recommended)”.</p>
<p>Exercises labelled “(stretch)” are there to provide an extra challenge. You don’t need to do all of these, but should attempt at least a few.</p>
<p>Exercises labelled “(practice)” are included for those who want extra practice.</p>
<p>Submit your homework using the “submit” command. Please ensure your files execute correctly under Agda!</p>
<h2 id="good-scholarly-practice.">Good Scholarly Practice.</h2>
<p>Please remember the University requirement as regards all assessed work. Details about this can be found at:</p>
<blockquote>
<p><a href="http://web.inf.ed.ac.uk/infweb/admin/policies/academic-misconduct">http://web.inf.ed.ac.uk/infweb/admin/policies/academic-misconduct</a></p>
</blockquote>
<p>Furthermore, you are required to take reasonable measures to protect your assessed work from unauthorised access. For example, if you put any such work on a public repository then you must set access permissions appropriately (generally permitting access only to yourself, or your group in the case of group practicals).</p>
<h2 id="imports">Imports</h2>
<pre class="Agda"><a id="1198" class="Keyword">import</a> <a id="1205" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1243" class="Symbol">as</a> <a id="1246" class="Module">Eq</a>
<a id="1249" class="Keyword">open</a> <a id="1254" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="1257" class="Keyword">using</a> <a id="1263" class="Symbol">(</a><a id="1264" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1267" class="Symbol">;</a> <a id="1269" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1273" class="Symbol">;</a> <a id="1275" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a><a id="1279" class="Symbol">;</a> <a id="1281" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a><a id="1284" class="Symbol">)</a>
<a id="1286" class="Keyword">open</a> <a id="1291" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#2419" class="Module">Eq.≡-Reasoning</a> <a id="1306" class="Keyword">using</a> <a id="1312" class="Symbol">(</a><a id="1313" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#2517" class="Function Operator">begin_</a><a id="1319" class="Symbol">;</a> <a id="1321" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#2575" class="Function Operator">_≡⟨⟩_</a><a id="1326" class="Symbol">;</a> <a id="1328" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#2634" class="Function">step-≡</a><a id="1334" class="Symbol">;</a> <a id="1336" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#2816" class="Function Operator">_∎</a><a id="1338" class="Symbol">)</a>
<a id="1340" class="Keyword">open</a> <a id="1345" class="Keyword">import</a> <a id="1352" href="https://agda.github.io/agda-stdlib/v1.3/Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="1367" class="Keyword">using</a> <a id="1373" class="Symbol">(</a><a id="1374" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="1378" class="Symbol">;</a> <a id="1380" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="1384" class="Symbol">;</a> <a id="1386" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="1391" class="Symbol">;</a> <a id="1393" href="https://agda.github.io/agda-stdlib/v1.3/Data.Bool.Base.html#1451" class="Function">T</a><a id="1394" class="Symbol">;</a> <a id="1396" href="https://agda.github.io/agda-stdlib/v1.3/Data.Bool.Base.html#986" class="Function Operator">_∧_</a><a id="1399" class="Symbol">;</a> <a id="1401" href="https://agda.github.io/agda-stdlib/v1.3/Data.Bool.Base.html#1044" class="Function Operator">_∨_</a><a id="1404" class="Symbol">;</a> <a id="1406" href="https://agda.github.io/agda-stdlib/v1.3/Data.Bool.Base.html#932" class="Function">not</a><a id="1409" class="Symbol">)</a>
<a id="1411" class="Keyword">open</a> <a id="1416" class="Keyword">import</a> <a id="1423" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.html" class="Module">Data.Nat</a> <a id="1432" class="Keyword">using</a> <a id="1438" class="Symbol">(</a><a id="1439" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="1440" class="Symbol">;</a> <a id="1442" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="1446" class="Symbol">;</a> <a id="1448" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="1451" class="Symbol">;</a> <a id="1453" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="1456" class="Symbol">;</a> <a id="1458" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#528" class="Primitive Operator">_*_</a><a id="1461" class="Symbol">;</a> <a id="1463" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1429" class="Primitive Operator">_∸_</a><a id="1466" class="Symbol">;</a> <a id="1468" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#937" class="Datatype Operator">_≤_</a><a id="1471" class="Symbol">;</a> <a id="1473" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1002" class="InductiveConstructor">s≤s</a><a id="1476" class="Symbol">;</a> <a id="1478" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a><a id="1481" class="Symbol">)</a>
<a id="1483" class="Keyword">open</a> <a id="1488" class="Keyword">import</a> <a id="1495" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1515" class="Keyword">using</a>
  <a id="1523" class="Symbol">(</a><a id="1524" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#12490" class="Function">+-assoc</a><a id="1531" class="Symbol">;</a> <a id="1533" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#12591" class="Function">+-identityˡ</a><a id="1544" class="Symbol">;</a> <a id="1546" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#12646" class="Function">+-identityʳ</a><a id="1557" class="Symbol">;</a> <a id="1559" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#20430" class="Function">*-assoc</a><a id="1566" class="Symbol">;</a> <a id="1568" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#19330" class="Function">*-identityˡ</a><a id="1579" class="Symbol">;</a> <a id="1581" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#19394" class="Function">*-identityʳ</a><a id="1592" class="Symbol">)</a>
<a id="1594" class="Keyword">open</a> <a id="1599" class="Keyword">import</a> <a id="1606" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1623" class="Keyword">using</a> <a id="1629" class="Symbol">(</a><a id="1630" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬_</a><a id="1632" class="Symbol">;</a> <a id="1634" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a><a id="1637" class="Symbol">;</a> <a id="1639" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="1642" class="Symbol">;</a> <a id="1644" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="1646" class="Symbol">)</a>
<a id="1648" class="Keyword">open</a> <a id="1653" class="Keyword">import</a> <a id="1660" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html" class="Module">Data.Product</a> <a id="1673" class="Keyword">using</a> <a id="1679" class="Symbol">(</a><a id="1680" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">_×_</a><a id="1683" class="Symbol">;</a> <a id="1685" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1369" class="Function">∃</a><a id="1686" class="Symbol">;</a> <a id="1688" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1788" class="Function">∃-syntax</a><a id="1696" class="Symbol">)</a> <a id="1698" class="Keyword">renaming</a> <a id="1707" class="Symbol">(</a><a id="1708" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="1712" class="Symbol">to</a> <a id="Builtin.Sigma._,_"></a><a id="1715" href="Assignment3.html#1715" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="1720" class="Symbol">)</a>
<a id="1722" class="Keyword">open</a> <a id="1727" class="Keyword">import</a> <a id="1734" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html" class="Module">Data.Empty</a> <a id="1745" class="Keyword">using</a> <a id="1751" class="Symbol">(</a><a id="1752" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#526" class="Datatype">⊥</a><a id="1753" class="Symbol">;</a> <a id="1755" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a><a id="1761" class="Symbol">)</a>
<a id="1763" class="Keyword">open</a> <a id="1768" class="Keyword">import</a> <a id="1775" href="https://agda.github.io/agda-stdlib/v1.3/Function.html" class="Module">Function</a> <a id="1784" class="Keyword">using</a> <a id="1790" class="Symbol">(</a><a id="1791" href="https://agda.github.io/agda-stdlib/v1.3/Function.Base.html#992" class="Function Operator">_∘_</a><a id="1794" class="Symbol">)</a>
<a id="1796" class="Keyword">open</a> <a id="1801" class="Keyword">import</a> <a id="1808" href="https://agda.github.io/agda-stdlib/v1.3/Algebra.Structures.html" class="Module">Algebra.Structures</a> <a id="1827" class="Keyword">using</a> <a id="1833" class="Symbol">(</a><a id="1834" href="https://agda.github.io/agda-stdlib/v1.3/Algebra.Structures.html#2523" class="Record">IsMonoid</a><a id="1842" class="Symbol">)</a>
<a id="1844" class="Keyword">open</a> <a id="1849" class="Keyword">import</a> <a id="1856" href="https://agda.github.io/agda-stdlib/v1.3/Level.html" class="Module">Level</a> <a id="1862" class="Keyword">using</a> <a id="1868" class="Symbol">(</a><a id="1869" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#423" class="Postulate">Level</a><a id="1874" class="Symbol">)</a>
<a id="1876" class="Keyword">open</a> <a id="1881" class="Keyword">import</a> <a id="1888" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Unary.html" class="Module">Relation.Unary</a> <a id="1903" class="Keyword">using</a> <a id="1909" class="Symbol">(</a><a id="1910" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Unary.html#3536" class="Function">Decidable</a><a id="1919" class="Symbol">)</a>
<a id="1921" class="Keyword">open</a> <a id="1926" class="Keyword">import</a> <a id="1933" href="../../../Relations/" class="Module">plfa.part1.Relations</a> <a id="1954" class="Keyword">using</a> <a id="1960" class="Symbol">(</a><a id="1961" href="../../../Relations/#26518" class="Datatype Operator">_&lt;_</a><a id="1964" class="Symbol">;</a> <a id="1966" href="../../../Relations/#26545" class="InductiveConstructor">z&lt;s</a><a id="1969" class="Symbol">;</a> <a id="1971" href="../../../Relations/#26602" class="InductiveConstructor">s&lt;s</a><a id="1974" class="Symbol">)</a>
<a id="1976" class="Keyword">open</a> <a id="1981" class="Keyword">import</a> <a id="1988" href="../../../Isomorphism/" class="Module">plfa.part1.Isomorphism</a> <a id="2011" class="Keyword">using</a> <a id="2017" class="Symbol">(</a><a id="2018" href="../../../Isomorphism/#5610" class="Record Operator">_≃_</a><a id="2021" class="Symbol">;</a> <a id="2023" href="../../../Isomorphism/#9206" class="Function">≃-sym</a><a id="2028" class="Symbol">;</a> <a id="2030" href="../../../Isomorphism/#9595" class="Function">≃-trans</a><a id="2037" class="Symbol">;</a> <a id="2039" href="../../../Isomorphism/#11701" class="Record Operator">_≲_</a><a id="2042" class="Symbol">;</a> <a id="2044" href="../../../Isomorphism/#3602" class="Postulate">extensionality</a><a id="2058" class="Symbol">)</a>
<a id="2060" class="Keyword">open</a> <a id="2065" href="../../../Isomorphism/#10791" class="Module">plfa.part1.Isomorphism.≃-Reasoning</a>
<a id="2100" class="Keyword">open</a> <a id="2105" class="Keyword">import</a> <a id="2112" href="../../../Lists/" class="Module">plfa.part1.Lists</a> <a id="2129" class="Keyword">using</a> <a id="2135" class="Symbol">(</a><a id="2136" href="../../../Lists/#1264" class="Datatype">List</a><a id="2140" class="Symbol">;</a> <a id="2142" href="../../../Lists/#1293" class="InductiveConstructor">[]</a><a id="2144" class="Symbol">;</a> <a id="2146" href="../../../Lists/#1308" class="InductiveConstructor Operator">_∷_</a><a id="2149" class="Symbol">;</a> <a id="2151" href="../../../Lists/#3724" class="InductiveConstructor Operator">[_]</a><a id="2154" class="Symbol">;</a> <a id="2156" href="../../../Lists/#3747" class="InductiveConstructor Operator">[_,_]</a><a id="2161" class="Symbol">;</a> <a id="2163" href="../../../Lists/#3778" class="InductiveConstructor Operator">[_,_,_]</a><a id="2170" class="Symbol">;</a> <a id="2172" href="../../../Lists/#3817" class="InductiveConstructor Operator">[_,_,_,_]</a><a id="2181" class="Symbol">;</a>
  <a id="2185" href="../../../Lists/#4535" class="Function Operator">_++_</a><a id="2189" class="Symbol">;</a> <a id="2191" href="../../../Lists/#10614" class="Function">reverse</a><a id="2198" class="Symbol">;</a> <a id="2200" href="../../../Lists/#16331" class="Function">map</a><a id="2203" class="Symbol">;</a> <a id="2205" href="../../../Lists/#19458" class="Function">foldr</a><a id="2210" class="Symbol">;</a> <a id="2212" href="../../../Lists/#20606" class="Function">sum</a><a id="2215" class="Symbol">;</a> <a id="2217" href="../../../Lists/#27578" class="Datatype">All</a><a id="2220" class="Symbol">;</a> <a id="2222" href="../../../Lists/#29676" class="Datatype">Any</a><a id="2225" class="Symbol">;</a> <a id="2227" href="../../../Lists/#29727" class="InductiveConstructor">here</a><a id="2231" class="Symbol">;</a> <a id="2233" href="../../../Lists/#29784" class="InductiveConstructor">there</a><a id="2238" class="Symbol">;</a> <a id="2240" href="../../../Lists/#30183" class="Function Operator">_∈_</a><a id="2243" class="Symbol">)</a>
<a id="2245" class="Keyword">open</a> <a id="2250" class="Keyword">import</a> <a id="2257" href="../../../Lambda/" class="Module">plfa.part2.Lambda</a> <a id="2275" class="Keyword">hiding</a> <a id="2282" class="Symbol">(</a><a id="2283" href="../../../Lambda/#10371" class="Function Operator">ƛ′_⇒_</a><a id="2288" class="Symbol">;</a> <a id="2290" href="../../../Lambda/#10492" class="Function Operator">case′_[zero⇒_|suc_⇒_]</a><a id="2311" class="Symbol">;</a> <a id="2313" href="../../../Lambda/#10706" class="Function Operator">μ′_⇒_</a><a id="2318" class="Symbol">;</a> <a id="2320" href="../../../Lambda/#11708" class="Function">plus′</a><a id="2325" class="Symbol">)</a>
<a id="2327" class="Keyword">open</a> <a id="2332" class="Keyword">import</a> <a id="2339" href="../../../Properties/" class="Module">plfa.part2.Properties</a> <a id="2361" class="Keyword">hiding</a> <a id="2368" class="Symbol">(</a><a id="2369" href="../../../Properties/#10102" class="Postulate">value?</a><a id="2375" class="Symbol">;</a> <a id="2377" href="../../../Properties/#40424" class="Postulate">unstuck</a><a id="2384" class="Symbol">;</a> <a id="2386" href="../../../Properties/#40624" class="Postulate">preserves</a><a id="2395" class="Symbol">;</a> <a id="2397" href="../../../Properties/#40861" class="Postulate">wttdgs</a><a id="2403" class="Symbol">)</a>
</pre>
<h2 id="lists">Lists</h2>
<h4 id="exercise-reverse--distrib-recommended">Exercise <code>reverse-++-distrib</code> (recommended)</h4>
<p>Show that the reverse of one list appended to another is the reverse of the second appended to the reverse of the first:</p>
<pre><code>reverse (xs ++ ys) ≡ reverse ys ++ reverse xs</code></pre>
<h4 id="exercise-reverse-involutive-recommended">Exercise <code>reverse-involutive</code> (recommended)</h4>
<p>A function is an <em>involution</em> if when applied twice it acts as the identity function. Show that reverse is an involution:</p>
<pre><code>reverse (reverse xs) ≡ xs</code></pre>
<h4 id="exercise-map-compose-practice">Exercise <code>map-compose</code> (practice)</h4>
<p>Prove that the map of a composition is equal to the composition of two maps:</p>
<pre><code>map (g ∘ f) ≡ map g ∘ map f</code></pre>
<p>The last step of the proof requires extensionality.</p>
<h4 id="exercise-map--distribute-practice">Exercise <code>map-++-distribute</code> (practice)</h4>
<p>Prove the following relationship between map and append:</p>
<p>map f (xs ++ ys) ≡ map f xs ++ map f ys</p>
<h4 id="exercise-map-tree-practice">Exercise <code>map-Tree</code> (practice)</h4>
Define a type of trees with leaves of type <code>A</code> and internal nodes of type <code>B</code>:
<pre class="Agda"><a id="3323" class="Keyword">data</a> <a id="Tree"></a><a id="3328" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3333" class="Symbol">(</a><a id="3334" href="Assignment3.html#3334" class="Bound">A</a> <a id="3336" href="Assignment3.html#3336" class="Bound">B</a> <a id="3338" class="Symbol">:</a> <a id="3340" class="PrimitiveType">Set</a><a id="3343" class="Symbol">)</a> <a id="3345" class="Symbol">:</a> <a id="3347" class="PrimitiveType">Set</a> <a id="3351" class="Keyword">where</a>
  <a id="Tree.leaf"></a><a id="3359" href="Assignment3.html#3359" class="InductiveConstructor">leaf</a> <a id="3364" class="Symbol">:</a> <a id="3366" href="Assignment3.html#3334" class="Bound">A</a> <a id="3368" class="Symbol">→</a> <a id="3370" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3375" href="Assignment3.html#3334" class="Bound">A</a> <a id="3377" href="Assignment3.html#3336" class="Bound">B</a>
  <a id="Tree.node"></a><a id="3381" href="Assignment3.html#3381" class="InductiveConstructor">node</a> <a id="3386" class="Symbol">:</a> <a id="3388" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3393" href="Assignment3.html#3334" class="Bound">A</a> <a id="3395" href="Assignment3.html#3336" class="Bound">B</a> <a id="3397" class="Symbol">→</a> <a id="3399" href="Assignment3.html#3336" class="Bound">B</a> <a id="3401" class="Symbol">→</a> <a id="3403" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3408" href="Assignment3.html#3334" class="Bound">A</a> <a id="3410" href="Assignment3.html#3336" class="Bound">B</a> <a id="3412" class="Symbol">→</a> <a id="3414" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3419" href="Assignment3.html#3334" class="Bound">A</a> <a id="3421" href="Assignment3.html#3336" class="Bound">B</a>
</pre>
Define a suitable map operator over trees:
<pre class="Agda"><a id="3474" class="Keyword">postulate</a>
  <a id="map-Tree"></a><a id="3486" href="Assignment3.html#3486" class="Postulate">map-Tree</a> <a id="3495" class="Symbol">:</a> <a id="3497" class="Symbol">∀</a> <a id="3499" class="Symbol">{</a><a id="3500" href="Assignment3.html#3500" class="Bound">A</a> <a id="3502" href="Assignment3.html#3502" class="Bound">B</a> <a id="3504" href="Assignment3.html#3504" class="Bound">C</a> <a id="3506" href="Assignment3.html#3506" class="Bound">D</a> <a id="3508" class="Symbol">:</a> <a id="3510" class="PrimitiveType">Set</a><a id="3513" class="Symbol">}</a>
    <a id="3519" class="Symbol">→</a> <a id="3521" class="Symbol">(</a><a id="3522" href="Assignment3.html#3500" class="Bound">A</a> <a id="3524" class="Symbol">→</a> <a id="3526" href="Assignment3.html#3504" class="Bound">C</a><a id="3527" class="Symbol">)</a> <a id="3529" class="Symbol">→</a> <a id="3531" class="Symbol">(</a><a id="3532" href="Assignment3.html#3502" class="Bound">B</a> <a id="3534" class="Symbol">→</a> <a id="3536" href="Assignment3.html#3506" class="Bound">D</a><a id="3537" class="Symbol">)</a> <a id="3539" class="Symbol">→</a> <a id="3541" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3546" href="Assignment3.html#3500" class="Bound">A</a> <a id="3548" href="Assignment3.html#3502" class="Bound">B</a> <a id="3550" class="Symbol">→</a> <a id="3552" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="3557" href="Assignment3.html#3504" class="Bound">C</a> <a id="3559" href="Assignment3.html#3506" class="Bound">D</a>
</pre>
<h4 id="exercise-product-recommended">Exercise <code>product</code> (recommended)</h4>
<p>Use fold to define a function to find the product of a list of numbers. For example:</p>
<pre><code>product [ 1 , 2 , 3 , 4 ] ≡ 24</code></pre>
<pre class="Agda"><a id="3732" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-foldr--recommended">Exercise <code>foldr-++</code> (recommended)</h4>
Show that fold and append are related as follows:
<pre class="Agda"><a id="3854" class="Keyword">postulate</a>
  <a id="foldr-++"></a><a id="3866" href="Assignment3.html#3866" class="Postulate">foldr-++</a> <a id="3875" class="Symbol">:</a> <a id="3877" class="Symbol">∀</a> <a id="3879" class="Symbol">{</a><a id="3880" href="Assignment3.html#3880" class="Bound">A</a> <a id="3882" href="Assignment3.html#3882" class="Bound">B</a> <a id="3884" class="Symbol">:</a> <a id="3886" class="PrimitiveType">Set</a><a id="3889" class="Symbol">}</a> <a id="3891" class="Symbol">(</a><a id="3892" href="Assignment3.html#3892" class="Bound Operator">_⊗_</a> <a id="3896" class="Symbol">:</a> <a id="3898" href="Assignment3.html#3880" class="Bound">A</a> <a id="3900" class="Symbol">→</a> <a id="3902" href="Assignment3.html#3882" class="Bound">B</a> <a id="3904" class="Symbol">→</a> <a id="3906" href="Assignment3.html#3882" class="Bound">B</a><a id="3907" class="Symbol">)</a> <a id="3909" class="Symbol">(</a><a id="3910" href="Assignment3.html#3910" class="Bound">e</a> <a id="3912" class="Symbol">:</a> <a id="3914" href="Assignment3.html#3882" class="Bound">B</a><a id="3915" class="Symbol">)</a> <a id="3917" class="Symbol">(</a><a id="3918" href="Assignment3.html#3918" class="Bound">xs</a> <a id="3921" href="Assignment3.html#3921" class="Bound">ys</a> <a id="3924" class="Symbol">:</a> <a id="3926" href="../../../Lists/#1264" class="Datatype">List</a> <a id="3931" href="Assignment3.html#3880" class="Bound">A</a><a id="3932" class="Symbol">)</a> <a id="3934" class="Symbol">→</a>
    <a id="3940" href="../../../Lists/#19458" class="Function">foldr</a> <a id="3946" href="Assignment3.html#3892" class="Bound Operator">_⊗_</a> <a id="3950" href="Assignment3.html#3910" class="Bound">e</a> <a id="3952" class="Symbol">(</a><a id="3953" href="Assignment3.html#3918" class="Bound">xs</a> <a id="3956" href="../../../Lists/#4535" class="Function Operator">++</a> <a id="3959" href="Assignment3.html#3921" class="Bound">ys</a><a id="3961" class="Symbol">)</a> <a id="3963" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3965" href="../../../Lists/#19458" class="Function">foldr</a> <a id="3971" href="Assignment3.html#3892" class="Bound Operator">_⊗_</a> <a id="3975" class="Symbol">(</a><a id="3976" href="../../../Lists/#19458" class="Function">foldr</a> <a id="3982" href="Assignment3.html#3892" class="Bound Operator">_⊗_</a> <a id="3986" href="Assignment3.html#3910" class="Bound">e</a> <a id="3988" href="Assignment3.html#3921" class="Bound">ys</a><a id="3990" class="Symbol">)</a> <a id="3992" href="Assignment3.html#3918" class="Bound">xs</a>
</pre>
<h4 id="exercise-map-is-foldr-practice">Exercise <code>map-is-foldr</code> (practice)</h4>
Show that map can be defined using fold:
<pre class="Agda"><a id="4087" class="Keyword">postulate</a>
  <a id="map-is-foldr"></a><a id="4099" href="Assignment3.html#4099" class="Postulate">map-is-foldr</a> <a id="4112" class="Symbol">:</a> <a id="4114" class="Symbol">∀</a> <a id="4116" class="Symbol">{</a><a id="4117" href="Assignment3.html#4117" class="Bound">A</a> <a id="4119" href="Assignment3.html#4119" class="Bound">B</a> <a id="4121" class="Symbol">:</a> <a id="4123" class="PrimitiveType">Set</a><a id="4126" class="Symbol">}</a> <a id="4128" class="Symbol">{</a><a id="4129" href="Assignment3.html#4129" class="Bound">f</a> <a id="4131" class="Symbol">:</a> <a id="4133" href="Assignment3.html#4117" class="Bound">A</a> <a id="4135" class="Symbol">→</a> <a id="4137" href="Assignment3.html#4119" class="Bound">B</a><a id="4138" class="Symbol">}</a> <a id="4140" class="Symbol">→</a>
    <a id="4146" href="../../../Lists/#16331" class="Function">map</a> <a id="4150" href="Assignment3.html#4129" class="Bound">f</a> <a id="4152" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4154" href="../../../Lists/#19458" class="Function">foldr</a> <a id="4160" class="Symbol">(λ</a> <a id="4163" href="Assignment3.html#4163" class="Bound">x</a> <a id="4165" href="Assignment3.html#4165" class="Bound">xs</a> <a id="4168" class="Symbol">→</a> <a id="4170" href="Assignment3.html#4129" class="Bound">f</a> <a id="4172" href="Assignment3.html#4163" class="Bound">x</a> <a id="4174" href="../../../Lists/#1308" class="InductiveConstructor Operator">∷</a> <a id="4176" href="Assignment3.html#4165" class="Bound">xs</a><a id="4178" class="Symbol">)</a> <a id="4180" href="../../../Lists/#1293" class="InductiveConstructor">[]</a>
</pre>
<p>This requires extensionality.</p>
<h4 id="exercise-fold-tree-practice">Exercise <code>fold-Tree</code> (practice)</h4>
Define a suitable fold function for the type of trees given earlier:
<pre class="Agda"><a id="4329" class="Keyword">postulate</a>
  <a id="fold-Tree"></a><a id="4341" href="Assignment3.html#4341" class="Postulate">fold-Tree</a> <a id="4351" class="Symbol">:</a> <a id="4353" class="Symbol">∀</a> <a id="4355" class="Symbol">{</a><a id="4356" href="Assignment3.html#4356" class="Bound">A</a> <a id="4358" href="Assignment3.html#4358" class="Bound">B</a> <a id="4360" href="Assignment3.html#4360" class="Bound">C</a> <a id="4362" class="Symbol">:</a> <a id="4364" class="PrimitiveType">Set</a><a id="4367" class="Symbol">}</a>
    <a id="4373" class="Symbol">→</a> <a id="4375" class="Symbol">(</a><a id="4376" href="Assignment3.html#4356" class="Bound">A</a> <a id="4378" class="Symbol">→</a> <a id="4380" href="Assignment3.html#4360" class="Bound">C</a><a id="4381" class="Symbol">)</a> <a id="4383" class="Symbol">→</a> <a id="4385" class="Symbol">(</a><a id="4386" href="Assignment3.html#4360" class="Bound">C</a> <a id="4388" class="Symbol">→</a> <a id="4390" href="Assignment3.html#4358" class="Bound">B</a> <a id="4392" class="Symbol">→</a> <a id="4394" href="Assignment3.html#4360" class="Bound">C</a> <a id="4396" class="Symbol">→</a> <a id="4398" href="Assignment3.html#4360" class="Bound">C</a><a id="4399" class="Symbol">)</a> <a id="4401" class="Symbol">→</a> <a id="4403" href="Assignment3.html#3328" class="Datatype">Tree</a> <a id="4408" href="Assignment3.html#4356" class="Bound">A</a> <a id="4410" href="Assignment3.html#4358" class="Bound">B</a> <a id="4412" class="Symbol">→</a> <a id="4414" href="Assignment3.html#4360" class="Bound">C</a>
</pre>
<pre class="Agda"><a id="4425" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-map-is-fold-tree-practice">Exercise <code>map-is-fold-Tree</code> (practice)</h4>
<p>Demonstrate an analogue of <code>map-is-foldr</code> for the type of trees.</p>
<pre class="Agda"><a id="4568" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-sum-downfrom-stretch">Exercise <code>sum-downFrom</code> (stretch)</h4>
Define a function that counts down as follows:
<pre class="Agda"><a id="downFrom"></a><a id="4687" href="Assignment3.html#4687" class="Function">downFrom</a> <a id="4696" class="Symbol">:</a> <a id="4698" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="4700" class="Symbol">→</a> <a id="4702" href="../../../Lists/#1264" class="Datatype">List</a> <a id="4707" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="4709" href="Assignment3.html#4687" class="Function">downFrom</a> <a id="4718" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>     <a id="4727" class="Symbol">=</a>  <a id="4730" href="../../../Lists/#1293" class="InductiveConstructor">[]</a>
<a id="4733" href="Assignment3.html#4687" class="Function">downFrom</a> <a id="4742" class="Symbol">(</a><a id="4743" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="4747" href="Assignment3.html#4747" class="Bound">n</a><a id="4748" class="Symbol">)</a>  <a id="4751" class="Symbol">=</a>  <a id="4754" href="Assignment3.html#4747" class="Bound">n</a> <a id="4756" href="../../../Lists/#1308" class="InductiveConstructor Operator">∷</a> <a id="4758" href="Assignment3.html#4687" class="Function">downFrom</a> <a id="4767" href="Assignment3.html#4747" class="Bound">n</a>
</pre>
For example:
<pre class="Agda"><a id="4790" href="Assignment3.html#4790" class="Function">_</a> <a id="4792" class="Symbol">:</a> <a id="4794" href="Assignment3.html#4687" class="Function">downFrom</a> <a id="4803" class="Number">3</a> <a id="4805" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4807" href="../../../Lists/#3778" class="InductiveConstructor Operator">[</a> <a id="4809" class="Number">2</a> <a id="4811" href="../../../Lists/#3778" class="InductiveConstructor Operator">,</a> <a id="4813" class="Number">1</a> <a id="4815" href="../../../Lists/#3778" class="InductiveConstructor Operator">,</a> <a id="4817" class="Number">0</a> <a id="4819" href="../../../Lists/#3778" class="InductiveConstructor Operator">]</a>
<a id="4821" class="Symbol">_</a> <a id="4823" class="Symbol">=</a> <a id="4825" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
Prove that the sum of the numbers <code>(n - 1) + ⋯ + 0</code> is equal to <code>n * (n ∸ 1) / 2</code>:
<pre class="Agda"><a id="4921" class="Keyword">postulate</a>
  <a id="sum-downFrom"></a><a id="4933" href="Assignment3.html#4933" class="Postulate">sum-downFrom</a> <a id="4946" class="Symbol">:</a> <a id="4948" class="Symbol">∀</a> <a id="4950" class="Symbol">(</a><a id="4951" href="Assignment3.html#4951" class="Bound">n</a> <a id="4953" class="Symbol">:</a> <a id="4955" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="4956" class="Symbol">)</a>
    <a id="4962" class="Symbol">→</a> <a id="4964" href="../../../Lists/#20606" class="Function">sum</a> <a id="4968" class="Symbol">(</a><a id="4969" href="Assignment3.html#4687" class="Function">downFrom</a> <a id="4978" href="Assignment3.html#4951" class="Bound">n</a><a id="4979" class="Symbol">)</a> <a id="4981" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#528" class="Primitive Operator">*</a> <a id="4983" class="Number">2</a> <a id="4985" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4987" href="Assignment3.html#4951" class="Bound">n</a> <a id="4989" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#528" class="Primitive Operator">*</a> <a id="4991" class="Symbol">(</a><a id="4992" href="Assignment3.html#4951" class="Bound">n</a> <a id="4994" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1429" class="Primitive Operator">∸</a> <a id="4996" class="Number">1</a><a id="4997" class="Symbol">)</a>
</pre>
<h4 id="exercise-foldl-practice">Exercise <code>foldl</code> (practice)</h4>
<p>Define a function <code>foldl</code> which is analogous to <code>foldr</code>, but where operations associate to the left rather than the right. For example:</p>
<pre><code>foldr _⊗_ e [ x , y , z ]  =  x ⊗ (y ⊗ (z ⊗ e))
foldl _⊗_ e [ x , y , z ]  =  ((e ⊗ x) ⊗ y) ⊗ z</code></pre>
<pre class="Agda"><a id="5286" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-foldr-monoid-foldl-practice">Exercise <code>foldr-monoid-foldl</code> (practice)</h4>
<p>Show that if <code>_⊗_</code> and <code>e</code> form a monoid, then <code>foldr _⊗_ e</code> and <code>foldl _⊗_ e</code> always compute the same result.</p>
<pre class="Agda"><a id="5478" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-any---recommended">Exercise <code>Any-++-⇔</code> (recommended)</h4>
<p>Prove a result similar to <code>All-++-⇔</code>, but with <code>Any</code> in place of <code>All</code>, and a suitable replacement for <code>_×_</code>. As a consequence, demonstrate an equivalence relating <code>_∈_</code> and <code>_++_</code>.</p>
<pre class="Agda"><a id="5735" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-all---stretch">Exercise <code>All-++-≃</code> (stretch)</h4>
<p>Show that the equivalence <code>All-++-⇔</code> can be extended to an isomorphism.</p>
<pre class="Agda"><a id="5877" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-anyall-recommended">Exercise <code>¬Any⇔All¬</code> (recommended)</h4>
<p>Show that <code>Any</code> and <code>All</code> satisfy a version of De Morgan’s Law:</p>
<pre><code>(¬_ ∘ Any P) xs ⇔ All (¬_ ∘ P) xs</code></pre>
<p>(Can you see why it is important that here <code>_∘_</code> is generalised to arbitrary levels, as described in the section on <a href="../../../Equality/#unipoly">universe polymorphism</a>?)</p>
<p>Do we also have the following?</p>
<pre><code>(¬_ ∘ All P) xs ⇔ Any (¬_ ∘ P) xs</code></pre>
<p>If so, prove; if not, explain why.</p>
<pre class="Agda"><a id="6326" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-anyall-stretch">Exercise <code>¬Any≃All¬</code> (stretch)</h4>
<p>Show that the equivalence <code>¬Any⇔All¬</code> can be extended to an isomorphism. You will need to use extensionality.</p>
<pre class="Agda"><a id="6507" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-all--practice">Exercise <code>All-∀</code> (practice)</h4>
<p>Show that <code>All P xs</code> is isomorphic to <code>∀ {x} → x ∈ xs → P x</code>.</p>
<pre class="Agda"><a id="6637" class="Comment">-- You code goes here</a>
</pre>
<h4 id="exercise-any--practice">Exercise <code>Any-∃</code> (practice)</h4>
<p>Show that <code>Any P xs</code> is isomorphic to <code>∃[ x ] (x ∈ xs × P x)</code>.</p>
<pre class="Agda"><a id="6767" class="Comment">-- You code goes here</a>
</pre>
<h4 id="exercise-any-stretch">Exercise <code>any?</code> (stretch)</h4>
<p>Just as <code>All</code> has analogues <code>all</code> and <code>All?</code> which determine whether a predicate holds for every element of a list, so does <code>Any</code> have analogues <code>any</code> and <code>Any?</code> which determine whether a predicate holds for some element of a list. Give their definitions.</p>
<pre class="Agda"><a id="7089" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-filter-stretch">Exercise <code>filter?</code> (stretch)</h4>
Define the following variant of the traditional <code>filter</code> function on lists, which given a decidable predicate and a list returns all elements of the list satisfying the predicate:
<pre class="Agda"><a id="7337" class="Keyword">postulate</a>
  <a id="filter?"></a><a id="7349" href="Assignment3.html#7349" class="Postulate">filter?</a> <a id="7357" class="Symbol">:</a> <a id="7359" class="Symbol">∀</a> <a id="7361" class="Symbol">{</a><a id="7362" href="Assignment3.html#7362" class="Bound">A</a> <a id="7364" class="Symbol">:</a> <a id="7366" class="PrimitiveType">Set</a><a id="7369" class="Symbol">}</a> <a id="7371" class="Symbol">{</a><a id="7372" href="Assignment3.html#7372" class="Bound">P</a> <a id="7374" class="Symbol">:</a> <a id="7376" href="Assignment3.html#7362" class="Bound">A</a> <a id="7378" class="Symbol">→</a> <a id="7380" class="PrimitiveType">Set</a><a id="7383" class="Symbol">}</a>
    <a id="7389" class="Symbol">→</a> <a id="7391" class="Symbol">(</a><a id="7392" href="Assignment3.html#7392" class="Bound">P?</a> <a id="7395" class="Symbol">:</a> <a id="7397" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Unary.html#3536" class="Function">Decidable</a> <a id="7407" href="Assignment3.html#7372" class="Bound">P</a><a id="7408" class="Symbol">)</a> <a id="7410" class="Symbol">→</a> <a id="7412" href="../../../Lists/#1264" class="Datatype">List</a> <a id="7417" href="Assignment3.html#7362" class="Bound">A</a> <a id="7419" class="Symbol">→</a> <a id="7421" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1788" class="Function">∃[</a> <a id="7424" href="Assignment3.html#7424" class="Bound">ys</a> <a id="7427" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1788" class="Function">]</a><a id="7428" class="Symbol">(</a> <a id="7430" href="../../../Lists/#27578" class="Datatype">All</a> <a id="7434" href="Assignment3.html#7372" class="Bound">P</a> <a id="7436" href="Assignment3.html#7424" class="Bound">ys</a> <a id="7439" class="Symbol">)</a>
</pre>
<h2 id="lambda">Lambda</h2>
<h4 id="exercise-mul-recommended">Exercise <code>mul</code> (recommended)</h4>
<p>Write out the definition of a lambda term that multiplies two natural numbers. Your definition may use <code>plus</code> as defined earlier.</p>
<pre class="Agda"><a id="7630" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-mulᶜ-practice">Exercise <code>mulᶜ</code> (practice)</h4>
<p>Write out the definition of a lambda term that multiplies two natural numbers represented as Church numerals. Your definition may use <code>plusᶜ</code> as defined earlier (or may not — there are nice definitions both ways).</p>
<pre class="Agda"><a id="7911" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="primed">Exercise <code>primed</code> (stretch)</h4>
Some people find it annoying to write <code>` "x"</code> instead of <code>x</code>. We can make examples with lambda terms slightly easier to write by adding the following definitions:
<pre class="Agda"><a id="ƛ′_⇒_"></a><a id="8155" href="Assignment3.html#8155" class="Function Operator">ƛ′_⇒_</a> <a id="8161" class="Symbol">:</a> <a id="8163" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8168" class="Symbol">→</a> <a id="8170" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8175" class="Symbol">→</a> <a id="8177" href="../../../Lambda/#5495" class="Datatype">Term</a>
<a id="8182" href="Assignment3.html#8155" class="Function Operator">ƛ′</a> <a id="8185" class="Symbol">(</a><a id="8186" href="../../../Lambda/#5514" class="InductiveConstructor Operator">`</a> <a id="8188" href="Assignment3.html#8188" class="Bound">x</a><a id="8189" class="Symbol">)</a> <a id="8191" href="Assignment3.html#8155" class="Function Operator">⇒</a> <a id="8193" href="Assignment3.html#8193" class="Bound">N</a>  <a id="8196" class="Symbol">=</a>  <a id="8199" href="../../../Lambda/#5553" class="InductiveConstructor Operator">ƛ</a> <a id="8201" href="Assignment3.html#8188" class="Bound">x</a> <a id="8203" href="../../../Lambda/#5553" class="InductiveConstructor Operator">⇒</a> <a id="8205" href="Assignment3.html#8193" class="Bound">N</a>
<a id="8207" href="Assignment3.html#8155" class="CatchallClause Function Operator">ƛ′</a><a id="8209" class="CatchallClause"> </a><a id="8210" class="CatchallClause Symbol">_</a><a id="8211" class="CatchallClause"> </a><a id="8212" href="Assignment3.html#8155" class="CatchallClause Function Operator">⇒</a><a id="8213" class="CatchallClause"> </a><a id="8214" class="CatchallClause Symbol">_</a>      <a id="8221" class="Symbol">=</a>  <a id="8224" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="8231" href="Assignment3.html#8260" class="Postulate">impossible</a>
  <a id="8244" class="Keyword">where</a> <a id="8250" class="Keyword">postulate</a> <a id="8260" href="Assignment3.html#8260" class="Postulate">impossible</a> <a id="8271" class="Symbol">:</a> <a id="8273" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#526" class="Datatype">⊥</a>

<a id="case′_[zero⇒_|suc_⇒_]"></a><a id="8276" href="Assignment3.html#8276" class="Function Operator">case′_[zero⇒_|suc_⇒_]</a> <a id="8298" class="Symbol">:</a> <a id="8300" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8305" class="Symbol">→</a> <a id="8307" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8312" class="Symbol">→</a> <a id="8314" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8319" class="Symbol">→</a> <a id="8321" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8326" class="Symbol">→</a> <a id="8328" href="../../../Lambda/#5495" class="Datatype">Term</a>
<a id="8333" href="Assignment3.html#8276" class="Function Operator">case′</a> <a id="8339" href="Assignment3.html#8339" class="Bound">L</a> <a id="8341" href="Assignment3.html#8276" class="Function Operator">[zero⇒</a> <a id="8348" href="Assignment3.html#8348" class="Bound">M</a> <a id="8350" href="Assignment3.html#8276" class="Function Operator">|suc</a> <a id="8355" class="Symbol">(</a><a id="8356" href="../../../Lambda/#5514" class="InductiveConstructor Operator">`</a> <a id="8358" href="Assignment3.html#8358" class="Bound">x</a><a id="8359" class="Symbol">)</a> <a id="8361" href="Assignment3.html#8276" class="Function Operator">⇒</a> <a id="8363" href="Assignment3.html#8363" class="Bound">N</a> <a id="8365" href="Assignment3.html#8276" class="Function Operator">]</a>  <a id="8368" class="Symbol">=</a>  <a id="8371" href="../../../Lambda/#5722" class="InductiveConstructor Operator">case</a> <a id="8376" href="Assignment3.html#8339" class="Bound">L</a> <a id="8378" href="../../../Lambda/#5722" class="InductiveConstructor Operator">[zero⇒</a> <a id="8385" href="Assignment3.html#8348" class="Bound">M</a> <a id="8387" href="../../../Lambda/#5722" class="InductiveConstructor Operator">|suc</a> <a id="8392" href="Assignment3.html#8358" class="Bound">x</a> <a id="8394" href="../../../Lambda/#5722" class="InductiveConstructor Operator">⇒</a> <a id="8396" href="Assignment3.html#8363" class="Bound">N</a> <a id="8398" href="../../../Lambda/#5722" class="InductiveConstructor Operator">]</a>
<a id="8400" href="Assignment3.html#8276" class="CatchallClause Function Operator">case′</a><a id="8405" class="CatchallClause"> </a><a id="8406" class="CatchallClause Symbol">_</a><a id="8407" class="CatchallClause"> </a><a id="8408" href="Assignment3.html#8276" class="CatchallClause Function Operator">[zero⇒</a><a id="8414" class="CatchallClause"> </a><a id="8415" class="CatchallClause Symbol">_</a><a id="8416" class="CatchallClause"> </a><a id="8417" href="Assignment3.html#8276" class="CatchallClause Function Operator">|suc</a><a id="8421" class="CatchallClause"> </a><a id="8422" class="CatchallClause Symbol">_</a><a id="8423" class="CatchallClause"> </a><a id="8424" href="Assignment3.html#8276" class="CatchallClause Function Operator">⇒</a><a id="8425" class="CatchallClause"> </a><a id="8426" class="CatchallClause Symbol">_</a><a id="8427" class="CatchallClause"> </a><a id="8428" href="Assignment3.html#8276" class="CatchallClause Function Operator">]</a>      <a id="8435" class="Symbol">=</a>  <a id="8438" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="8445" href="Assignment3.html#8474" class="Postulate">impossible</a>
  <a id="8458" class="Keyword">where</a> <a id="8464" class="Keyword">postulate</a> <a id="8474" href="Assignment3.html#8474" class="Postulate">impossible</a> <a id="8485" class="Symbol">:</a> <a id="8487" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#526" class="Datatype">⊥</a>

<a id="μ′_⇒_"></a><a id="8490" href="Assignment3.html#8490" class="Function Operator">μ′_⇒_</a> <a id="8496" class="Symbol">:</a> <a id="8498" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8503" class="Symbol">→</a> <a id="8505" href="../../../Lambda/#5495" class="Datatype">Term</a> <a id="8510" class="Symbol">→</a> <a id="8512" href="../../../Lambda/#5495" class="Datatype">Term</a>
<a id="8517" href="Assignment3.html#8490" class="Function Operator">μ′</a> <a id="8520" class="Symbol">(</a><a id="8521" href="../../../Lambda/#5514" class="InductiveConstructor Operator">`</a> <a id="8523" href="Assignment3.html#8523" class="Bound">x</a><a id="8524" class="Symbol">)</a> <a id="8526" href="Assignment3.html#8490" class="Function Operator">⇒</a> <a id="8528" href="Assignment3.html#8528" class="Bound">N</a>  <a id="8531" class="Symbol">=</a>  <a id="8534" href="../../../Lambda/#5782" class="InductiveConstructor Operator">μ</a> <a id="8536" href="Assignment3.html#8523" class="Bound">x</a> <a id="8538" href="../../../Lambda/#5782" class="InductiveConstructor Operator">⇒</a> <a id="8540" href="Assignment3.html#8528" class="Bound">N</a>
<a id="8542" href="Assignment3.html#8490" class="CatchallClause Function Operator">μ′</a><a id="8544" class="CatchallClause"> </a><a id="8545" class="CatchallClause Symbol">_</a><a id="8546" class="CatchallClause"> </a><a id="8547" href="Assignment3.html#8490" class="CatchallClause Function Operator">⇒</a><a id="8548" class="CatchallClause"> </a><a id="8549" class="CatchallClause Symbol">_</a>      <a id="8556" class="Symbol">=</a>  <a id="8559" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="8566" href="Assignment3.html#8595" class="Postulate">impossible</a>
  <a id="8579" class="Keyword">where</a> <a id="8585" class="Keyword">postulate</a> <a id="8595" href="Assignment3.html#8595" class="Postulate">impossible</a> <a id="8606" class="Symbol">:</a> <a id="8608" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#526" class="Datatype">⊥</a>
</pre>
<p>We intend to apply the function only when the first term is a variable, which we indicate by postulating a term <code>impossible</code> of the empty type <code>⊥</code>. If we use C-c C-n to normalise the term</p>
<p>ƛ′ two ⇒ two</p>
<p>Agda will return an answer warning us that the impossible has occurred:</p>
<p>⊥-elim (plfa.part2.Lambda.impossible (<code>`suc (`suc `zero)) (`suc (`suc `zero))</code>)</p>
<p>While postulating the impossible is a useful technique, it must be used with care, since such postulation could allow us to provide evidence of <em>any</em> proposition whatsoever, regardless of its truth.</p>
The definition of <code>plus</code> can now be written as follows:
<pre class="Agda"><a id="plus′"></a><a id="9240" href="Assignment3.html#9240" class="Function">plus′</a> <a id="9246" class="Symbol">:</a> <a id="9248" href="../../../Lambda/#5495" class="Datatype">Term</a>
<a id="9253" href="Assignment3.html#9240" class="Function">plus′</a> <a id="9259" class="Symbol">=</a> <a id="9261" href="Assignment3.html#8490" class="Function Operator">μ′</a> <a id="9264" href="Assignment3.html#9371" class="Function">+</a> <a id="9266" href="Assignment3.html#8490" class="Function Operator">⇒</a> <a id="9268" href="Assignment3.html#8155" class="Function Operator">ƛ′</a> <a id="9271" href="Assignment3.html#9385" class="Function">m</a> <a id="9273" href="Assignment3.html#8155" class="Function Operator">⇒</a> <a id="9275" href="Assignment3.html#8155" class="Function Operator">ƛ′</a> <a id="9278" href="Assignment3.html#9399" class="Function">n</a> <a id="9280" href="Assignment3.html#8155" class="Function Operator">⇒</a>
          <a id="9292" href="Assignment3.html#8276" class="Function Operator">case′</a> <a id="9298" href="Assignment3.html#9385" class="Function">m</a>
            <a id="9312" href="Assignment3.html#8276" class="Function Operator">[zero⇒</a> <a id="9319" href="Assignment3.html#9399" class="Function">n</a>
            <a id="9333" href="Assignment3.html#8276" class="Function Operator">|suc</a> <a id="9338" href="Assignment3.html#9385" class="Function">m</a> <a id="9340" href="Assignment3.html#8276" class="Function Operator">⇒</a> <a id="9342" href="../../../Lambda/#5681" class="InductiveConstructor Operator">`suc</a> <a id="9347" class="Symbol">(</a><a id="9348" href="Assignment3.html#9371" class="Function">+</a> <a id="9350" href="../../../Lambda/#5599" class="InductiveConstructor Operator">·</a> <a id="9352" href="Assignment3.html#9385" class="Function">m</a> <a id="9354" href="../../../Lambda/#5599" class="InductiveConstructor Operator">·</a> <a id="9356" href="Assignment3.html#9399" class="Function">n</a><a id="9357" class="Symbol">)</a> <a id="9359" href="Assignment3.html#8276" class="Function Operator">]</a>
  <a id="9363" class="Keyword">where</a>
  <a id="9371" href="Assignment3.html#9371" class="Function">+</a>  <a id="9374" class="Symbol">=</a>  <a id="9377" href="../../../Lambda/#5514" class="InductiveConstructor Operator">`</a> <a id="9379" class="String">&quot;+&quot;</a>
  <a id="9385" href="Assignment3.html#9385" class="Function">m</a>  <a id="9388" class="Symbol">=</a>  <a id="9391" href="../../../Lambda/#5514" class="InductiveConstructor Operator">`</a> <a id="9393" class="String">&quot;m&quot;</a>
  <a id="9399" href="Assignment3.html#9399" class="Function">n</a>  <a id="9402" class="Symbol">=</a>  <a id="9405" href="../../../Lambda/#5514" class="InductiveConstructor Operator">`</a> <a id="9407" class="String">&quot;n&quot;</a>
</pre>
<p>Write out the definition of multiplication in the same style.</p>
<h4 id="exercise-___-stretch">Exercise <code>_[_:=_]′</code> (stretch)</h4>
<p>The definition of substitution above has three clauses (<code>ƛ</code>, <code>case</code>, and <code>μ</code>) that invoke a <code>with</code> clause to deal with bound variables. Rewrite the definition to factor the common part of these three clauses into a single function, defined by mutual recursion with substitution.</p>
<pre class="Agda"><a id="9799" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-practice">Exercise <code>—↠≲—↠′</code> (practice)</h4>
<p>Show that the first notion of reflexive and transitive closure above embeds into the second. Why are they not isomorphic?</p>
<pre class="Agda"><a id="9990" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-plus-example-practice">Exercise <code>plus-example</code> (practice)</h4>
<p>Write out the reduction sequence demonstrating that one plus one is two.</p>
<pre class="Agda"><a id="10137" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-context--practice">Exercise <code>Context-≃</code> (practice)</h4>
<p>Show that <code>Context</code> is isomorphic to <code>List (Id × Type)</code>. For instance, the isomorphism relates the context</p>
<pre><code>∅ , &quot;s&quot; ⦂ `ℕ ⇒ `ℕ , &quot;z&quot; ⦂ `ℕ</code></pre>
<p>to the list</p>
<pre><code>[ ⟨ &quot;z&quot; , `ℕ ⟩ , ⟨ &quot;s&quot; , `ℕ ⇒ `ℕ ⟩ ]</code></pre>
<pre class="Agda"><a id="10405" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-mul-type-recommended">Exercise <code>mul-type</code> (recommended)</h4>
<p>Using the term <code>mul</code> you defined earlier, write out the derivation showing that it is well typed.</p>
<pre class="Agda"><a id="10576" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-mulᶜ-type-practice">Exercise <code>mulᶜ-type</code> (practice)</h4>
<p>Using the term <code>mulᶜ</code> you defined earlier, write out the derivation showing that it is well typed.</p>
<pre class="Agda"><a id="10747" class="Comment">-- Your code goes here</a>
</pre>
<h2 id="properties">Properties</h2>
<h4 id="exercise-progress--practice">Exercise <code>Progress-≃</code> (practice)</h4>
<p>Show that <code>Progress M</code> is isomorphic to <code>Value M ⊎ ∃[ N ](M —→ N)</code>.</p>
<pre class="Agda"><a id="10904" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-progress-practice">Exercise <code>progress′</code> (practice)</h4>
<p>Write out the proof of <code>progress′</code> in full, and compare it to the proof of <code>progress</code> above.</p>
<pre class="Agda"><a id="11068" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-value-practice">Exercise <code>value?</code> (practice)</h4>
Combine <code>progress</code> and <code>—→¬V</code> to write a program that decides whether a well-typed term is a value:
<pre class="Agda"><a id="11235" class="Keyword">postulate</a>
  <a id="value?"></a><a id="11247" href="Assignment3.html#11247" class="Postulate">value?</a> <a id="11254" class="Symbol">:</a> <a id="11256" class="Symbol">∀</a> <a id="11258" class="Symbol">{</a><a id="11259" href="Assignment3.html#11259" class="Bound">A</a> <a id="11261" href="Assignment3.html#11261" class="Bound">M</a><a id="11262" class="Symbol">}</a> <a id="11264" class="Symbol">→</a> <a id="11266" href="../../../Lambda/#42150" class="InductiveConstructor">∅</a> <a id="11268" href="../../../Lambda/#46025" class="Datatype Operator">⊢</a> <a id="11270" href="Assignment3.html#11261" class="Bound">M</a> <a id="11272" href="../../../Lambda/#46025" class="Datatype Operator">⦂</a> <a id="11274" href="Assignment3.html#11259" class="Bound">A</a> <a id="11276" class="Symbol">→</a> <a id="11278" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a> <a id="11282" class="Symbol">(</a><a id="11283" href="../../../Lambda/#16911" class="Datatype">Value</a> <a id="11289" href="Assignment3.html#11261" class="Bound">M</a><a id="11290" class="Symbol">)</a>
</pre>
<h4 id="exercise-subst-stretch">Exercise <code>subst′</code> (stretch)</h4>
<p>Rewrite <code>subst</code> to work with the modified definition <code>_[_:=_]′</code> from the exercise in the previous chapter. As before, this should factor dealing with bound variables into a single function, defined by mutual recursion with the proof that substitution preserves types.</p>
<pre class="Agda"><a id="11605" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-mul-eval-recommended">Exercise <code>mul-eval</code> (recommended)</h4>
<p>Using the evaluator, confirm that two times two is four.</p>
<pre class="Agda"><a id="11736" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-progress-preservation-practice">Exercise: <code>progress-preservation</code> (practice)</h4>
<p>Without peeking at their statements above, write down the progress and preservation theorems for the simply typed lambda-calculus.</p>
<pre class="Agda"><a id="11952" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-subject_expansion-practice">Exercise <code>subject_expansion</code> (practice)</h4>
<p>We say that <code>M</code> <em>reduces</em> to <code>N</code> if <code>M —→ N</code>, but we can also describe the same situation by saying that <code>N</code> <em>expands</em> to <code>M</code>. The preservation property is sometimes called <em>subject reduction</em>. Its opposite is <em>subject expansion</em>, which holds if <code>M —→ N</code> and <code>∅ ⊢ N ⦂ A</code> imply <code>∅ ⊢ M ⦂ A</code>. Find two counter-examples to subject expansion, one with case expressions and one not involving case expressions.</p>
<pre class="Agda"><a id="12436" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-stuck-practice">Exercise <code>stuck</code> (practice)</h4>
<p>Give an example of an ill-typed term that does get stuck.</p>
<pre class="Agda"><a id="12562" class="Comment">-- Your code goes here</a>
</pre>
<h4 id="exercise-unstuck-recommended">Exercise <code>unstuck</code> (recommended)</h4>
<p>Provide proofs of the three postulates, <code>unstuck</code>, <code>preserves</code>, and <code>wttdgs</code> above.</p>
<pre class="Agda"><a id="12718" class="Comment">-- Your code goes here</a>
</pre>
    </div>
    <nav class="pager">
    <ul class="pagination">
        
        
        <li><a class="pagelink" href="https://github.com/Agda-zh/PLFA-zh/blob/dev/courses/tspl/2019/Assignment3.lagda.md">源文件</a></li>
        <li class="separator">&bullet;</li>
        
        
    </ul>
</nav>

</article>

            </div>
        </main>
        <footer class="site-footer h-card">
    <data class="u-url" href="../../../"></data>
    <div class="wrapper">
        <h2 class="footer-heading">编程语言基础：Agda 语言描述</h2>
        
        
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Philip Wadler</li>
                    <li>
                        
                        <a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a>
                        
                    </li>
                </ul>
            </div>
            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
    
    <li><a rel="me" href="https://github.com/wadler" title="wadler"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#github"></use></svg>&nbsp;wadler</a></li>
    
    
</ul>

            </div>
            <div class="footer-col footer-col-3">
                
            </div>
        </div>
        
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Wen Kokke</li>
                    <li>
                        
                        <a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a>
                        
                    </li>
                </ul>
            </div>
            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
    
    <li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#github"></use></svg>&nbsp;wenkokke</a></li>
    
    
    <li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#twitter"></use></svg>&nbsp;wenkokke</a></li>
    
</ul>

            </div>
            <div class="footer-col footer-col-3">
                
            </div>
        </div>
        
        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Jeremy G. Siek</li>
                    <li>
                        
                        <a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a>
                        
                    </li>
                </ul>
            </div>
            <div class="footer-col footer-col-2">
                <ul class="social-media-list">
    
    <li><a rel="me" href="https://github.com/jsiek" title="jsiek"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#github"></use></svg>&nbsp;jsiek</a></li>
    
    
    <li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><svg class="svg-icon grey"><use xlink:href="/public/minima-social-icons.svg#twitter"></use></svg>&nbsp;jeremysiek</a></li>
    
</ul>

            </div>
            <div class="footer-col footer-col-3">
                
            </div>
        </div>
        
        
        This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
    </div>
</footer>

    </body>
</html>
